(function(){
PUBNUB.crypto=function(){var w=14,t=8,v=!1,B=function(b,e){var c="",d,f;if(e){d=b[15];if(16<d)throw"Decryption error: Maybe bad key";if(16==d)return"";for(f=0;f<16-d;f++)c+=String.fromCharCode(b[f])}else for(f=0;16>f;f++)c+=String.fromCharCode(b[f]);return c},u=function(b,e){var c=[],d;if(!e)try{b=unescape(encodeURIComponent(b))}catch(f){throw"Error on UTF-8 encode";}for(d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c},k=function(b,e){var c=12<=w?3:2,d=[],f=[],d=[],f=[],p=b.concat(e),q;d[0]=GibberishAES.Hash.MD5(p);
f=d[0];for(q=1;q<c;q++)d[q]=GibberishAES.Hash.MD5(d[q-1].concat(p)),f=f.concat(d[q]);d=f.slice(0,4*t);f=f.slice(4*t,4*t+16);return{key:d,iv:f}},s=function(b,e,c){e=H(e);var d=Math.ceil(b.length/16),f=[],p,q=[];for(p=0;p<d;p++){var n=f,s=p,u=b.slice(16*p,16*p+16),t=[],k=void 0,k=void 0;16>u.length&&(k=16-u.length,t=[k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k]);for(k=0;k<u.length;k++)t[k]=u[k];n[s]=t}0===b.length%16&&f.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]);for(p=0;p<f.length;p++)f[p]=0===p?C(f[p],
c):C(f[p],q[p-1]),q[p]=y(f[p],e);return q},z=function(b,e,c,d){e=H(e);var f=b.length/16,p=[],q,n=[],k="";for(q=0;q<f;q++)p.push(b.slice(16*q,16*(q+1)));for(q=p.length-1;0<=q;q--)n[q]=F(p[q],e),n[q]=0===q?C(n[q],c):C(n[q],p[q-1]);for(q=0;q<f-1;q++)k+=B(n[q]);var k=k+B(n[q],!0),s;if(d)s=k;else try{s=decodeURIComponent(escape(k))}catch(u){throw"Bad Key";}return s},y=function(b,e){v=!1;var c=D(b,e,0),d;for(d=1;d<w+1;d++)c=G(c),c=J(c),d<w&&(c=A(c)),c=D(c,e,d);return c},F=function(b,e){v=!0;var c=D(b,e,
w),d;for(d=w-1;-1<d;d--)c=J(c),c=G(c),c=D(c,e,d),0<d&&(c=A(c));return c},G=function(b){var e=v?S:K,c=[],d;for(d=0;16>d;d++)c[d]=e[b[d]];return c},J=function(b){var e=[],c=v?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],d;for(d=0;16>d;d++)e[d]=b[c[d]];return e},A=function(b){var e=[],c;if(v)for(c=0;4>c;c++)e[4*c]=L[b[4*c]]^M[b[1+4*c]]^N[b[2+4*c]]^O[b[3+4*c]],e[1+4*c]=O[b[4*c]]^L[b[1+4*c]]^M[b[2+4*c]]^N[b[3+4*c]],e[2+4*c]=N[b[4*c]]^O[b[1+4*c]]^L[b[2+4*c]]^M[b[3+4*c]],
e[3+4*c]=M[b[4*c]]^N[b[1+4*c]]^O[b[2+4*c]]^L[b[3+4*c]];else for(c=0;4>c;c++)e[4*c]=P[b[4*c]]^Q[b[1+4*c]]^b[2+4*c]^b[3+4*c],e[1+4*c]=b[4*c]^P[b[1+4*c]]^Q[b[2+4*c]]^b[3+4*c],e[2+4*c]=b[4*c]^b[1+4*c]^P[b[2+4*c]]^Q[b[3+4*c]],e[3+4*c]=Q[b[4*c]]^b[1+4*c]^b[2+4*c]^P[b[3+4*c]];return e},D=function(b,e,c){var d=[],f;for(f=0;16>f;f++)d[f]=b[f]^e[c][f];return d},C=function(b,e){var c=[],d;for(d=0;16>d;d++)c[d]=b[d]^e[d];return c},H=function(b){var e=[],c=[],d,f,p=[];for(d=0;d<t;d++)f=[b[4*d],b[4*d+1],b[4*d+
2],b[4*d+3]],e[d]=f;for(d=t;d<4*(w+1);d++){e[d]=[];for(b=0;4>b;b++)c[b]=e[d-1][b];if(0===d%t){b=c[0];f=void 0;for(f=0;4>f;f++)c[f]=c[f+1];c[3]=b;c=I(c);c[0]^=T[d/t-1]}else 6<t&&4==d%t&&(c=I(c));for(b=0;4>b;b++)e[d][b]=e[d-t][b]^c[b]}for(d=0;d<w+1;d++)for(p[d]=[],c=0;4>c;c++)p[d].push(e[4*d+c][0],e[4*d+c][1],e[4*d+c][2],e[4*d+c][3]);return p},I=function(b){for(var e=0;4>e;e++)b[e]=K[b[e]];return b},x=function(b,e){var c=[];for(i=0;i<b.length;i+=e)c[i/e]=parseInt(b.substr(i,e),16);return c},E=function(b){for(var e=
[],c=0;256>c;c++){for(var d=e,f=c,p=b,q=c,n=void 0,k=void 0,n=k=0;8>n;n++)k=1==(q&1)?k^p:k,p=127<p?283^p<<1:p<<1,q>>>=1;d[f]=k}return e},K=x("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",
2),S=function(b){var e=[];for(i=0;i<b.length;i++)e[b[i]]=i;return e}(K),T=x("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),P=E(2),Q=E(3),O=E(9),M=E(11),N=E(13),L=E(14),R=function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=b.split("");"function"===typeof Array.indexOf&&(b=e);return{encode:function(b,d){var f=[],p="",q;totalChunks=Math.floor(16*b.length/3);for(q=0;q<16*b.length;q++)f.push(b[Math.floor(q/16)][q%16]);for(q=0;q<f.length;q+=3)p+=e[f[q]>>
2],p+=e[(f[q]&3)<<4|f[q+1]>>4],p=void 0!==f[q+1]?p+e[(f[q+1]&15)<<2|f[q+2]>>6]:p+"=",p=void 0!==f[q+2]?p+e[f[q+2]&63]:p+"=";f=p.slice(0,64);for(q=1;q<Math.ceil(p.length/64);q++)f+=p.slice(64*q,64*q+64)+(Math.ceil(p.length/64)==q+1?"":"\n");return f},decode:function(c){c=c.replace(/\n/g,"");var d=[],e=[],p=[],q;for(q=0;q<c.length;q+=4)e[0]=b.indexOf(c.charAt(q)),e[1]=b.indexOf(c.charAt(q+1)),e[2]=b.indexOf(c.charAt(q+2)),e[3]=b.indexOf(c.charAt(q+3)),p[0]=e[0]<<2|e[1]>>4,p[1]=(e[1]&15)<<4|e[2]>>2,
p[2]=(e[2]&3)<<6|e[3],d.push(p[0],p[1],p[2]);return d=d.slice(0,d.length-d.length%16)}}}();return{size:function(b){switch(b){case 128:w=10;t=4;break;case 192:w=12;t=6;break;case 256:w=14;t=8;break;default:throw"Invalid Key Size Specified:"+b;}},h2a:function(b){var e=[];b.replace(/(..)/g,function(b){e.push(parseInt(b,16))});return e},expandKey:H,encryptBlock:y,decryptBlock:F,Decrypt:v,s2a:u,rawEncrypt:s,rawDecrypt:z,dec:function(b,e,c){b=R.decode(b);var d=b.slice(8,16),d=k(u(e,c),d);e=d.key;d=d.iv;
b=b.slice(16,b.length);return b=z(b,e,d,c)},openSSLKey:k,a2h:function(b){var e="",c;for(c=0;c<b.length;c++)e+=(16>b[c]?"0":"")+b[c].toString(16);return e},enc:function(b,e,c){var d;d=[];var f;for(f=0;8>f;f++)d=d.concat(Math.floor(256*Math.random()));f=k(u(e,c),d);e=f.key;f=f.iv;d=[[83,97,108,116,101,100,95,95].concat(d)];b=u(b,c);b=s(b,e,f);b=d.concat(b);return R.encode(b)},Hash:{MD5:function(b){function e(b,c){var d,e,f,g,h;f=b&2147483648;g=c&2147483648;d=b&1073741824;e=c&1073741824;h=(b&1073741823)+
(c&1073741823);return d&e?h^2147483648^f^g:d|e?h&1073741824?h^3221225472^f^g:h^1073741824^f^g:h^f^g}function c(b,c,d,f,h,g,l){b=e(b,e(e(c&d|~c&f,h),l));return e(b<<g|b>>>32-g,c)}function d(b,c,d,f,g,h,l){b=e(b,e(e(c&f|d&~f,g),l));return e(b<<h|b>>>32-h,c)}function f(b,c,d,f,h,g,l){b=e(b,e(e(c^d^f,h),l));return e(b<<g|b>>>32-g,c)}function p(b,c,d,f,g,h,l){b=e(b,e(e(d^(c|~f),g),l));return e(b<<h|b>>>32-h,c)}function q(b){var c,d,e=[];for(d=0;3>=d;d++)c=b>>>8*d&255,e=e.concat(c);return e}var n=[],k,
s,u,t,g,h,l,m,r=x("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",
8),n=function(b){var c,d=b.length;c=d+8;for(var e=16*((c-c%64)/64+1),f=[],h=0,g=0;g<d;)c=(g-g%4)/4,h=8*(g%4),f[c]|=b[g]<<h,g++;c=(g-g%4)/4;f[c]|=128<<8*(g%4);f[e-2]=d<<3;f[e-1]=d>>>29;return f}(b);g=r[0];h=r[1];l=r[2];m=r[3];for(b=0;b<n.length;b+=16)k=g,s=h,u=l,t=m,g=c(g,h,l,m,n[b+0],7,r[4]),m=c(m,g,h,l,n[b+1],12,r[5]),l=c(l,m,g,h,n[b+2],17,r[6]),h=c(h,l,m,g,n[b+3],22,r[7]),g=c(g,h,l,m,n[b+4],7,r[8]),m=c(m,g,h,l,n[b+5],12,r[9]),l=c(l,m,g,h,n[b+6],17,r[10]),h=c(h,l,m,g,n[b+7],22,r[11]),g=c(g,h,l,m,
n[b+8],7,r[12]),m=c(m,g,h,l,n[b+9],12,r[13]),l=c(l,m,g,h,n[b+10],17,r[14]),h=c(h,l,m,g,n[b+11],22,r[15]),g=c(g,h,l,m,n[b+12],7,r[16]),m=c(m,g,h,l,n[b+13],12,r[17]),l=c(l,m,g,h,n[b+14],17,r[18]),h=c(h,l,m,g,n[b+15],22,r[19]),g=d(g,h,l,m,n[b+1],5,r[20]),m=d(m,g,h,l,n[b+6],9,r[21]),l=d(l,m,g,h,n[b+11],14,r[22]),h=d(h,l,m,g,n[b+0],20,r[23]),g=d(g,h,l,m,n[b+5],5,r[24]),m=d(m,g,h,l,n[b+10],9,r[25]),l=d(l,m,g,h,n[b+15],14,r[26]),h=d(h,l,m,g,n[b+4],20,r[27]),g=d(g,h,l,m,n[b+9],5,r[28]),m=d(m,g,h,l,n[b+14],
9,r[29]),l=d(l,m,g,h,n[b+3],14,r[30]),h=d(h,l,m,g,n[b+8],20,r[31]),g=d(g,h,l,m,n[b+13],5,r[32]),m=d(m,g,h,l,n[b+2],9,r[33]),l=d(l,m,g,h,n[b+7],14,r[34]),h=d(h,l,m,g,n[b+12],20,r[35]),g=f(g,h,l,m,n[b+5],4,r[36]),m=f(m,g,h,l,n[b+8],11,r[37]),l=f(l,m,g,h,n[b+11],16,r[38]),h=f(h,l,m,g,n[b+14],23,r[39]),g=f(g,h,l,m,n[b+1],4,r[40]),m=f(m,g,h,l,n[b+4],11,r[41]),l=f(l,m,g,h,n[b+7],16,r[42]),h=f(h,l,m,g,n[b+10],23,r[43]),g=f(g,h,l,m,n[b+13],4,r[44]),m=f(m,g,h,l,n[b+0],11,r[45]),l=f(l,m,g,h,n[b+3],16,r[46]),
h=f(h,l,m,g,n[b+6],23,r[47]),g=f(g,h,l,m,n[b+9],4,r[48]),m=f(m,g,h,l,n[b+12],11,r[49]),l=f(l,m,g,h,n[b+15],16,r[50]),h=f(h,l,m,g,n[b+2],23,r[51]),g=p(g,h,l,m,n[b+0],6,r[52]),m=p(m,g,h,l,n[b+7],10,r[53]),l=p(l,m,g,h,n[b+14],15,r[54]),h=p(h,l,m,g,n[b+5],21,r[55]),g=p(g,h,l,m,n[b+12],6,r[56]),m=p(m,g,h,l,n[b+3],10,r[57]),l=p(l,m,g,h,n[b+10],15,r[58]),h=p(h,l,m,g,n[b+1],21,r[59]),g=p(g,h,l,m,n[b+8],6,r[60]),m=p(m,g,h,l,n[b+15],10,r[61]),l=p(l,m,g,h,n[b+6],15,r[62]),h=p(h,l,m,g,n[b+13],21,r[63]),g=p(g,
h,l,m,n[b+4],6,r[64]),m=p(m,g,h,l,n[b+11],10,r[65]),l=p(l,m,g,h,n[b+2],15,r[66]),h=p(h,l,m,g,n[b+9],21,r[67]),g=e(g,k),h=e(h,s),l=e(l,u),m=e(m,t);return q(g).concat(q(h),q(l),q(m))}},Base64:R}}();
PUBNUB.secure=function(){function w(k){var s=v.s2a(JSON.stringify(k)),s=v.rawEncrypt(s,B,u);return v.Base64.encode(s)||k.data.message}function t(k,s){s=s?s:{};try{var t=v.Base64.decode(k),y=v.rawDecrypt(t,B,u,!1);return JSON.parse(y)}catch(w){return s.parse_error||null}}var v=PUBNUB.crypto;v.size(256);var B="",u=v.s2a("0123456789012345");return function(k){B=v.s2a(SHA256(k.cipher_key).slice(0,32));var s=PUBNUB.init(k);return{raw_encrypt:w,raw_decrypt:t,ready:s.ready,time:PUBNUB.time,publish:function(k){k.message=
w(k.message);return s.publish(k)},unsubscribe:function(k){return s.unsubscribe(k)},subscribe:function(k){var u=k.callback||k.message;k.callback=function(k,s,B){(k=t(k))&&u(k,s,B)};return s.subscribe(k)},history:function(k){var u="",B=k.callback;k.callback=function(k){u=k[0];var s=[];for(a=0;a<u.length;a++){var v=t(u[a],{parse_error:"DECRYPT_ERROR"});s.push(v)}B([s,k[1],k[2]])};s.history(k);return!0}}}}();
function SHA256(w){function t(t,u){var k=(t&65535)+(u&65535);return(t>>16)+(u>>16)+(k>>16)<<16|k&65535}function v(t,u){return t>>>u|t<<32-u}w=function(t){t=t.replace(/\r\n/g,"\n");for(var u="",k=0;k<t.length;k++){var s=t.charCodeAt(k);128>s?u+=String.fromCharCode(s):(127<s&&2048>s?u+=String.fromCharCode(s>>6|192):(u+=String.fromCharCode(s>>12|224),u+=String.fromCharCode(s>>6&63|128)),u+=String.fromCharCode(s&63|128))}return u}(w);return function(t){for(var u="",k=0;k<4*t.length;k++)u+="0123456789abcdef".charAt(t[k>>
2]>>8*(3-k%4)+4&15)+"0123456789abcdef".charAt(t[k>>2]>>8*(3-k%4)&15);return u}(function(w,u){var k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,
2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],z=Array(64),y,F,G,J,A,D,C,H,I,x,E,K;w[u>>5]|=128<<24-u%32;w[(u+64>>9<<4)+15]=u;for(I=0;I<w.length;I+=16){y=s[0];F=s[1];G=s[2];J=s[3];
A=s[4];D=s[5];C=s[6];H=s[7];for(x=0;64>x;x++)z[x]=16>x?w[x+I]:t(t(t(v(z[x-2],17)^v(z[x-2],19)^z[x-2]>>>10,z[x-7]),v(z[x-15],7)^v(z[x-15],18)^z[x-15]>>>3),z[x-16]),E=t(t(t(t(H,v(A,6)^v(A,11)^v(A,25)),A&D^~A&C),k[x]),z[x]),K=t(v(y,2)^v(y,13)^v(y,22),y&F^y&G^F&G),H=C,C=D,D=A,A=t(J,E),J=G,G=F,F=y,y=t(E,K);s[0]=t(y,s[0]);s[1]=t(F,s[1]);s[2]=t(G,s[2]);s[3]=t(J,s[3]);s[4]=t(A,s[4]);s[5]=t(D,s[5]);s[6]=t(C,s[6]);s[7]=t(H,s[7])}return s}(function(t){for(var u=[],k=0;k<8*t.length;k+=8)u[k>>5]|=(t.charCodeAt(k/
8)&255)<<24-k%32;return u}(w),8*w.length))};
})();
