{"version":3,"sources":["web/platform.js"],"names":[],"mappings":";;AAEA;;;;;;AAKA,IAAI,KAAK;AACP,KADO,eACH,GADG,EACU;AACf,WAAO,aAAa,OAAb,CAAqB,GAArB,CAAP;AACD,GAHM;AAKP,KALO,eAKH,GALG,EAKU,IALV,EAKqB;AAC1B,WAAO,aAAa,OAAb,CAAqB,GAArB,EAA0B,IAA1B,CAAP;AACD;AAPM,CAAT;;AAWA,SAAS,oBAAT,GAAgD;AAE9C,MAAI,EAAE,YAAY,SAAd,CAAJ,EAA8B;AAC5B,WAAO,IAAP;AACD;;AAED,SAAO,UAAU,MAAjB;AACD;;AAGD,SAAS,UAAT,CAAoB,GAApB,EAAiC;AAC/B,MAAI,aAAa,UAAU,UAA3B,EAAuC;AACrC,cAAU,UAAV,CAAqB,GAArB;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF;;AAQD,IAAI,eAAe,SAAf,YAAe,CAAU,KAAV,EAAuC;AACxD,UAAQ,GAAR,CAAY,OAAZ,EAAqB,KAArB;;AAEA,QAAM,EAAN,GAAW,EAAX;AACA,QAAM,oBAAN,GAA6B,oBAA7B;AACA,QAAM,UAAN,GAAmB,UAAnB;AACA,MAAI,KAAK,4BAAW,KAAX,CAAT;;AAEA,SAAO,gBAAP,CAAwB,cAAxB,EAAwC,GAAG,eAA3C;AACA,SAAO,gBAAP,CAAwB,SAAxB,EAAmC,GAAG,gBAAtC;;AAEA,SAAO,EAAP;AACD,CAZD;;AAcA,OAAO,OAAP,GAAiB,YAAjB","file":"web/platform.js","sourcesContent":["/* @flow */\n\nimport pubNubCore from '../core/pubnub-common.js';\n\n/**\n * LOCAL STORAGE\n */\nlet db = {\n  get(key: string) {\n    return localStorage.getItem(key);\n  },\n\n  set(key: string, data: any) {\n    return localStorage.setItem(key, data);\n  }\n};\n\n// Test Connection State\nfunction navigatorOnlineCheck(): boolean | null {\n  // if onLine is not supported, return nothing.\n  if (!('onLine' in navigator)) {\n    return null;\n  }\n\n  return navigator.onLine;\n}\n\n\nfunction sendBeacon(url: string) {\n  if (navigator && navigator.sendBeacon) {\n    navigator.sendBeacon(url);\n  } else {\n    return false;\n  }\n}\n\ntype webSetupType = {\n  db: Function,\n  navigatorOnlineCheck: Function,\n  sendBeacon: ?Function,\n}\n\nlet initFunction = function (setup: webSetupType): Object {\n  console.log('setup', setup);\n\n  setup.db = db;\n  setup.navigatorOnlineCheck = navigatorOnlineCheck;\n  setup.sendBeacon = sendBeacon;\n  let PN = pubNubCore(setup);\n\n  window.addEventListener('beforeunload', PN.unloadTriggered);\n  window.addEventListener('offline', PN.offlineTriggered);\n\n  return PN;\n};\n\nmodule.exports = initFunction;\n"],"sourceRoot":"/source/"}