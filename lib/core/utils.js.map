{"version":3,"sources":["core/utils.js"],"names":[],"mappings":";;AAGA,SAAS,OAAT,CAAiB,GAAjB,EAAuC;AACrC,SAAO,CAAC,CAAC,GAAF,IAAS,OAAO,GAAP,KAAe,QAAxB,KAAqC,MAAM,OAAN,IAAiB,MAAM,OAAN,CAAc,GAAd,CAAjB,IAAuC,OAAO,IAAI,MAAX,KAAuB,QAAnG,CAAP;AAED;;AAOD,SAAS,IAAT,CAAc,CAAd,EAAyB,CAAzB,EAAsC;AACpC,MAAI,CAAC,CAAD,IAAM,CAAC,CAAX,EAAc;AACZ;AACD;;AAED,MAAI,QAAQ,CAAR,CAAJ,EAAgB;AACd,SAAK,IAAI,IAAI,CAAR,EAAW,IAAI,EAAE,MAAtB,EAA8B,IAAI,CAAlC,GAAsC;AACpC,QAAE,IAAF,CAAO,EAAE,CAAF,CAAP,EAAa,EAAE,CAAF,CAAb,EAAmB,GAAnB;AACD;AACF,GAJD,MAIO;AACL,SAAK,IAAI,CAAT,IAAc,CAAd,EAAiB;AACf,QAAE,cAAF,IACA,EAAE,cAAF,CAAiB,CAAjB,CADA,IAEA,EAAE,IAAF,CAAO,EAAE,CAAF,CAAP,EAAa,CAAb,EAAgB,EAAE,CAAF,CAAhB,CAFA;AAGD;AACF;AACF;;AAOD,SAAS,MAAT,CAAgB,IAAhB,EAAsC;AACpC,SAAO,mBAAmB,IAAnB,CAAP;AACD;;AAQD,SAAS,GAAT,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtB,MAAI,MAAM,EAAV;AACA,OAAK,QAAQ,EAAb,EAAiB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAC/B,QAAI,IAAJ,CAAS,IAAI,CAAJ,EAAO,CAAP,CAAT;AACD,GAFD;AAGA,SAAO,GAAP;AACD;;AAGD,SAAS,SAAT,CAAmB,GAAnB,EAAwB;AACtB,SAAO,mBAAmB,GAAnB,EAAwB,OAAxB,CAAgC,WAAhC,EAA6C,UAAU,CAAV,EAAa;AAC/D,WAAO,MAAM,EAAE,UAAF,CAAa,CAAb,EAAgB,QAAhB,CAAyB,EAAzB,EAA6B,WAA7B,EAAb;AACD,GAFM,CAAP;AAGD;;AAED,SAAS,mBAAT,CAA6B,CAA7B,EAAsD;AACpD,MAAI,IAAI,EAAR;AACA,OAAK,CAAL,EAAQ,UAAU,GAAV,EAAe;AACrB,MAAE,IAAF,CAAO,GAAP;AACD,GAFD;AAGA,SAAO,CAAP;AACD;;AAED,SAAS,0BAAT,CAAoC,CAApC,EAA6D;AAC3D,SAAO,oBAAoB,CAApB,EAAuB,IAAvB,EAAP;AACD;;AAED,SAAS,+BAAT,CAAyC,MAAzC,EAAiE;AAC/D,MAAI,IAAI,2BAA2B,MAA3B,CAAR;AACA,SAAO,IAAI,CAAJ,EAAO,UAAC,QAAD;AAAA,WAAc,WAAW,GAAX,GAAiB,UAAU,OAAO,QAAP,CAAV,CAA/B;AAAA,GAAP,EAAmE,IAAnE,CAAwE,GAAxE,CAAP;AACD;;AAED,OAAO,OAAP,GAAiB;AACf,gBADe;AAEf,YAFe;AAGf,kBAHe;AAIf,UAJe;AAKf,sBALe;AAMf,kEANe;AAOf,wDAPe;AAQf,0CARe;AASf,UATe,oBASN,YATM,EASgB,MAThB,EASyC;AACtD,WAAO,aAAa,OAAb,CAAqB,MAArB,EAA6B,KAAK,MAAL,GAAc,OAAO,MAAlD,MAA8D,CAAC,CAAtE;AACD;AAXc,CAAjB","file":"core/utils.js","sourcesContent":["/* @flow */\n/* eslint no-unused-expressions: 0, block-scoped-var: 0, no-redeclare: 0, guard-for-in: 0 */\n\nfunction isArray(arg: Object): boolean {\n  return !!arg && typeof arg !== 'string' && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === 'number');\n  // return !!arg && (Array.isArray && Array.isArray(arg) || typeof(arg.length) === \"number\")\n}\n\n/**\n * EACH\n * ====\n * each( [1,2,3], function(item) { } )\n */\nfunction each(o: Object, f: Function) {\n  if (!o || !f) {\n    return;\n  }\n\n  if (isArray(o)) {\n    for (var i = 0, l = o.length; i < l;) {\n      f.call(o[i], o[i], i++);\n    }\n  } else {\n    for (var i in o) {\n      o.hasOwnProperty &&\n      o.hasOwnProperty(i) &&\n      f.call(o[i], i, o[i]);\n    }\n  }\n}\n\n/**\n * ENCODE\n * ======\n * var encoded_data = encode('path');\n */\nfunction encode(path: string): string {\n  return encodeURIComponent(path);\n}\n\n\n/**\n * MAP\n * ===\n * var list = map( [1,2,3], function(item) { return item + 1 } )\n */\nfunction map(list, fun) {\n  var fin = [];\n  each(list || [], function (k, v) {\n    fin.push(fun(k, v));\n  });\n  return fin;\n}\n\n\nfunction pamEncode(str) {\n  return encodeURIComponent(str).replace(/[!'()*~]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase();\n  });\n}\n\nfunction _object_to_key_list(o: Object): Array<mixed> {\n  let l = [];\n  each(o, function (key) {\n    l.push(key);\n  });\n  return l;\n}\n\nfunction _object_to_key_list_sorted(o: Object): Array<mixed> {\n  return _object_to_key_list(o).sort();\n}\n\nfunction _get_pam_sign_input_from_params(params: Object): string {\n  let l = _object_to_key_list_sorted(params);\n  return map(l, (paramKey) => paramKey + '=' + pamEncode(params[paramKey])).join('&');\n}\n\nmodule.exports = {\n  encode,\n  each,\n  isArray,\n  map,\n  pamEncode,\n  _get_pam_sign_input_from_params,\n  _object_to_key_list_sorted,\n  _object_to_key_list,\n  endsWith(searchString: string, suffix: string): boolean {\n    return searchString.indexOf(suffix, this.length - suffix.length) !== -1;\n  }\n};\n"],"sourceRoot":"/source/"}