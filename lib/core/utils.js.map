{"version":3,"sources":["core/utils.js"],"names":["objectToList","o","l","Object","keys","forEach","key","push","encodeString","input","encodeURIComponent","replace","x","charCodeAt","toString","toUpperCase","objectToListSorted","sort","signPamFromParams","params","map","paramKey","join","endsWith","searchString","suffix","indexOf","length","createPromise","successResolve","failureResolve","promise","Promise","fulfill","reject","deprecationMessage","deprecated","fn","process","env","NODE_ENV","console","warn","module","exports"],"mappings":";;AAEA,SAASA,YAAT,CAAsBC,CAAtB,EAA6C;AAC3C,MAAIC,CAAC,GAAG,EAAR;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYH,CAAZ,EAAeI,OAAf,CAAuB,UAACC,GAAD;AAAA,WAASJ,CAAC,CAACK,IAAF,CAAOD,GAAP,CAAT;AAAA,GAAvB;AACA,SAAOJ,CAAP;AACD;;AAED,SAASM,YAAT,CAAsBC,KAAtB,EAA6C;AAC3C,SAAOC,kBAAkB,CAACD,KAAD,CAAlB,CAA0BE,OAA1B,CAAkC,WAAlC,EAA+C,UAACC,CAAD;AAAA,sBAAWA,CAAC,CAACC,UAAF,CAAa,CAAb,EAAgBC,QAAhB,CAAyB,EAAzB,EAA6BC,WAA7B,EAAX;AAAA,GAA/C,CAAP;AACD;;AAED,SAASC,kBAAT,CAA4Bf,CAA5B,EAAmD;AACjD,SAAOD,YAAY,CAACC,CAAD,CAAZ,CAAgBgB,IAAhB,EAAP;AACD;;AAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmD;AACjD,MAAIjB,CAAC,GAAGc,kBAAkB,CAACG,MAAD,CAA1B;AACA,SAAOjB,CAAC,CAACkB,GAAF,CAAM,UAACC,QAAD;AAAA,qBAAiBA,QAAjB,cAA6Bb,YAAY,CAACW,MAAM,CAACE,QAAD,CAAP,CAAzC;AAAA,GAAN,EAAqEC,IAArE,CAA0E,GAA1E,CAAP;AACD;;AAED,SAASC,QAAT,CAAkBC,YAAlB,EAAwCC,MAAxC,EAAiE;AAC/D,SAAOD,YAAY,CAACE,OAAb,CAAqBD,MAArB,EAA6B,KAAKE,MAAL,GAAcF,MAAM,CAACE,MAAlD,MAA8D,CAAC,CAAtE;AACD;;AAED,SAASC,aAAT,GAAyB;AACvB,MAAIC,cAAJ;AACA,MAAIC,cAAJ;AACA,MAAIC,OAAqB,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC3DL,IAAAA,cAAc,GAAGI,OAAjB;AACAH,IAAAA,cAAc,GAAGI,MAAjB;AACD,GAH2B,CAA5B;AAKA,SAAO;AAAEH,IAAAA,OAAO,EAAPA,OAAF;AAAWG,IAAAA,MAAM,EAAEJ,cAAnB;AAAmCG,IAAAA,OAAO,EAAEJ;AAA5C,GAAP;AACD;;AAED,IAAMM,kBAAkB,gUAAxB;;AAIA,SAASC,UAAT,CAAoBC,EAApB,EAA2C;AACzC,SAAO,YAAoB;AACzB,QAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAAA;;AAClC,UAAI,aAAAA,OAAO,UAAP,4DAASC,GAAT,8DAAcC,QAAd,MAA2B,MAA/B,EAAuC;AAErCC,QAAAA,OAAO,CAACC,IAAR,CAAaP,kBAAb;AACD;AACF;;AAED,WAAOE,EAAE,MAAF,mBAAP;AACD,GATD;AAUD;;AAEDM,MAAM,CAACC,OAAP,GAAiB;AAAE1B,EAAAA,iBAAiB,EAAjBA,iBAAF;AAAqBK,EAAAA,QAAQ,EAARA,QAArB;AAA+BK,EAAAA,aAAa,EAAbA,aAA/B;AAA8CpB,EAAAA,YAAY,EAAZA,YAA9C;AAA4D4B,EAAAA,UAAU,EAAVA;AAA5D,CAAjB","sourcesContent":["/* @flow */\n\nfunction objectToList(o: Object): Array<any> {\n  let l = [];\n  Object.keys(o).forEach((key) => l.push(key));\n  return l;\n}\n\nfunction encodeString(input: string): string {\n  return encodeURIComponent(input).replace(/[!~*'()]/g, (x) => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n}\n\nfunction objectToListSorted(o: Object): Array<any> {\n  return objectToList(o).sort();\n}\n\nfunction signPamFromParams(params: Object): string {\n  let l = objectToListSorted(params);\n  return l.map((paramKey) => `${paramKey}=${encodeString(params[paramKey])}`).join('&');\n}\n\nfunction endsWith(searchString: string, suffix: string): boolean {\n  return searchString.indexOf(suffix, this.length - suffix.length) !== -1;\n}\n\nfunction createPromise() {\n  let successResolve;\n  let failureResolve;\n  let promise: Promise<any> = new Promise((fulfill, reject) => {\n    successResolve = fulfill;\n    failureResolve = reject;\n  });\n\n  return { promise, reject: failureResolve, fulfill: successResolve };\n}\n\nconst deprecationMessage = `The Objects v1 API has been deprecated.\nYou can learn more about Objects v2 API at https://www.pubnub.com/docs/web-javascript/api-reference-objects.\nIf you have questions about the Objects v2 API or require additional help with migrating to the new data model, please contact PubNub Support at support@pubnub.com.`;\n\nfunction deprecated(fn: (...any[]) => any) {\n  return (...args: any[]) => {\n    if (typeof process !== 'undefined') {\n      if (process?.env?.NODE_ENV !== 'test') {\n        // eslint-disable-next-line no-console\n        console.warn(deprecationMessage);\n      }\n    }\n\n    return fn(...args);\n  };\n}\n\nmodule.exports = { signPamFromParams, endsWith, createPromise, encodeString, deprecated };\n"],"file":"utils.js"}