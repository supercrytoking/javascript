{"version":3,"sources":["web/index.js"],"names":["sendBeacon","url","navigator","setup","db","sdkFamily","networking","get","post","window","addEventListener","__networkDownDetected","__networkUpDetected"],"mappings":";;;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;AAEA,SAASA,UAAT,CAAoBC,GAApB,EAAiC;AAC/B,MAAIC,aAAaA,UAAUF,UAA3B,EAAuC;AACrCE,cAAUF,UAAV,CAAqBC,GAArB;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF;;;;;AAGC,kBAAYE,KAAZ,EAAwC;AAAA;;AACtCA,UAAMC,EAAN;AACAD,UAAME,SAAN,GAAkB,KAAlB;AACAF,UAAMG,UAAN,GAAmB,yBAAe,EAAEC,iBAAF,EAAOC,mBAAP,EAAaR,sBAAb,EAAf,CAAnB;;AAHsC,gHAKhCG,KALgC;;AAQtCM,WAAOC,gBAAP,CAAwB,SAAxB,EAAmC,YAAM;AACvC,YAAKC,qBAAL;AACD,KAFD;;AAIAF,WAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACtC,YAAKE,mBAAL;AACD,KAFD;AAZsC;AAevC","file":"index.js","sourcesContent":["/* @flow */\n/* global navigator, window */\n\nimport PubNubCore from '../core/pubnub-common';\nimport Networking from '../networking';\nimport db from '../db/web';\nimport { get, post } from '../networking/modules/web-node';\nimport { InternalSetupStruct } from '../core/flow_interfaces';\n\nfunction sendBeacon(url: string) {\n  if (navigator && navigator.sendBeacon) {\n    navigator.sendBeacon(url);\n  } else {\n    return false;\n  }\n}\n\nexport default class extends PubNubCore {\n  constructor(setup: InternalSetupStruct) {\n    setup.db = db;\n    setup.sdkFamily = 'Web';\n    setup.networking = new Networking({ get, post, sendBeacon });\n\n    super(setup);\n\n    // mount network events.\n    window.addEventListener('offline', () => {\n      this.__networkDownDetected();\n    });\n\n    window.addEventListener('online', () => {\n      this.__networkUpDetected();\n    });\n  }\n\n}\n"]}