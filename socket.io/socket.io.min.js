// Version: 3.7.18
(function(){
window.JSON&&window.JSON.stringify||function(){function r(){try{return this.valueOf()}catch(e){return null}}function l(d){e.lastIndex=0;return e.test(d)?'"'+d.replace(e,function(d){var h=B[d];return"string"===typeof h?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'}function d(e,w){var h,v,z,c,m,a=t,b=w[e];b&&"object"===typeof b&&(b=r.call(b));"function"===typeof y&&(b=y.call(w,e,b));switch(typeof b){case "string":return l(b);case "number":return isFinite(b)?String(b):"null";
case "boolean":case "null":return String(b);case "object":if(!b)return"null";t+=x;m=[];if("[object Array]"===Object.prototype.toString.apply(b)){c=b.length;for(h=0;h<c;h+=1)m[h]=d(h,b)||"null";z=0===m.length?"[]":t?"[\n"+t+m.join(",\n"+t)+"\n"+a+"]":"["+m.join(",")+"]";t=a;return z}if(y&&"object"===typeof y)for(c=y.length,h=0;h<c;h+=1)v=y[h],"string"===typeof v&&(z=d(v,b))&&m.push(l(v)+(t?": ":":")+z);else for(v in b)Object.hasOwnProperty.call(b,v)&&(z=d(v,b))&&m.push(l(v)+(t?": ":":")+z);z=0===m.length?
"{}":t?"{\n"+t+m.join(",\n"+t)+"\n"+a+"}":"{"+m.join(",")+"}";t=a;return z}}window.JSON||(window.JSON={});var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,x,B={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y;"function"!==typeof JSON.stringify&&(JSON.stringify=function(e,l,h){var v;x=t="";if("number"===typeof h)for(v=0;v<h;v+=1)x+=" ";else"string"===typeof h&&(x=h);if((y=l)&&"function"!==
typeof l&&("object"!==typeof l||"number"!==typeof l.length))throw Error("JSON.stringify");return d("",{"":e})});"function"!==typeof JSON.parse&&(JSON.parse=function(d){return eval("("+d+")")})}();
window.PUBNUB||function(){function r(a){function b(a){return r(a)}a.jsonp?ja=0:ja=-1==Ba.indexOf("MSIE 6");var c=a.subscribe_key||"";a.uuid||va.get(c+"uuid");var m=a.leave_on_unload||0;a.xdr=f;a.db=va;a.error=a.error||pa;a._is_online=q;a.jsonp_cb=ca;a.hmac_SHA256=fa;a.crypto_obj=P();a.sendBeacon=p;a.params={pnsdk:"PubNub-JS-Web/3.7.18"};var c=G(a),d;for(d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);b.css=F;b.$=I;b.create=K;b.bind=T;b.head=H;b.search=ga;b.attr=L;b.events=ha;b.init=b;b.secure=b;b.crypto_obj=
P();T("beforeunload",window,function(){if(m)b["each-channel"](function(a){b.LEAVE(a.name,0)});return!0});if(a.notest)return b;T("offline",window,b.offline);T("offline",document,b.offline);return b}function l(){return"x"+ ++ka+""+ +new Date}function d(){return+new Date}function e(a,b){var c=a.join("/"),d=[];if(!b)return c;h(b,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&null!=b&&0<encodeURIComponent(c).length&&d.push(a+"="+encodeURIComponent(c))});return c+="?"+
d.join("&")}function t(a,b){function c(){e+b>d()?(clearTimeout(m),m=setTimeout(c,b)):(e=d(),a())}var m,e=0;return c}function x(a,b){var c=[];h(a||[],function(a){b(a)&&c.push(a)});return c}function B(a,b){return a.replace(Fa,function(a,c){return b[c]||a})}function y(a,b){return setTimeout(a,b)}function g(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function w(a){return!!a&&"string"!==typeof a&&
(Array.isArray&&Array.isArray(a)||"number"===typeof a.length)}function h(a,b){if(a&&b)if(w(a))for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function v(a,b){var c=[];h(a||[],function(a,d){c.push(b(a,d))});return c}function z(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function c(a){return encodeURIComponent(a)}function m(a,b){var c=[];h(a,function(a,
d){b?0>a.search("-pnpres")&&d.v&&c.push(a):d.v&&c.push(a)});return c.sort()}function a(a,b){var c=[];h(a,function(a,d){b?0>a.search("-pnpres")&&d.v&&c.push(a):d.v&&c.push(a)});return c.sort()}function b(){y(function(){wa||(wa=1,h(Ma,function(a){a()}))},1E3)}function G(f){function q(){}function p(C){C||(C={});h(Na,function(a,b){a in C||(C[a]=b)});return C}function G(C){var a=[];h(C,function(C){a.push(C)});return a}function u(C){var a="",b=G(C).sort(),c;for(c in b){var f=b[c],a=a+(f+"="+z(C[f]));c!=
b.length-1&&(a+="&")}return a}function P(C,a,b){var c=!1;if("undefined"===typeof C)return a;if("number"===typeof C)c=5<C||0==C?!1:!0;else{if("boolean"===typeof C)return C?30:0;c=!0}return c?(b&&b("Presence Heartbeat value invalid. Valid range ( x > 5 or x = 0). Current Value : "+(a||5)),a||5):C}function H(C,a){return Ga.encrypt(C,a||xa)||C}function r(C,a){return Ga.decrypt(C,a||xa)||Ga.decrypt(C,xa)||C}function da(){clearTimeout(ya);!Y||500<=Y||1>Y||!m(N,!0).length&&!a(U,!0).length?Ha=!1:(Ha=!0,J.presence_heartbeat({callback:function(){ya=
setTimeout(da,1E3*Y)},error:function(C){A&&A("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(C));ya=setTimeout(da,1E3*Y)}}))}function I(){!Ha&&da()}function ga(C){if(Ra){if(!la.length)return}else{C&&(la.sa=0);if(la.sa||!la.length)return;la.sa=1}Q(la.shift())}function T(C){var b=0;h(a(U),function(a){if(a=U[a])b++,(C||function(){})(a)})}function fa(a){var b=0;h(m(N),function(c){if(c=N[c])b++,(a||function(){})(c)});return b}function F(a,b,c){if("object"==typeof a){if(a.error){b={};
a.message&&(b.message=a.message);a.payload&&(b.payload=a.payload);c&&c(b);return}if(a.payload){a.next_page?b&&b(a.payload,a.next_page):b&&b(a.payload);return}}b&&b(a)}function K(a,b){if("object"==typeof a&&a.error){var c={};a.message&&(c.message=a.message);a.payload&&(c.payload=a.payload);b&&b(c)}else b&&b(a)}function L(a,b,c,f){b=a.callback||b;var d=a.error||A,m=R();f=f||{};f.auth||(f.auth=a.auth_key||M);a=[S,"v1","channel-registration","sub-key",E];a.push.apply(a,c);m&&(f.callback=m);Q({g:m,data:p(f),
i:function(a){F(a,b,d)},h:function(a){K(a,d)},url:a})}function X(){Sa()||ka(1,{error:"Offline. Please check your network settings. "});qa&&clearTimeout(qa);qa=setTimeout(X,1E3)}function pa(){Fa&&J.time(function(a){ca(function(){},a);a||ka(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});ra&&clearTimeout(ra);ra=setTimeout(pa,ha)})}function ka(a,b){Ca&&Ca(a,b);Ca=null;clearTimeout(qa);clearTimeout(ra)}function ca(a,b){function c(b){b&&(Ia=d()-(b/1E4+(d()-
f)/2),a&&a(Ia))}var f=d();b&&c(b)||J.time(c)}var Ba=+f.windowing||10,ja=1E3*(+f.timeout||310),ha=1E3*(+f.keepalive||60),Fa=f.timecheck||0,ia=f.noleave||0,ea=f.publish_key,E=f.subscribe_key,M=f.auth_key||"",ba=f.secret_key||"",ua=f.hmac_SHA256,za=f.ssl?"s":"",sa="http"+za+"://"+(f.origin||"pubsub.pubnub.com"),S=ta(sa),va=ta(sa),la=[],Ja=!0,Ia=0,Ka=0,Oa=0,Ca=0,Aa=f.restore||0,ma=0,La=!1,N={},U={},Z={},ya=null,V=P(f.heartbeat||f.pnexpires||0,f.error),Y=f.heartbeat_interval||V/2-1,Ha=!1,Ra=f.no_wait_for_pending,
Pa=f["compatible_3.5"]||!1,Q=f.xdr,Na=f.params||{},A=f.error||function(){},Sa=f._is_online||function(){return 1},R=f.jsonp_cb||function(){return 0},na=f.db||{get:function(){},set:function(){}},xa=f.cipher_key,O=f.uuid||!f.unique_uuid&&na&&na.get(E+"uuid")||"",aa=f.instance_id||!1,W="",Qa=f.shutdown,Da=("undefined"!=typeof f.use_send_beacon?f.use_send_beacon:1)?f.sendBeacon:null,qa,ra;2===V&&(Y=1);var Ga=f.crypto_obj||{encrypt:function(a){return a},decrypt:function(a){return a}},J={LEAVE:function(a,
b,c,f,d){c={uuid:O,auth:c||M};var m=ta(sa);f=f||function(){};var h=d||function(){};d=R();if(0<a.indexOf("-pnpres"))return!0;if(Pa&&(!za||"0"==d)||ia)return!1;"0"!=d&&(c.callback=d);aa&&(c.instanceid=W);a=[m,"v2","presence","sub_key",E,"channel",encodeURIComponent(a),"leave"];c=p(c);if(Da&&(url_string=e(a,c),Da(url_string)))return f&&f({status:200,action:"leave",message:"OK",service:"Presence"}),!0;Q({V:b||za,g:d,data:c,i:function(a){F(a,f,h)},h:function(a){K(a,h)},url:a});return!0},LEAVE_GROUP:function(a,
b,c,f,d){c={uuid:O,auth:c||M};var m=ta(sa);f=f||function(){};var h=d||function(){};d=R();if(0<a.indexOf("-pnpres"))return!0;if(Pa&&(!za||"0"==d)||ia)return!1;"0"!=d&&(c.callback=d);a&&0<a.length&&(c["channel-group"]=a);aa&&(c.instanceid=W);a=[m,"v2","presence","sub_key",E,"channel",encodeURIComponent(","),"leave"];c=p(c);if(Da&&(url_string=e(a,c),Da(url_string)))return f&&f({status:200,action:"leave",message:"OK",service:"Presence"}),!0;Q({V:b||za,g:d,data:c,i:function(a){F(a,f,h)},h:function(a){K(a,
h)},url:a});return!0},set_resumed:function(a){La=a},get_cipher_key:function(){return xa},set_cipher_key:function(a){xa=a},raw_encrypt:function(a,b){return H(a,b)},raw_decrypt:function(a,b){return r(a,b)},get_heartbeat:function(){return V},set_heartbeat:function(a,b){V=P(a,V,A);Y=b||V/2-1;2==V&&(Y=1);q();da()},get_heartbeat_interval:function(){return Y},set_heartbeat_interval:function(a){Y=a;da()},get_version:function(){return"3.7.18"},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b=
{aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm);apns&&(a.pn_apns=apns);for(k in n)a[k]=n[k];return a},_add_param:function(a,b){Na[a]=b},channel_group:function(a,b){var c=a.channel_group;b=b||a.callback;var f=a.channels||a.channel,d=a.cloak,m,h,e=[],p={},q=a.mode||"add";c&&(c=c.split(":"),1<c.length?(m="*"===c[0]?null:c[0],h=c[1]):h=c[0]);m&&e.push("namespace")&&e.push(encodeURIComponent(m));e.push("channel-group");h&&"*"!==h&&e.push(h);
f?(w(f)&&(f=f.join(",")),p[q]=f,p.cloak=Ja?"true":"false"):"remove"===q&&e.push("remove");"undefined"!=typeof d&&(p.cloak=d?"true":"false");L(a,b,e,p)},channel_group_list_groups:function(a,b){var c;(c=a.namespace||a.ns||a.channel_group||null)&&(a.channel_group=c+":*");J.channel_group(a,b)},channel_group_list_channels:function(a,b){if(!a.channel_group)return A("Missing Channel Group");J.channel_group(a,b)},channel_group_remove_channel:function(a,b){if(!a.channel_group)return A("Missing Channel Group");
if(!a.channel&&!a.channels)return A("Missing Channel");a.mode="remove";J.channel_group(a,b)},channel_group_remove_group:function(a,b){if(!a.channel_group)return A("Missing Channel Group");if(a.channel)return A("Use channel_group_remove_channel if you want to remove a channel from a group.");a.mode="remove";J.channel_group(a,b)},channel_group_add_channel:function(a,b){if(!a.channel_group)return A("Missing Channel Group");if(!a.channel&&!a.channels)return A("Missing Channel");J.channel_group(a,b)},
channel_group_cloak:function(a,b){"undefined"==typeof a.cloak?b(Ja):(Ja=a.cloak,J.channel_group(a,b))},channel_group_list_namespaces:function(a,b){L(a,b,["namespace"])},channel_group_remove_namespace:function(a,b){L(a,b,["namespace",a.namespace,"remove"])},history:function(a,b){b=a.callback||b;var c=a.count||a.limit||100,f=a.reverse||"false",d=a.error||function(){},m=a.auth_key||M,h=a.cipher_key,e=a.channel,q=a.channel_group,G=a.start,g=a.end,u=a.include_token,t=a.string_message_token||!1,l={},v=
R();if(!e&&!q)return A("Missing Channel");if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");l.stringtoken="true";l.count=c;l.reverse=f;l.auth=m;q&&(l["channel-group"]=q,e||(e=","));v&&(l.callback=v);G&&(l.start=G);g&&(l.end=g);u&&(l.include_token="true");t&&(l.string_message_token="true");Q({g:v,data:p(l),i:function(a){if("object"==typeof a&&a.error)d({message:a.message,payload:a.payload});else{for(var c=a[0],f=[],C=0;C<c.length;C++)if(u){var m=r(c[C].message,h),e=c[C].timetoken;
try{f.push({message:JSON.parse(m),timetoken:e})}catch(p){f.push({message:m,timetoken:e})}}else{m=r(c[C],h);try{f.push(JSON.parse(m))}catch(p){f.push(m)}}b([f,a[1],a[2]])}},h:function(a){K(a,d)},url:[S,"v2","history","sub-key",E,"channel",encodeURIComponent(e)]})},replay:function(a,b){b=b||a.callback||function(){};var c=a.auth_key||M,f=a.source,d=a.destination,m=a.stop,e=a.start,h=a.end,q=a.reverse,G=a.limit,l=R(),g={};if(!f)return A("Missing Source Channel");if(!d)return A("Missing Destination Channel");
if(!ea)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");"0"!=l&&(g.callback=l);m&&(g.stop="all");q&&(g.reverse="true");e&&(g.start=e);h&&(g.end=h);G&&(g.count=G);g.auth=c;Q({g:l,i:function(a){F(a,b,err)},h:function(){b([0,"Disconnected"])},url:[S,"v1","replay",ea,E,f,d],data:p(g)})},auth:function(a){M=a;q()},time:function(a){var b=R(),c={uuid:O,auth:M};aa&&(c.instanceid=W);Q({g:b,data:p(c),url:[S,"time",b],i:function(b){a(b[0])},h:function(){a(0)}})},publish:function(a,b){var c=
a.message;if(!c)return A("Missing Message");b=b||a.callback||c.callback||function(){};var f=a.channel||c.channel,d=a.auth_key||M,m=a.cipher_key,e=a.error||c.error||function(){},h=a.post||!1,q="store_in_history"in a?a.store_in_history:!0,g=R(),l="push";a.prepend&&(l="unshift");if(!f)return A("Missing Channel");if(!ea)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");c.getPubnubMessage&&(c=c.getPubnubMessage());c=JSON.stringify(H(c,m));c=[S,"publish",ea,E,0,encodeURIComponent(f),
g,encodeURIComponent(c)];d={uuid:O,auth:d};q||(d.store="0");aa&&(d.instanceid=W);la[l]({g:g,url:c,data:p(d),h:function(a){K(a,e);ga(1)},i:function(a){F(a,b,e);ga(1)},mode:h?"POST":"GET"});ga()},unsubscribe:function(a,b){var c=a.channel,f=a.channel_group,d=a.auth_key||M;b=b||a.callback||function(){};var m=a.error||function(){};ma=0;Aa=1;if(c){var e;w(c)?e=c:e=[c];c=v(e,function(a){return a+"-pnpres"});c=e.concat(c);h(c,function(a){a in N&&(N[a]=0);a in Z&&delete Z[a]});e=!0;wa&&(e=J.LEAVE(c,0,d,b,
m));e||b({action:"leave"})}if(f){var p;w(f)?p=f:p=[f];f=v(p,function(a){return a+"-pnpres"});p=p.concat(f);h(p,function(a){a in U&&(U[a]=0);a in Z&&delete Z[a]});e=!0;wa&&(e=J.LEAVE_GROUP(p,0,d,b,m));e||b({action:"leave"})}q()},subscribe:function(b,c){function f(a){a?setTimeout(q,da):(S=ta(sa,1),va=ta(sa,1),y(function(){J.time(f)},1E3));fa(function(b){if(a&&b.j)return b.j=0,b.da(b.name);a||b.j||(b.j=1,b.disconnect(b.name))});T(function(b){if(a&&b.j)return b.j=0,b.da(b.name);a||b.j||(b.j=1,b.disconnect(b.name))})}
function e(){var b=R(),c=m(N).join(","),g=a(U).join(",");if(c||g){c||(c=",");ka();var l=p({uuid:O,auth:M});g&&(l["channel-group"]=g);2<JSON.stringify(Z).length&&(l.state=JSON.stringify(Z));V&&(l.heartbeat=V);aa&&(l.instanceid=W);I();Ca=Q({timeout:ga,g:b,h:function(a){a&&a.error&&a.service?(K(a,z),f(1)):J.time(function(b){!b&&K(a,z);f(b)})},data:p(l),url:[va,"subscribe",E,encodeURIComponent(c),b,ma],i:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return z(a.error),setTimeout(q,1E3);P(a[1]);
ma=!ma&&Aa&&na.get(E)||a[1];fa(function(a){a.C||(a.C=1,a.connect(a.name))});T(function(a){a.C||(a.C=1,a.connect(a.name))});if(La&&!Aa)ma=0,La=!1,na.set(E,0);else{H&&(ma=1E4,H=0);na.set(E,a[1]);var b=function(){var b="",c="";3<a.length?(b=a[3],c=a[2]):b=2<a.length?a[2]:v(m(N),function(b){return v(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var f=b.split(","),d=c?c.split(","):[];return function(){var a=f.shift()||Oa,b=d.shift(),c={};b?(a&&0<=a.indexOf("-pnpres")&&0>b.indexOf("-pnpres")&&
(b+="-pnpres"),c=U[b]||N[b]||{callback:function(){}}):c=N[a];a=[c.g||Ka,a.split("-pnpres")[0]];b&&a.push(b.split("-pnpres")[0]);return a}}(),c=d()-Ia-+a[1]/1E4;h(a[0],function(f){var d=b();f=r(f,N[d[1]]?N[d[1]].cipher_key:null);d[0]&&d[0](f,a,d[2]||d[1],c,d[1])})}setTimeout(e,da)}})}}var g=b.channel,l=b.channel_group;c=(c=c||b.callback)||b.message;var G=b.connect||function(){},u=b.reconnect||function(){},t=b.disconnect||function(){},z=b.error||z||function(){},P=b.idle||function(){},oa=b.presence||
0,x=b.noheresync||0,H=b.backfill||0,F=b.timetoken||0,ga=b.timeout||ja,da=b.windowing||Ba,w=b.state,Ea=b.heartbeat||b.pnexpires,B=b.heartbeat_interval,L=b.restore||Aa;M=b.auth_key||M;Aa=L;ma=F;if(!g&&!l)return A("Missing Channel");if(!c)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");(Ea||0===Ea||B||0===B)&&J.set_heartbeat(Ea,B);g&&h((g.join?g.join(","):""+g).split(","),function(a){var f=N[a]||{};N[Oa=a]={name:a,C:f.C,j:f.j,v:1,g:Ka=c,cipher_key:b.cipher_key,connect:G,disconnect:t,
da:u};w&&(Z[a]=a in w?w[a]:w);oa&&(J.subscribe({channel:a+"-pnpres",callback:oa,restore:L}),f.v||x||J.here_now({channel:a,data:p({uuid:O,auth:M}),callback:function(b){h("uuids"in b?b.uuids:[],function(c){oa({action:"join",uuid:c,timestamp:Math.floor(d()/1E3),occupancy:b.occupancy||1},b,a)})}}))});l&&h((l.join?l.join(","):""+l).split(","),function(a){var f=U[a]||{};U[a]={name:a,C:f.C,j:f.j,v:1,g:Ka=c,cipher_key:b.cipher_key,connect:G,disconnect:t,da:u};oa&&(J.subscribe({channel_group:a+"-pnpres",callback:oa,
restore:L,auth_key:M}),f.v||x||J.here_now({channel_group:a,data:p({uuid:O,auth:M}),callback:function(b){h("uuids"in b?b.uuids:[],function(c){oa({action:"join",uuid:c,timestamp:Math.floor(d()/1E3),occupancy:b.occupancy||1},b,a)})}}))});q=function(){ka();setTimeout(e,da)};if(!wa)return Ma.push(q);q()},here_now:function(a,b){b=a.callback||b;var c=a.debug,f=a.error||function(){},d=a.auth_key||M,e=a.channel,m=a.channel_group,h=R(),g=a.state,d={uuid:O,auth:d};("uuids"in a?a.uuids:1)||(d.disable_uuids=1);
g&&(d.state=1);if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");g=[S,"v2","presence","sub_key",E];e&&g.push("channel")&&g.push(encodeURIComponent(e));"0"!=h&&(d.callback=h);m&&(d["channel-group"]=m,!e&&g.push("channel")&&g.push(","));aa&&(d.instanceid=W);Q({g:h,data:p(d),i:function(a){F(a,b,f)},h:function(a){K(a,f)},debug:c,url:g})},where_now:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.auth_key||M,d=R(),e=a.uuid||O,f={auth:f};if(!b)return A("Missing Callback");
if(!E)return A("Missing Subscribe Key");"0"!=d&&(f.callback=d);aa&&(f.instanceid=W);Q({g:d,data:p(f),i:function(a){F(a,b,c)},h:function(a){K(a,c)},url:[S,"v2","presence","sub_key",E,"uuid",encodeURIComponent(e)]})},state:function(a,b){b=a.callback||b||function(){};var c=a.error||function(){},f=a.auth_key||M,d=R(),e=a.state,m=a.uuid||O,h=a.channel,g=a.channel_group,f=p({auth:f});if(!E)return A("Missing Subscribe Key");if(!m)return A("Missing UUID");if(!h&&!g)return A("Missing Channel");"0"!=d&&(f.callback=
d);"undefined"!=typeof h&&N[h]&&N[h].v&&e&&(Z[h]=e);"undefined"!=typeof g&&U[g]&&U[g].v&&(e&&(Z[g]=e),f["channel-group"]=g,h||(h=","));f.state=JSON.stringify(e);aa&&(f.instanceid=W);e=e?[S,"v2","presence","sub-key",E,"channel",h,"uuid",m,"data"]:[S,"v2","presence","sub-key",E,"channel",h,"uuid",encodeURIComponent(m)];Q({g:d,data:p(f),i:function(a){F(a,b,c)},h:function(a){K(a,c)},url:e})},grant:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.channel||a.channels,d=a.channel_group,e=R(),
m=a.ttl,h=a.read?"1":"0",g=a.write?"1":"0",l=a.manage?"1":"0",q=a.auth_key||a.auth_keys;if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");if(!ea)return A("Missing Publish Key");if(!ba)return A("Missing Secret Key");var G=E+"\n"+ea+"\ngrant\n",h={w:g,r:h,timestamp:Math.floor((new Date).getTime()/1E3)};a.manage&&(h.m=l);w(f)&&(f=f.join(","));w(q)&&(q=q.join(","));"undefined"!=typeof f&&null!=f&&0<f.length&&(h.channel=f);"undefined"!=typeof d&&null!=d&&0<d.length&&(h["channel-group"]=
d);"0"!=e&&(h.callback=e);if(m||0===m)h.ttl=m;q&&(h.auth=q);h=p(h);q||delete h.auth;G+=u(h);f=ua(G,ba);f=f.replace(/\+/g,"-");f=f.replace(/\//g,"_");h.signature=f;Q({g:e,data:h,i:function(a){F(a,b,c)},h:function(a){K(a,c)},url:[S,"v1","auth","grant","sub-key",E]})},mobile_gw_provision:function(a){var b=a.callback||function(){},c=a.auth_key||M,f=a.error||function(){},d=R(),e=a.channel,h=a.op,m=a.gw_type;a=a.device_id;if(!a)return A("Missing Device ID (device_id)");if(!m)return A("Missing GW Type (gw_type: gcm or apns)");
if(!h)return A("Missing GW Operation (op: add or remove)");if(!e)return A("Missing gw destination Channel (channel)");if(!ea)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");a=[S,"v1/push/sub-key",E,"devices",a];c={uuid:O,auth:c,type:m};"add"==h?c.add=e:"remove"==h&&(c.remove=e);aa&&(data.instanceid=W);Q({g:d,data:c,i:function(a){F(a,b,f)},h:function(a){K(a,f)},url:a})},audit:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.channel,d=a.channel_group,e=a.auth_key,
h=R();if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");if(!ea)return A("Missing Publish Key");if(!ba)return A("Missing Secret Key");var m=E+"\n"+ea+"\naudit\n",g={timestamp:Math.floor((new Date).getTime()/1E3)};"0"!=h&&(g.callback=h);"undefined"!=typeof f&&null!=f&&0<f.length&&(g.channel=f);"undefined"!=typeof d&&null!=d&&0<d.length&&(g["channel-group"]=d);e&&(g.auth=e);g=p(g);e||delete g.auth;m+=u(g);f=ua(m,ba);f=f.replace(/\+/g,"-");f=f.replace(/\//g,"_");g.signature=f;
Q({g:h,data:g,i:function(a){F(a,b,c)},h:function(a){K(a,c)},url:[S,"v1","auth","audit","sub-key",E]})},revoke:function(a,b){a.read=!1;a.write=!1;J.grant(a,b)},set_uuid:function(a){O=a;q()},get_uuid:function(){return O},isArray:function(a){return w(a)},get_subscibed_channels:function(){return m(N,!0)},presence_heartbeat:function(b){var f=b.callback||function(){},d=b.error||function(){};b=R();var e={uuid:O,auth:M};2<JSON.stringify(Z).length&&(e.state=JSON.stringify(Z));0<V&&320>V&&(e.heartbeat=V);"0"!=
b&&(e.callback=b);var h=c(m(N,!0).join(",")),g=a(U,!0).join(",");h||(h=",");g&&(e["channel-group"]=g);aa&&(e.instanceid=W);Q({g:b,data:p(e),url:[S,"v2","presence","sub-key",E,"channel",h,"heartbeat"],i:function(a){F(a,f,d)},h:function(a){K(a,d)}})},stop_timers:function(){clearTimeout(qa);clearTimeout(ra);clearTimeout(ya)},shutdown:function(){J.stop_timers();Qa&&Qa()},xdr:Q,ready:b,db:na,uuid:g,map:v,each:h,"each-channel":fa,grep:x,offline:function(){ka(1,{message:"Offline. Please check your network settings."})},
supplant:B,now:d,unique:l,updater:t};O||(O=J.uuid());W||(W=J.uuid());na.set(E+"uuid",O);qa=setTimeout(X,1E3);ra=setTimeout(pa,ha);ya=setTimeout(I,1E3*(Y-3));ca();return J}function P(){function a(b){b=b||{};b.hasOwnProperty("encryptKey")||(b.encryptKey=m.encryptKey);b.hasOwnProperty("keyEncoding")||(b.keyEncoding=m.keyEncoding);b.hasOwnProperty("keyLength")||(b.keyLength=m.keyLength);b.hasOwnProperty("mode")||(b.mode=m.mode);-1==d.indexOf(b.keyEncoding.toLowerCase())&&(b.keyEncoding=m.keyEncoding);
-1==e.indexOf(parseInt(b.keyLength,10))&&(b.keyLength=m.keyLength);-1==h.indexOf(b.mode.toLowerCase())&&(b.mode=m.mode);return b}function b(a,c){var f=a;a="base64"==c.keyEncoding?D.enc.Base64.parse(f):"hex"==c.keyEncoding?D.enc.Hex.parse(f):f;return c.encryptKey?D.enc.Utf8.parse(D.SHA256(a).toString(D.enc.Hex).slice(0,32)):a}function c(a){return"ecb"==a.mode?D.mode.ECB:D.mode.CBC}function f(a){return"cbc"==a.mode?D.enc.Utf8.parse("0123456789012345"):null}var d=["hex","utf8","base64","binary"],e=[128,
256],h=["ecb","cbc"],m={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(d,e,h){if(!e)return d;h=a(h);var m=f(h),g=c(h);e=b(e,h);h=JSON.stringify(d);return D.AES.encrypt(h,e,{iv:m,mode:g}).ciphertext.toString(D.enc.Base64)||d},decrypt:function(d,e,h){if(!e)return d;h=a(h);var m=f(h),g=c(h);e=b(e,h);try{var p=D.enc.Base64.parse(d),q=D.AES.decrypt({ciphertext:p},e,{iv:m,mode:g}).toString(D.enc.Utf8);return JSON.parse(q)}catch(l){}}}}function fa(a,b){return D.HmacSHA256(a,
b).toString(D.enc.Base64)}function I(a){return document.getElementById(a)}function pa(a){console.error(a)}function ga(a,b){var c=[];h(a.split(/\s+/),function(a){h((b||document).getElementsByTagName(a),function(a){c.push(a)})});return c}function T(a,b,c){h(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,!1):b.attachEvent?b.attachEvent("on"+a,f):
b["on"+a]=f})}function H(){return ga("head")[0]}function L(a,b,c){if(c)a.setAttribute(b,c);else return a&&a.getAttribute&&a.getAttribute(b)}function F(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+(0<"|width|height|top|left|".indexOf(c)&&"number"==typeof b[c]?"px":"")}catch(f){}}function K(a){return document.createElement(a)}function ca(){return ja||X()?0:l()}function f(a){function b(a,f){h||(h=1,c.onerror=null,clearTimeout(m),a||!f||q(f),y(function(){a&&g();var b=I(d),c=b&&b.parentNode;
c&&c.removeChild(b)},1E3))}if(ja||X())return u(a);var c=K("script"),f=a.g,d=l(),h=0,m=y(function(){b(1,{message:"timeout"})},a.timeout||15E3),g=a.h||function(){},p=a.data||{},q=a.i||function(){};window[f]=function(a){b(0,a)};a.V||(c.async="async");c.onerror=function(){b(1)};c.src=e(a.url,p);L(c,"id",d);H().appendChild(c);return b}function u(a){function b(a,c){m||(m=1,clearTimeout(q),d&&(d.onerror=d.onload=null,d.abort&&d.abort(),d=null),a&&l(c))}function c(){if(!g){g=1;clearTimeout(q);try{h=JSON.parse(d.responseText)}catch(a){return b(1)}m=
1;u(h)}}var d,h,m=0,g=0,p=a.timeout||15E3,q=y(function(){b(1,{message:"timeout"})},p),l=a.h||function(){},G=a.data||{},u=a.i||function(){},t=!a.V;try{d=X()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(a){b(1,a||d&&d.responseText||{error:"Network Connection Error"})};d.onload=d.onloadend=c;d.onreadystatechange=function(){if(d&&4==d.readyState)switch(d.status){case 200:break;default:try{h=JSON.parse(d.responseText),b(1,h)}catch(a){return b(1,{status:d.status,
ib:null,message:d.responseText})}}};var v=e(a.url,G);d.open("GET",v,t);t&&(d.timeout=p);d.send()}catch(z){return b(0),ja=0,f(a)}return b}function q(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(a){return!0}}function p(a){return"sendBeacon"in navigator?navigator.sendBeacon(a):!1}function X(){if(!ua||!ua.get)return 0;var a={id:X.id++,send:function(){},abort:function(){a.id={}},open:function(b,c){X[a.id]=a;ua.get(a.id,c)}};return a}var ka=1,wa=!1,Ma=[],Fa=/{([\w\-]+)}/g,ta=
function(){var a=Math.floor(20*Math.random());return function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?g().split("-")[0]:20>++a?a:a=1))||b}}(),Ba=navigator.userAgent,ja=-1==Ba.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var va=function(){function a(b,c){document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}function b(a){return-1==document.cookie.indexOf(a)?
null:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||null}var c={},f=!1;try{f=window.localStorage}catch(d){}var e;try{a("pnctest","1"),e="1"===b("pnctest")}catch(d){e=!1}return{get:function(a){try{return f?f.getItem(a):e?b(a):c[a]}catch(d){return c[a]}},set:function(b,d){try{if(f)return f.setItem(b,d)&&0;e&&a(b,d);c[b]=d}catch(h){c[b]=d}}}}(),ha={list:{},unbind:function(a){ha.list[a]=[]},bind:function(a,b){(ha.list[a]=ha.list[a]||[]).push(b)},fire:function(a,b){h(ha.list[a]||[],function(a){a(b)})}},
ia=I("pubnub")||0;r.init=r;r.secure=r;r.crypto_obj=P();"complete"===document.readyState?setTimeout(b,0):T("load",window,function(){setTimeout(b,0)});var ba=ia||{};PUBNUB=r({notest:1,publish_key:L(ba,"pub-key"),subscribe_key:L(ba,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==L(ba,"ssl"),origin:L(ba,"origin"),uuid:L(ba,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=r);"undefined"!==typeof module&&(module.exports=PUBNUB)&&b();var ua=I("pubnubs")||0;if(ia){F(ia,{position:"absolute",top:-1E3});
if("opera"in window||L(ia,"flash"))ia.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(a,b){if(!b)return X[a].onerror();X[a].responseText=unescape(b);X[a].onload()};X.id=1E3}}();
(function(){var r=PUBNUB.ws=function(l,d){if(!(this instanceof r))return new r(l,d);var e=this;l=e.url=l||"";e.protocol=d||"Sec-WebSocket-Protocol";var t=l.split("/"),t={ssl:"wss:"===t[0],origin:t[2],publish_key:t[3],subscribe_key:t[4],channel:t[5]};e.CONNECTING=0;e.OPEN=1;e.CLOSING=2;e.CLOSED=3;e.CLOSE_NORMAL=1E3;e.CLOSE_GOING_AWAY=1001;e.CLOSE_PROTOCOL_ERROR=1002;e.CLOSE_UNSUPPORTED=1003;e.CLOSE_TOO_LARGE=1004;e.CLOSE_NO_STATUS=1005;e.CLOSE_ABNORMAL=1006;e.onclose=e.onerror=e.onmessage=e.onopen=
e.onsend=function(){};e.binaryType="";e.extensions="";e.bufferedAmount=0;e.trasnmitting=!1;e.buffer=[];e.readyState=e.CONNECTING;if(!l)return e.readyState=e.CLOSED,e.onclose({code:e.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),e;e.P=PUBNUB.init(t);e.P.za=t;e.za=t;e.P.subscribe({restore:!1,channel:t.channel,disconnect:e.onerror,reconnect:e.onopen,error:function(){e.onclose({code:e.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(d){e.onmessage({data:d})},connect:function(){e.readyState=
e.OPEN;e.onopen()}})};r.prototype.send=function(l){var d=this;d.P.publish({channel:d.P.za.channel,message:l,callback:function(e){d.onsend({data:e})}})}})();
var D=D||function(r,l){function d(){}var e={},t=e.u={},x=t.R={extend:function(c){d.prototype=this;var e=new d;c&&e.ca(c);e.hasOwnProperty("init")||(e.b=function(){e.Aa.b.apply(this,arguments)});e.b.prototype=e;e.Aa=this;return e},create:function(){var c=this.extend();c.b.apply(c,arguments);return c},b:function(){},ca:function(c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.b.prototype.extend(this)}},B=t.H=
x.extend({b:function(c,d){c=this.c=c||[];this.a=d!=l?d:4*c.length},toString:function(c){return(c||g).stringify(this)},concat:function(c){var d=this.c,a=c.c,b=this.a;c=c.a;this.X();if(b%4)for(var e=0;e<c;e++)d[b+e>>>2]|=(a[e>>>2]>>>24-e%4*8&255)<<24-(b+e)%4*8;else if(65535<a.length)for(e=0;e<c;e+=4)d[b+e>>>2]=a[e>>>2];else d.push.apply(d,a);this.a+=c;return this},X:function(){var c=this.c,d=this.a;c[d>>>2]&=4294967295<<32-d%4*8;c.length=r.ceil(d/4)},clone:function(){var c=x.clone.call(this);c.c=this.c.slice(0);
return c},random:function(c){for(var d=[],a=0;a<c;a+=4)d.push(4294967296*r.random()|0);return new B.b(d,c)}}),y=e.aa={},g=y.$a={stringify:function(c){var d=c.c;c=c.a;for(var a=[],b=0;b<c;b++){var e=d[b>>>2]>>>24-b%4*8&255;a.push((e>>>4).toString(16));a.push((e&15).toString(16))}return a.join("")},parse:function(c){for(var d=c.length,a=[],b=0;b<d;b+=2)a[b>>>3]|=parseInt(c.substr(b,2),16)<<24-b%8*4;return new B.b(a,d/2)}},w=y.cb={stringify:function(c){var d=c.c;c=c.a;for(var a=[],b=0;b<c;b++)a.push(String.fromCharCode(d[b>>>
2]>>>24-b%4*8&255));return a.join("")},parse:function(c){for(var d=c.length,a=[],b=0;b<d;b++)a[b>>>2]|=(c.charCodeAt(b)&255)<<24-b%4*8;return new B.b(a,d)}},h=y.Ka={stringify:function(c){try{return decodeURIComponent(escape(w.stringify(c)))}catch(d){throw Error("Malformed UTF-8 data");}},parse:function(c){return w.parse(unescape(encodeURIComponent(c)))}},v=t.Fa=x.extend({reset:function(){this.A=new B.b;this.N=0},J:function(c){"string"==typeof c&&(c=h.parse(c));this.A.concat(c);this.N+=c.a},B:function(c){var d=
this.A,a=d.c,b=d.a,e=this.s,h=b/(4*e),h=c?r.ceil(h):r.max((h|0)-this.oa,0);c=h*e;b=r.min(4*c,b);if(c){for(var g=0;g<c;g+=e)this.T(a,g);g=a.splice(0,c);d.a-=b}return new B.b(g,b)},clone:function(){var c=x.clone.call(this);c.A=this.A.clone();return c},oa:0});t.ia=v.extend({f:x.extend(),b:function(c){this.f=this.f.extend(c);this.reset()},reset:function(){v.reset.call(this);this.M()},update:function(c){this.J(c);this.B();return this},l:function(c){c&&this.J(c);return this.I()},s:16,L:function(c){return function(d,
a){return(new c.b(a)).l(d)}},ka:function(c){return function(d,a){return(new z.Ha.b(c,a)).l(d)}}});var z=e.F={};return e}(Math);
(function(r){function l(c){return 4294967296*(c-(c|0))|0}for(var d=D.u,e=d.H,t=d.ia,d=D.F,x=[],B=[],y=2,g=0;64>g;){var w;a:{w=y;for(var h=r.sqrt(w),v=2;v<=h;v++)if(!(w%v)){w=!1;break a}w=!0}w&&(8>g&&(x[g]=l(r.pow(y,.5))),B[g]=l(r.pow(y,1/3)),g++);y++}var z=[],d=d.Ja=t.extend({M:function(){this.o=new e.b(x.slice(0))},T:function(c,d){for(var a=this.o.c,b=a[0],e=a[1],h=a[2],g=a[3],l=a[4],t=a[5],v=a[6],x=a[7],H=0;64>H;H++){if(16>H)z[H]=c[d+H]|0;else{var r=z[H-15],F=z[H-2];z[H]=((r<<25|r>>>7)^(r<<14|r>>>
18)^r>>>3)+z[H-7]+((F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10)+z[H-16]}r=x+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&t^~l&v)+B[H]+z[H];F=((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+(b&e^b&h^e&h);x=v;v=t;t=l;l=g+r|0;g=h;h=e;e=b;b=r+F|0}a[0]=a[0]+b|0;a[1]=a[1]+e|0;a[2]=a[2]+h|0;a[3]=a[3]+g|0;a[4]=a[4]+l|0;a[5]=a[5]+t|0;a[6]=a[6]+v|0;a[7]=a[7]+x|0},I:function(){var c=this.A,d=c.c,a=8*this.N,b=8*c.a;d[b>>>5]|=128<<24-b%32;d[(b+64>>>9<<4)+14]=r.floor(a/4294967296);d[(b+64>>>9<<4)+15]=a;c.a=4*d.length;
this.B();return this.o},clone:function(){var c=t.clone.call(this);c.o=this.o.clone();return c}});D.Ja=t.L(d);D.bb=t.ka(d)})(Math);
(function(){var r=D.aa.Ka;D.F.Ha=D.u.R.extend({b:function(l,d){l=this.U=new l.b;"string"==typeof d&&(d=r.parse(d));var e=l.s,t=4*e;d.a>t&&(d=l.l(d));d.X();for(var x=this.Sa=d.clone(),B=this.Ma=d.clone(),y=x.c,g=B.c,w=0;w<e;w++)y[w]^=1549556828,g[w]^=909522486;x.a=B.a=t;this.reset()},reset:function(){var l=this.U;l.reset();l.update(this.Ma)},update:function(l){this.U.update(l);return this},l:function(l){var d=this.U;l=d.l(l);d.reset();return d.l(this.Sa.clone().concat(l))}})})();
(function(){var r=D.u.H;D.aa.Ca={stringify:function(l){var d=l.c,e=l.a,t=this.na;l.X();l=[];for(var r=0;r<e;r+=3)for(var B=(d[r>>>2]>>>24-r%4*8&255)<<16|(d[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|d[r+2>>>2]>>>24-(r+2)%4*8&255,y=0;4>y&&r+.75*y<e;y++)l.push(t.charAt(B>>>6*(3-y)&63));if(d=t.charAt(64))for(;l.length%4;)l.push(d);return l.join("")},parse:function(l){var d=l.length,e=this.na,t=e.charAt(64);t&&(t=l.indexOf(t),-1!=t&&(d=t));for(var t=[],x=0,B=0;B<d;B++)B%4&&(t[x>>>2]|=(e.indexOf(l.charAt(B-1))<<
B%4*2|e.indexOf(l.charAt(B))>>>6-B%4*2)<<24-x%4*8,x++);return r.create(t,x)},na:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
(function(r){function l(d,e,g,c,l,a,b){d=d+(e&g|~e&c)+l+b;return(d<<a|d>>>32-a)+e}function d(d,e,g,c,l,a,b){d=d+(e&c|g&~c)+l+b;return(d<<a|d>>>32-a)+e}function e(d,e,g,c,l,a,b){d=d+(e^g^c)+l+b;return(d<<a|d>>>32-a)+e}function t(d,e,g,c,l,a,b){d=d+(g^(e|~c))+l+b;return(d<<a|d>>>32-a)+e}for(var x=D.u,B=x.H,y=x.ia,x=D.F,g=[],w=0;64>w;w++)g[w]=4294967296*r.abs(r.sin(w+1))|0;x=x.ja=y.extend({M:function(){this.o=new B.b([1732584193,4023233417,2562383102,271733878])},T:function(h,v){for(var r=0;16>r;r++){var c=
v+r,m=h[c];h[c]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var r=this.o.c,c=h[v+0],m=h[v+1],a=h[v+2],b=h[v+3],G=h[v+4],P=h[v+5],x=h[v+6],w=h[v+7],y=h[v+8],B=h[v+9],T=h[v+10],H=h[v+11],L=h[v+12],F=h[v+13],K=h[v+14],ca=h[v+15],f=r[0],u=r[1],q=r[2],p=r[3],f=l(f,u,q,p,c,7,g[0]),p=l(p,f,u,q,m,12,g[1]),q=l(q,p,f,u,a,17,g[2]),u=l(u,q,p,f,b,22,g[3]),f=l(f,u,q,p,G,7,g[4]),p=l(p,f,u,q,P,12,g[5]),q=l(q,p,f,u,x,17,g[6]),u=l(u,q,p,f,w,22,g[7]),f=l(f,u,q,p,y,7,g[8]),p=l(p,f,u,q,B,12,g[9]),q=l(q,p,f,u,T,17,
g[10]),u=l(u,q,p,f,H,22,g[11]),f=l(f,u,q,p,L,7,g[12]),p=l(p,f,u,q,F,12,g[13]),q=l(q,p,f,u,K,17,g[14]),u=l(u,q,p,f,ca,22,g[15]),f=d(f,u,q,p,m,5,g[16]),p=d(p,f,u,q,x,9,g[17]),q=d(q,p,f,u,H,14,g[18]),u=d(u,q,p,f,c,20,g[19]),f=d(f,u,q,p,P,5,g[20]),p=d(p,f,u,q,T,9,g[21]),q=d(q,p,f,u,ca,14,g[22]),u=d(u,q,p,f,G,20,g[23]),f=d(f,u,q,p,B,5,g[24]),p=d(p,f,u,q,K,9,g[25]),q=d(q,p,f,u,b,14,g[26]),u=d(u,q,p,f,y,20,g[27]),f=d(f,u,q,p,F,5,g[28]),p=d(p,f,u,q,a,9,g[29]),q=d(q,p,f,u,w,14,g[30]),u=d(u,q,p,f,L,20,g[31]),
f=e(f,u,q,p,P,4,g[32]),p=e(p,f,u,q,y,11,g[33]),q=e(q,p,f,u,H,16,g[34]),u=e(u,q,p,f,K,23,g[35]),f=e(f,u,q,p,m,4,g[36]),p=e(p,f,u,q,G,11,g[37]),q=e(q,p,f,u,w,16,g[38]),u=e(u,q,p,f,T,23,g[39]),f=e(f,u,q,p,F,4,g[40]),p=e(p,f,u,q,c,11,g[41]),q=e(q,p,f,u,b,16,g[42]),u=e(u,q,p,f,x,23,g[43]),f=e(f,u,q,p,B,4,g[44]),p=e(p,f,u,q,L,11,g[45]),q=e(q,p,f,u,ca,16,g[46]),u=e(u,q,p,f,a,23,g[47]),f=t(f,u,q,p,c,6,g[48]),p=t(p,f,u,q,w,10,g[49]),q=t(q,p,f,u,K,15,g[50]),u=t(u,q,p,f,P,21,g[51]),f=t(f,u,q,p,L,6,g[52]),p=
t(p,f,u,q,b,10,g[53]),q=t(q,p,f,u,T,15,g[54]),u=t(u,q,p,f,m,21,g[55]),f=t(f,u,q,p,y,6,g[56]),p=t(p,f,u,q,ca,10,g[57]),q=t(q,p,f,u,x,15,g[58]),u=t(u,q,p,f,F,21,g[59]),f=t(f,u,q,p,G,6,g[60]),p=t(p,f,u,q,H,10,g[61]),q=t(q,p,f,u,a,15,g[62]),u=t(u,q,p,f,B,21,g[63]);r[0]=r[0]+f|0;r[1]=r[1]+u|0;r[2]=r[2]+q|0;r[3]=r[3]+p|0},I:function(){var d=this.A,e=d.c,g=8*this.N,c=8*d.a;e[c>>>5]|=128<<24-c%32;var l=r.floor(g/4294967296);e[(c+64>>>9<<4)+15]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;e[(c+64>>>9<<
4)+14]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;d.a=4*(e.length+1);this.B();d=this.o;e=d.c;for(g=0;4>g;g++)c=e[g],e[g]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return d},clone:function(){var d=y.clone.call(this);d.o=this.o.clone();return d}});D.ja=y.L(x);D.ab=y.ka(x)})(Math);
(function(){var r=D.u,l=r.R,d=r.H,r=D.F,e=r.ha=l.extend({f:l.extend({G:4,Ua:r.ja,Va:1}),b:function(d){this.f=this.f.extend(d)},ta:function(e,l){for(var r=this.f,y=r.Ua.create(),g=d.create(),w=g.c,h=r.G,r=r.Va;w.length<h;){v&&y.update(v);var v=y.update(e).l(l);y.reset();for(var z=1;z<r;z++)v=y.l(v),y.reset();g.concat(v)}g.a=4*h;return g}});D.ha=function(d,l,r){return e.create(r).ta(d,l)}})();
D.u.Ga||function(r){function l(a,b,c){var d=this.ma;d?this.ma=r:d=this.qa;for(var e=0;e<c;e++)a[b+e]^=d[e]}var d=D,e=d.u,t=e.R,x=e.H,B=e.Fa,y=d.aa.Ca,g=d.F.ha,w=e.Ga=B.extend({f:t.extend(),Z:function(a,b){return this.create(this.S,a,b)},Y:function(a,b){return this.create(this.La,a,b)},b:function(a,b,c){this.f=this.f.extend(c);this.ra=a;this.Oa=b;this.reset()},reset:function(){B.reset.call(this);this.M()},jb:function(a){this.J(a);return this.B()},l:function(a){a&&this.J(a);return this.I()},G:4,xa:4,
S:1,La:2,L:function(a){return{encrypt:function(b,d,e){return("string"==typeof d?m:c).encrypt(a,b,d,e)},decrypt:function(b,d,e){return("string"==typeof d?m:c).decrypt(a,b,d,e)}}}});e.hb=w.extend({I:function(){return this.B(!0)},s:1});var h=d.mode={},v=(e.Ea=t.extend({Z:function(a,b){return this.ga.create(a,b)},Y:function(a,b){return this.fa.create(a,b)},b:function(a,b){this.K=a;this.ma=b}})).extend();v.ga=v.extend({O:function(a,b){var c=this.K,d=c.s;l.call(this,a,b,d);c.va(a,b);this.qa=a.slice(b,b+
d)}});v.fa=v.extend({O:function(a,b){var c=this.K,d=c.s,e=a.slice(b,b+d);c.ua(a,b);l.call(this,a,b,d);this.qa=e}});h=h.Xa=v;v=(d.ya={}).fb={ya:function(a,b){for(var c=4*b,c=c-a.a%c,d=c<<24|c<<16|c<<8|c,e=[],g=0;g<c;g+=4)e.push(d);c=x.create(e,c);a.concat(c)},Wa:function(a){a.a-=a.c[a.a-1>>>2]&255}};e.Da=w.extend({f:w.f.extend({mode:h,padding:v}),reset:function(){w.reset.call(this);var a=this.f,b=a.D,a=a.mode;if(this.ra==this.S)var c=a.Z;else c=a.Y,this.oa=1;this.Qa=c.call(a,this,b&&b.c)},T:function(a,
b){this.Qa.O(a,b)},I:function(){var a=this.f.padding;if(this.ra==this.S){a.ya(this.A,this.s);var b=this.B(!0)}else b=this.B(!0),a.Wa(b);return b},s:4});var z=e.Ya=t.extend({b:function(a){this.ca(a)},toString:function(a){return(a||this.Ta).stringify(this)}}),h=(d.format={}).Ia={stringify:function(a){var b=a.W;a=a.ea;return(a?x.create([1398893684,1701076831]).concat(a).concat(b):b).toString(y)},parse:function(a){a=y.parse(a);var b=a.c;if(1398893684==b[0]&&1701076831==b[1]){var c=x.create(b.slice(2,
4));b.splice(0,4);a.a-=16}return z.create({W:a,ea:c})}},c=e.gb=t.extend({f:t.extend({format:h}),encrypt:function(a,b,c,d){d=this.f.extend(d);var e=a.Z(c,d);b=e.l(b);e=e.f;return z.create({W:b,key:c,D:e.D,algorithm:a,mode:e.mode,padding:e.padding,s:a.s,Ta:d.format})},decrypt:function(a,b,c,d){d=this.f.extend(d);b=this.pa(b,d.format);return a.Y(c,d).l(b.W)},pa:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),d=(d.ba={}).Ia={wa:function(a,b,c,d){d||(d=x.random(8));a=g.create({G:b+c}).ta(a,
d);c=x.create(a.c.slice(b),4*c);a.a=4*b;return z.create({key:a,D:c,ea:d})}},m=e.eb=c.extend({f:c.f.extend({ba:d}),encrypt:function(a,b,d,e){e=this.f.extend(e);d=e.ba.wa(d,a.G,a.xa);e.D=d.D;a=c.encrypt.call(this,a,b,d.key,e);a.ca(d);return a},decrypt:function(a,b,d,e){e=this.f.extend(e);b=this.pa(b,e.format);d=e.ba.wa(d,a.G,a.xa,b.ea);e.D=d.D;return c.decrypt.call(this,a,b,d.key,e)}})}();
(function(){for(var r=D.u.Da,l=D.F,d=[],e=[],t=[],x=[],B=[],y=[],g=[],w=[],h=[],v=[],z=[],c=0;256>c;c++)z[c]=128>c?c<<1:c<<1^283;for(var m=0,a=0,c=0;256>c;c++){var b=a^a<<1^a<<2^a<<3^a<<4,b=b>>>8^b&255^99;d[m]=b;e[b]=m;var G=z[m],P=z[G],fa=z[P],I=257*z[b]^16843008*b;t[m]=I<<24|I>>>8;x[m]=I<<16|I>>>16;B[m]=I<<8|I>>>24;y[m]=I;I=16843009*fa^65537*P^257*G^16843008*m;g[b]=I<<24|I>>>8;w[b]=I<<16|I>>>16;h[b]=I<<8|I>>>24;v[b]=I;m?(m=G^z[z[z[fa^G]]],a^=z[z[a]]):m=a=1}var pa=[0,1,2,4,8,16,32,64,128,27,54],
l=l.Ba=r.extend({M:function(){for(var a=this.Oa,b=a.c,c=a.a/4,a=4*((this.Ra=c+6)+1),e=this.Pa=[],l=0;l<a;l++)if(l<c)e[l]=b[l];else{var m=e[l-1];l%c?6<c&&4==l%c&&(m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[m&255]):(m=m<<8|m>>>24,m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[m&255],m^=pa[l/c|0]<<24);e[l]=e[l-c]^m}b=this.Na=[];for(c=0;c<a;c++)l=a-c,m=c%4?e[l]:e[l-4],b[c]=4>c||4>=l?m:g[d[m>>>24]]^w[d[m>>>16&255]]^h[d[m>>>8&255]]^v[d[m&255]]},va:function(a,b){this.la(a,b,this.Pa,t,x,B,y,
d)},ua:function(a,b){var c=a[b+1];a[b+1]=a[b+3];a[b+3]=c;this.la(a,b,this.Na,g,w,h,v,e);c=a[b+1];a[b+1]=a[b+3];a[b+3]=c},la:function(a,b,c,d,e,g,h,f){for(var l=this.Ra,m=a[b]^c[0],p=a[b+1]^c[1],r=a[b+2]^c[2],t=a[b+3]^c[3],v=4,x=1;x<l;x++)var w=d[m>>>24]^e[p>>>16&255]^g[r>>>8&255]^h[t&255]^c[v++],y=d[p>>>24]^e[r>>>16&255]^g[t>>>8&255]^h[m&255]^c[v++],z=d[r>>>24]^e[t>>>16&255]^g[m>>>8&255]^h[p&255]^c[v++],t=d[t>>>24]^e[m>>>16&255]^g[p>>>8&255]^h[r&255]^c[v++],m=w,p=y,r=z;w=(f[m>>>24]<<24|f[p>>>16&255]<<
16|f[r>>>8&255]<<8|f[t&255])^c[v++];y=(f[p>>>24]<<24|f[r>>>16&255]<<16|f[t>>>8&255]<<8|f[m&255])^c[v++];z=(f[r>>>24]<<24|f[t>>>16&255]<<16|f[m>>>8&255]<<8|f[p&255])^c[v++];t=(f[t>>>24]<<24|f[m>>>16&255]<<16|f[p>>>8&255]<<8|f[r&255])^c[v++];a[b]=w;a[b+1]=y;a[b+2]=z;a[b+3]=t},G:8});D.Ba=r.L(l)})();D.mode.Za=function(){var r=D.u.Ea.extend();r.ga=r.extend({O:function(l,d){this.K.va(l,d)}});r.fa=r.extend({O:function(l,d){this.K.ua(l,d)}});return r}();
})();
(function(){function q(b){c.each(d,function(a){if(a in h&&b in h[a]){var e=h[a][b];e.connected&&(e.connected=!1,e.socket.user_count--,c.events.fire(a+"leave",e))}})}function l(b,a,e,g,m){var d=k(a);c.publish({channel:d.channel,message:{name:b,ns:a,data:e,uuid:n,geo:d.location||[0,0]},callback:function(c){if(c[0])return(m||function(){})(c);var d=2*(g||500);setTimeout(function(){l(b,a,e,d,m)},5500<d?5500:d)}})}function p(b,a){var e=[];PUBNUB.each(b||[],function(b){a(b)&&e.push(b)});return e}function x(b,
a,e){var g=k(b);a.channel=g.channel;c.history(a,function(a){a[0]=p(a[0],function(a){return"message"==a.name&&a.ns==b});e(a)})}function u(b){b=b||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){socket.location=[a.coords.latitude,a.coords.longitude];b(socket.location)})||b([0,0])}function k(b){var a=d[b]||function(){return d[b]={namespace:b,connected:!1,users:h[b]={},user_count:1,get_user_list:function(){return d[b].users},get_user_count:function(){return d[b].user_count},
emit:function(a,c,d){l(a,b,c,0,d)},send:function(a,c){l("message",b,a,0,c)},on:function(a,d){"string"===typeof a?c.events.bind(b+a,d):"object"===typeof a&&c.each(a,function(a){c.events.bind(b+a,d)})},disconnect:function(){c.unsubscribe({channel:a.channel})},history:function(a,c){x(b,a,c)},here_now:function(a){var d=k(b);c.here_now({channel:d.channel},a)}}}();return a}var c=PUBNUB,v=0,n=PUBNUB.db.get("uuid")||c.uuid(function(b){PUBNUB.db.set("uuid",n=b)}),d={},h={},w=window.io={connected:{},connect:function(b,
a){function e(){var a=c.map(d,function(a){return a});l("ping",t,{nss:a,cuser:m})}var g=(b+"////").split("/");a=a||{};var m=a.user||{},r="presence"in a?a.presence:!0,p=g[2],t=(g[3]||"standard")+"-"+a.channel,g=a.channel,f=k(t);f.channel=g;f.password="GibberishAES"in window&&a.password;if(g in w.connected)return f;a.geo&&setInterval(u,15E3)&&u();a.uuid=n;a.origin=p;c=w.connected[g]=v?c:PUBNUB[f.password?"secure":"init"](a);v=1;f.disconnected=0;c.subscribe({channel:f.channel,disconnect:function(){f.disconnected||
(f.disconnected=1,c.each(d,function(a){c.events.fire(a+"disconnect",{})}))},reconnect:function(){c.disconnected=0},connect:function(a,b,g){f.disconnected=0;c.each(d,function(a){var b=k(a);b.connected||(b.connected=!0,c.events.fire(a+"connect",{}))});e()},presence:r&&function(a){"leave"===a.action&&q(a.uuid);"timeout"===a.action&&q(a.uuid);"join"===a.action&&e()},callback:function(a){f.disconnected&&c.each(d,function(a){c.events.fire(a+"reconnect",{})});f.disconnected=0;var b=a.data;a.ns in d&&b&&
c.events.fire(a.ns+a.name,b);a.uuid&&a.uuid!==n&&"ping"===a.name&&c.each(b.nss,function(d){h[d]=h[d]||{};var e=h[d][a.uuid]=h[d][a.uuid]||{geo:a.geo||[0,0],uuid:a.uuid,last:+new Date,socket:f,namespace:d,connected:!1,slot:f.user_count++};e.last=+new Date;e.data=b.cuser;e.connected||(c.events.fire(d+"join",e),e.connected=!0)})}});r&&(setInterval(e,3E4),e());return f}}})();
