// Version: 3.5.3.1
(function(){
function q(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return null}}function c(b){a.lastIndex=0;return a.test(b)?'"'+b.replace(a,function(a){var b=m[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(a,m){var r,h,k,n,p,z=e,l=m[a];l&&"object"===typeof l&&(l=b.call(l));"function"===typeof x&&(l=x.call(m,a,l));switch(typeof l){case "string":return c(l);case "number":return isFinite(l)?String(l):"null";
case "boolean":case "null":return String(l);case "object":if(!l)return"null";e+=v;p=[];if("[object Array]"===Object.prototype.toString.apply(l)){n=l.length;for(r=0;r<n;r+=1)p[r]=d(r,l)||"null";k=0===p.length?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+z+"]":"["+p.join(",")+"]";e=z;return k}if(x&&"object"===typeof x)for(n=x.length,r=0;r<n;r+=1)h=x[r],"string"===typeof h&&(k=d(h,l))&&p.push(c(h)+(e?": ":":")+k);else for(h in l)Object.hasOwnProperty.call(l,h)&&(k=d(h,l))&&p.push(c(h)+(e?": ":":")+k);k=0===p.length?
"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+z+"}":"{"+p.join(",")+"}";e=z;return k}}window.JSON||(window.JSON={});var a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,v,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var h;v=e="";if("number"===typeof c)for(h=0;h<c;h+=1)v+=" ";else"string"===typeof c&&(v=c);if((x=b)&&"function"!==
typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var aa=1,w=!1,B=[],I="-pnpres",ba=10,L=1E4,ca=310,da=60,M=1E3,ea="/",fa="&",ga=/{([\w\-]+)}/g;function P(){return"x"+ ++aa+""+ +new Date}function Q(){return+new Date}
var S=function(){var b=Math.floor(20*Math.random());return function(c,d){return 0<c.indexOf("pubsub.")&&c.replace("pubsub","ps"+(d?R().split("-")[0]:20>++b?b:b=1))||c}}();function T(b,c){var d=b.join(ea),a=[];if(!c)return d;V(c,function(b,c){a.push(b+"="+W(c))});return d+="?"+a.join(fa)}function ha(b,c){function d(){e+c>Q()?(clearTimeout(a),a=setTimeout(d,c)):(e=Q(),b())}var a,e=0;return d}function ia(b,c){var d=[];V(b||[],function(a){c(a)&&d.push(a)});return d}
function ja(b,c){return b.replace(ga,function(b,a){return c[a]||b})}function R(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"==b?a:a&3|8).toString(16)});b&&b(c);return c}function V(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var d=0,a=b.length;d<a;)c.call(b[d],b[d],d++);else for(d in b)b.hasOwnProperty&&b.hasOwnProperty(d)&&c.call(b[d],d,b[d])}function X(b,c){var d=[];V(b||[],function(a,b){d.push(c(a,b))});return d}
function W(b){return X(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];V(b,function(b,a){a.j&&c.push(b)});return c.sort()}function Z(){setTimeout(function(){w||(w=1,V(B,function(b){b()}))},M)}
function ka(b){function c(){}function d(a){a&&(s.h=0);!s.h&&s.length&&(s.h=1,G(s.shift()))}function a(a){var b=0;V(Y(g),function(f){if(f=g[f])b++,(a||q())(f)});return b}function e(){t()||m(1);setTimeout(e,M)}function v(){C.time(function(a){a||m(1);setTimeout(v,E)})}function m(a){A&&A(a);A=null}var x=+b.windowing||ba,O=(+b.timeout||ca)*M,E=(+b.keepalive||da)*M,r=b.noleave||0,h=b.publish_key||"",k=b.subscribe_key||"",n=b.auth_key||"",p=b.ssl?"s":"",z="http"+p+"://"+(b.origin||"pubsub.pubnub.com"),l=
S(z),N=S(z),s=[],F=0,H=0,A=0,f=0,y=0,g={},G=b.xdr,u=b.error||q(),t=b._is_online||function(){return 1},J=b.jsonp_cb||function(){return 0},K=b.db||{get:q(),set:q()},D=b.uuid||K&&K.get(k+"uuid")||"",C={LEAVE:function(a,b){var f={uuid:D,auth:n},c=S(z),g=J();0<a.indexOf(I)||r||("0"!=g&&(f.callback=g),G({g:b||p,timeout:2E3,a:g,data:f,url:[c,"v2","presence","sub_key",k,"channel",W(a),"leave"]}))},history:function(a,b){b=a.callback||b;var f=a.count||a.limit||100,c=a.reverse||"false",g=a.error||q(),y=a.channel,
d=a.start,e=a.end,h={},m=J();if(!y)return u("Missing Channel");if(!b)return u("Missing Callback");if(!k)return u("Missing Subscribe Key");h.stringtoken="true";h.count=f;h.reverse=c;h.auth=n;m&&(h.callback=m);d&&(h.start=d);e&&(h.end=e);G({a:m,data:h,c:function(a){b(a)},b:g,url:[l,"v2","history","sub-key",k,"channel",W(y)]})},replay:function(a){var b=b||a.callback||q(),f=a.source,c=a.destination,g=a.stop,y=a.start,d=a.end,e=a.reverse;a=a.limit;var m=J(),t={};if(!f)return u("Missing Source Channel");
if(!c)return u("Missing Destination Channel");if(!h)return u("Missing Publish Key");if(!k)return u("Missing Subscribe Key");"0"!=m&&(t.callback=m);g&&(t.stop="all");e&&(t.reverse="true");y&&(t.start=y);d&&(t.end=d);a&&(t.count=a);t.auth=n;G({a:m,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[l,"v1","replay",h,k,f,c],data:t})},auth:function(a){n=a;c()},time:function(a){var b=J();G({a:b,data:{uuid:D,auth:n},timeout:5*M,url:[l,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,
b){b=b||a.callback||q();var f=a.message,c=a.channel,g=J();if(!f)return u("Missing Message");if(!c)return u("Missing Channel");if(!h)return u("Missing Publish Key");if(!k)return u("Missing Subscribe Key");f=JSON.stringify(f);c=[l,"publish",h,k,0,W(c),g,W(f)];s.push({a:g,timeout:5*M,url:c,data:{uuid:D,auth:n},c:function(a){b(a);d(1)},b:function(){b([0,"Failed",f]);d(1)}});d()},unsubscribe:function(a){a=a.channel;y=0;f=1;a=X((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+I}).join(",");
V(a.split(","),function(a){w&&C.LEAVE(a,0);g[a]=0});c()},subscribe:function(b,d){function e(b){b?setTimeout(c,M):(l=S(z,1),N=S(z,1),setTimeout(function(){C.time(e)},M));a(function(a){if(b&&a.d)return a.d=0,a.l(a.name);b||a.d||(a.d=1,a.disconnect(a.name))})}function h(){var b=J(),d=Y(g).join(",");d&&(m(),A=G({timeout:ma,a:b,b:function(){A=null;C.time(e)},data:{uuid:D,auth:n},url:[N,"subscribe",k,W(d),b,y],c:function(b){A=null;if(!b||"object"==typeof b&&"error"in b&&!b.error)return s(b),setTimeout(c,
U);y=!y&&f&&K.get(k)||b[1];a(function(a){a.f||(a.f=1,a.k(a.name))});$&&(y=1E4,$=0);K.set(k,b[1]);var d=function(){var a=(2<b.length?b[2]:X(g,function(a){return X(Array(b[0].length).join(",").split(","),function(){return a})}).join(",")).split(",");return function(){var b=a.shift()||H;return[(g[b]||{}).a||F,b.split(I)[0]]}}();V(b[0],function(a){var f=d();f[0](a,b,f[1])});setTimeout(h,U)}}))}var t=b.channel;d=(d=d||b.callback)||b.message;var r=b.connect||q(),p=b.reconnect||q(),v=b.disconnect||q(),s=
b.error||q(),E=b.presence||0,la=b.noheresync||0,$=b.backfill||0,na=b.timetoken||0,ma=b.timeout||O,U=b.windowing||x;f=b.restore;y=na;if(!t)return u("Missing Channel");if(!d)return u("Missing Callback");if(!k)return u("Missing Subscribe Key");V((t.join?t.join(","):""+t).split(","),function(a){var b=g[a]||{};g[H=a]={name:a,f:b.f,d:b.d,j:1,a:F=d,k:r,disconnect:v,l:p};E&&(C.subscribe({channel:a+I,callback:E}),b.j||la||C.here_now({channel:a,callback:function(b){V("uuids"in b?b.uuids:[],function(f){E({action:"join",
uuid:f,timestamp:Q(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){m();setTimeout(h,U)};if(!w)return B.push(c);c()},here_now:function(a,b){b=a.callback||b;var f=a.error||q(),c=a.channel,g=J(),d={uuid:D,auth:n};if(!c)return u("Missing Channel");if(!b)return u("Missing Callback");if(!k)return u("Missing Subscribe Key");"0"!=g&&(d.callback=g);G({a:g,data:d,c:function(a){b(a,c)},b:f,url:[l,"v2","presence","sub_key",k,"channel",W(c)]})},xdr:G,ready:Z,db:K,uuid:R,map:X,each:V,"each-channel":a,grep:ia,
offline:function(){m(1)},supplant:ja,now:Q,unique:P,updater:ha};D||(D=C.uuid());K.set(k+"uuid",D);setTimeout(e,M);setTimeout(v,E);C.time(q());return C}
window.PUBNUB||function(){function b(f){f.jsonp&&(l=0);var y=f.subscribe_key||"";f.uuid||N.get(y+"uuid");f.xdr=r;f.db=N;f.error=d;f._is_online=k;f.jsonp_cb=E;var g=ka(f);g.css=x;g.$=c;g.create=O;g.bind=e;g.head=v;g.search=a;g.attr=m;g.events=s;g.init=b;e("beforeunload",window,function(){g["each-channel"](function(a){g.LEAVE(a.name,0)});return!0});if(f.notest)return g;e("offline",window,g.offline);e("offline",document,g.offline);return g}function c(a){return document.getElementById(a)}function d(a){console.error(a)}
function a(a,b){var c=[];V(a.split(/\s+/),function(a){V((b||document).getElementsByTagName(a),function(a){c.push(a)})});return c}function e(a,b,c){V(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,!1):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}function v(){return a("head")[0]}function m(a,b,c){if(c)a.setAttribute(b,c);
else return a&&a.getAttribute&&a.getAttribute(b)}function x(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+(0<"|width|height|top|left|".indexOf(c)&&"number"==typeof b[c]?"px":"")}catch(d){}}function O(a){return document.createElement(a)}function E(){return l||n()?0:P()}function r(a){function b(a,f){t||(t=1,d.onerror=null,clearTimeout(r),a||!f||C(f),setTimeout(function(){a&&s();var b=c(k),f=b&&b.parentNode;f&&f.removeChild(b)},M))}if(l||n())return h(a);var d=O("script"),e=a.a,k=P(),
t=0,r=setTimeout(function(){b(1)},a.timeout||L),s=a.b||q(),D=a.data||{},C=a.c||q();window[e]=function(a){b(0,a)};a.g||(d[p]=p);d.onerror=function(){b(1)};D.pnsdk=z;d.src=T(a.url,D);m(d,"id",k);v().appendChild(d);return b}function h(a){function b(a){h||(h=1,clearTimeout(p),d&&(d.onerror=d.onload=null,d.abort&&d.abort(),d=null),a&&s())}function c(){if(!k){k=1;clearTimeout(p);try{e=JSON.parse(d.responseText)}catch(a){return b(1)}h=1;x(e)}}var d,e,h=0,k=0,m=a.timeout||L,p=setTimeout(function(){b(1)},
m),s=a.b||q(),v=a.data||{},x=a.c||q(),A="undefined"===typeof a.g;try{d=n()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(){b(1)};d.onload=d.onloadend=c;A&&(d.timeout=m);v.pnsdk=z;var E=T(a.url,v);d.open("GET",E,A);d.send()}catch(F){return b(0),l=0,r(a)}return b}function k(){return"onLine"in navigator?navigator.onLine:1}function n(){if(!A||!A.get)return 0;var a={id:n.id++,send:q(),abort:function(){a.id={}},open:function(b,c){n[a.id]=a;A.get(a.id,c)}};return a}
var p="async",z="PubNub-JS-Web/3.5.3.1",l=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||q());var N=function(){var a=window.localStorage;return{get:function(b){try{return a?a.getItem(b):-1==document.cookie.indexOf(b)?null:((document.cookie||"").match(RegExp(b+"=([^;]+)"))||[])[1]||null}catch(c){}},set:function(b,c){try{if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(d){}}}}(),
s={list:{},unbind:function(a){s.list[a]=[]},bind:function(a,b){(s.list[a]=s.list[a]||[]).push(b)},fire:function(a,b){V(s.list[a]||[],function(a){a(b)})}},F=c("pubnub")||0;e("load",window,function(){setTimeout(Z,0)});var H=F||{};PUBNUB=b({notest:1,publish_key:m(H,"pub-key"),subscribe_key:m(H,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==m(H,"ssl"),origin:m(H,"origin"),uuid:m(H,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&
Z();var A=c("pubnubs")||0;if(F){x(F,{position:"absolute",top:-M});if("opera"in window||m(F,"flash"))F.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(a,b){if(!b)return n[a].onerror();n[a].responseText=unescape(b);n[a].onload()};n.id=M}}();
(function(){var b=PUBNUB.ws=function(c,d){if(!(this instanceof b))return new b(c,d);var a=this;c=a.url=c||"";a.protocol=d||"Sec-WebSocket-Protocol";var e=c.split("/"),e={ssl:"wss:"===e[0],origin:e[2],publish_key:e[3],subscribe_key:e[4],channel:e[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=
a.onsend=q();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=!1;a.buffer=[];a.readyState=a.CONNECTING;if(!c)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),a;a.e=PUBNUB.init(e);a.e.i=e;a.i=e;a.e.subscribe({restore:!1,channel:e.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=
a.OPEN;a.onopen()}})};b.prototype.send=function(b){var d=this;d.e.publish({channel:d.e.i.channel,message:b,callback:function(a){d.onsend({data:a})}})}})();
})();
