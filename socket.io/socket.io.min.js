// Version: 3.7.19
(function(){
window.JSON&&window.JSON.stringify||function(){function v(){try{return this.valueOf()}catch(h){return null}}function m(e){h.lastIndex=0;return h.test(e)?'"'+e.replace(h,function(e){var g=B[e];return"string"===typeof g?g:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function e(h,x){var g,w,z,c,d,a=r,b=x[h];b&&"object"===typeof b&&(b=v.call(b));"function"===typeof y&&(b=y.call(x,h,b));switch(typeof b){case "string":return m(b);case "number":return isFinite(b)?String(b):"null";
case "boolean":case "null":return String(b);case "object":if(!b)return"null";r+=t;d=[];if("[object Array]"===Object.prototype.toString.apply(b)){c=b.length;for(g=0;g<c;g+=1)d[g]=e(g,b)||"null";z=0===d.length?"[]":r?"[\n"+r+d.join(",\n"+r)+"\n"+a+"]":"["+d.join(",")+"]";r=a;return z}if(y&&"object"===typeof y)for(c=y.length,g=0;g<c;g+=1)w=y[g],"string"===typeof w&&(z=e(w,b))&&d.push(m(w)+(r?": ":":")+z);else for(w in b)Object.hasOwnProperty.call(b,w)&&(z=e(w,b))&&d.push(m(w)+(r?": ":":")+z);z=0===d.length?
"{}":r?"{\n"+r+d.join(",\n"+r)+"\n"+a+"}":"{"+d.join(",")+"}";r=a;return z}}window.JSON||(window.JSON={});var h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,t,B={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y;"function"!==typeof JSON.stringify&&(JSON.stringify=function(h,m,g){var w;t=r="";if("number"===typeof g)for(w=0;w<g;w+=1)t+=" ";else"string"===typeof g&&(t=g);if((y=m)&&"function"!==
typeof m&&("object"!==typeof m||"number"!==typeof m.length))throw Error("JSON.stringify");return e("",{"":h})});"function"!==typeof JSON.parse&&(JSON.parse=function(e){return eval("("+e+")")})}();
window.PUBNUB||function(){function v(a){function b(a){return v(a)}a.jsonp?ja=0:ja=-1==Ba.indexOf("MSIE 6");var c=a.subscribe_key||"";a.uuid||va.get(c+"uuid");var d=a.leave_on_unload||0;a.xdr=f;a.db=va;a.error=a.error||pa;a._is_online=q;a.jsonp_cb=da;a.hmac_SHA256=ga;a.crypto_obj=Y();a.sendBeacon=p;a.params={pnsdk:"PubNub-JS-Web/3.7.19"};var c=G(a),g;for(g in c)c.hasOwnProperty(g)&&(b[g]=c[g]);b.css=F;b.$=H;b.create=J;b.bind=R;b.head=S;b.search=T;b.attr=K;b.events=ha;b.init=b;b.secure=b;b.crypto_obj=
Y();R("beforeunload",window,function(){if(d)b["each-channel"](function(a){b.LEAVE(a.name,0)});return!0});if(a.notest)return b;R("offline",window,b.offline);R("offline",document,b.offline);return b}function m(){return"x"+ ++ka+""+ +new Date}function e(){return+new Date}function h(a,b){var c=a.join("/"),d=[];if(!b)return c;g(b,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&null!=b&&0<encodeURIComponent(c).length&&d.push(a+"="+encodeURIComponent(c))});return c+="?"+
d.join("&")}function r(a,b){function c(){g+b>e()?(clearTimeout(d),d=setTimeout(c,b)):(g=e(),a())}var d,g=0;return c}function t(a,b){var c=[];g(a||[],function(a){b(a)&&c.push(a)});return c}function B(a,b){return a.replace(Fa,function(a,c){return b[c]||a})}function y(a,b){return setTimeout(a,b)}function l(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b}function x(a){return!!a&&"string"!==typeof a&&
(Array.isArray&&Array.isArray(a)||"number"===typeof a.length)}function g(a,b){if(a&&b)if(x(a))for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function w(a,b){var c=[];g(a||[],function(a,d){c.push(b(a,d))});return c}function z(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function c(a){return encodeURIComponent(a)}function d(a,b){var c=[];g(a,function(a,
d){b?0>a.search("-pnpres")&&d.v&&c.push(a):d.v&&c.push(a)});return c.sort()}function a(a,b){var c=[];g(a,function(a,d){b?0>a.search("-pnpres")&&d.v&&c.push(a):d.v&&c.push(a)});return c.sort()}function b(){y(function(){wa||(wa=1,g(Ma,function(a){a()}))},1E3)}function G(f){function q(){}function p(C){C||(C={});g(Na,function(a,b){a in C||(C[a]=b)});return C}function G(C){var a=[];g(C,function(C){a.push(C)});return a}function u(C){var a="",b=G(C).sort(),c;for(c in b){var f=b[c],a=a+(f+"="+z(C[f]));c!=
b.length-1&&(a+="&")}return a}function Y(C,a,b){var c=!1;if("undefined"===typeof C)return a;if("number"===typeof C)c=5<C||0==C?!1:!0;else{if("boolean"===typeof C)return C?30:0;c=!0}return c?(b&&b("Presence Heartbeat value invalid. Valid range ( x > 5 or x = 0). Current Value : "+(a||5)),a||5):C}function S(C,a){return Ga.encrypt(C,a||xa)||C}function v(C,a){return Ga.decrypt(C,a||xa)||Ga.decrypt(C,xa)||C}function ea(){clearTimeout(ya);!Z||500<=Z||1>Z||!d(M,!0).length&&!a(U,!0).length?Ha=!1:(Ha=!0,I.presence_heartbeat({callback:function(){ya=
setTimeout(ea,1E3*Z)},error:function(C){A&&A("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(C));ya=setTimeout(ea,1E3*Z)}}))}function H(){!Ha&&ea()}function T(C){if(Ra){if(!la.length)return}else{C&&(la.sa=0);if(la.sa||!la.length)return;la.sa=1}O(la.shift())}function R(C){var b=0;g(a(U),function(a){if(a=U[a])b++,(C||function(){})(a)})}function ga(a){var b=0;g(d(M),function(c){if(c=M[c])b++,(a||function(){})(c)});return b}function F(a,b,c){if("object"==typeof a){if(a.error){b={};
a.message&&(b.message=a.message);a.payload&&(b.payload=a.payload);c&&c(b);return}if(a.payload){a.next_page?b&&b(a.payload,a.next_page):b&&b(a.payload);return}}b&&b(a)}function J(a,b){if("object"==typeof a&&a.error){var c={};a.message&&(c.message=a.message);a.payload&&(c.payload=a.payload);b&&b(c)}else b&&b(a)}function K(a,b,c,f){b=a.callback||b;var d=a.error||A,g=P();f=f||{};f.auth||(f.auth=a.auth_key||L);a=[Q,"v1","channel-registration","sub-key",E];a.push.apply(a,c);g&&(f.callback=g);O({g:g,data:p(f),
i:function(a){F(a,b,d)},h:function(a){J(a,d)},url:a})}function X(){Sa()||ka(1,{error:"Offline. Please check your network settings. "});qa&&clearTimeout(qa);qa=setTimeout(X,1E3)}function pa(){Fa&&I.time(function(a){da(function(){},a);a||ka(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});ra&&clearTimeout(ra);ra=setTimeout(pa,ha)})}function ka(a,b){Ca&&Ca(a,b);Ca=null;clearTimeout(qa);clearTimeout(ra)}function da(a,b){function c(b){b&&(Ia=e()-(b/1E4+(e()-
f)/2),a&&a(Ia))}var f=e();b&&c(b)||I.time(c)}var Ba=+f.windowing||10,ja=1E3*(+f.timeout||310),ha=1E3*(+f.keepalive||60),Fa=f.timecheck||0,ia=f.noleave||0,fa=f.publish_key,E=f.subscribe_key,L=f.auth_key||"",ca=f.secret_key||"",ua=f.hmac_SHA256,za=f.ssl?"s":"",sa="http"+za+"://"+(f.origin||"pubsub.pubnub.com"),Q=ta(sa),va=ta(sa),la=[],Ja=!0,Ia=0,Ka=0,Oa=0,Ca=0,Aa=f.restore||0,ma=0,La=!1,M={},U={},aa={},ya=null,V=Y(f.heartbeat||f.pnexpires||0,f.error),Z=f.heartbeat_interval||V/2-1,Ha=!1,Ra=f.no_wait_for_pending,
Pa=f["compatible_3.5"]||!1,O=f.xdr,Na=f.params||{},A=f.error||function(){},Sa=f._is_online||function(){return 1},P=f.jsonp_cb||function(){return 0},na=f.db||{get:function(){},set:function(){}},xa=f.cipher_key,N=f.uuid||!f.unique_uuid&&na&&na.get(E+"uuid")||"",ba=f.instance_id||!1,W="",Qa=f.shutdown,Da=("undefined"!=typeof f.use_send_beacon?f.use_send_beacon:1)?f.sendBeacon:null,qa,ra;2===V&&(Z=1);var Ga=f.crypto_obj||{encrypt:function(a){return a},decrypt:function(a){return a}},I={LEAVE:function(a,
b,c,f,d){c={uuid:N,auth:c||L};var g=ta(sa);f=f||function(){};var e=d||function(){};d=P();if(0<a.indexOf("-pnpres"))return!0;if(Pa&&(!za||"0"==d)||ia)return!1;"0"!=d&&(c.callback=d);ba&&(c.instanceid=W);a=[g,"v2","presence","sub_key",E,"channel",encodeURIComponent(a),"leave"];c=p(c);if(Da&&(url_string=h(a,c),Da(url_string)))return f&&f({status:200,action:"leave",message:"OK",service:"Presence"}),!0;O({V:b||za,g:d,data:c,i:function(a){F(a,f,e)},h:function(a){J(a,e)},url:a});return!0},LEAVE_GROUP:function(a,
b,c,f,d){c={uuid:N,auth:c||L};var g=ta(sa);f=f||function(){};var e=d||function(){};d=P();if(0<a.indexOf("-pnpres"))return!0;if(Pa&&(!za||"0"==d)||ia)return!1;"0"!=d&&(c.callback=d);a&&0<a.length&&(c["channel-group"]=a);ba&&(c.instanceid=W);a=[g,"v2","presence","sub_key",E,"channel",encodeURIComponent(","),"leave"];c=p(c);if(Da&&(url_string=h(a,c),Da(url_string)))return f&&f({status:200,action:"leave",message:"OK",service:"Presence"}),!0;O({V:b||za,g:d,data:c,i:function(a){F(a,f,e)},h:function(a){J(a,
e)},url:a});return!0},set_resumed:function(a){La=a},get_cipher_key:function(){return xa},set_cipher_key:function(a){xa=a},raw_encrypt:function(a,b){return S(a,b)},raw_decrypt:function(a,b){return v(a,b)},get_heartbeat:function(){return V},set_heartbeat:function(a,b){V=Y(a,V,A);Z=b||V/2-1;2==V&&(Z=1);q();ea()},get_heartbeat_interval:function(){return Z},set_heartbeat_interval:function(a){Z=a;ea()},get_version:function(){return"3.7.19"},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b=
{aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm);apns&&(a.pn_apns=apns);for(k in n)a[k]=n[k];return a},_add_param:function(a,b){Na[a]=b},channel_group:function(a,b){var c=a.channel_group;b=b||a.callback;var f=a.channels||a.channel,d=a.cloak,g,e,p=[],h={},q=a.mode||"add";c&&(c=c.split(":"),1<c.length?(g="*"===c[0]?null:c[0],e=c[1]):e=c[0]);g&&p.push("namespace")&&p.push(encodeURIComponent(g));p.push("channel-group");e&&"*"!==e&&p.push(e);
f?(x(f)&&(f=f.join(",")),h[q]=f,h.cloak=Ja?"true":"false"):"remove"===q&&p.push("remove");"undefined"!=typeof d&&(h.cloak=d?"true":"false");K(a,b,p,h)},channel_group_list_groups:function(a,b){var c;(c=a.namespace||a.ns||a.channel_group||null)&&(a.channel_group=c+":*");I.channel_group(a,b)},channel_group_list_channels:function(a,b){if(!a.channel_group)return A("Missing Channel Group");I.channel_group(a,b)},channel_group_remove_channel:function(a,b){if(!a.channel_group)return A("Missing Channel Group");
if(!a.channel&&!a.channels)return A("Missing Channel");a.mode="remove";I.channel_group(a,b)},channel_group_remove_group:function(a,b){if(!a.channel_group)return A("Missing Channel Group");if(a.channel)return A("Use channel_group_remove_channel if you want to remove a channel from a group.");a.mode="remove";I.channel_group(a,b)},channel_group_add_channel:function(a,b){if(!a.channel_group)return A("Missing Channel Group");if(!a.channel&&!a.channels)return A("Missing Channel");I.channel_group(a,b)},
channel_group_cloak:function(a,b){"undefined"==typeof a.cloak?b(Ja):(Ja=a.cloak,I.channel_group(a,b))},channel_group_list_namespaces:function(a,b){K(a,b,["namespace"])},channel_group_remove_namespace:function(a,b){K(a,b,["namespace",a.namespace,"remove"])},history:function(a,b){b=a.callback||b;var c=a.count||a.limit||100,f=a.reverse||"false",d=a.error||function(){},g=a.auth_key||L,e=a.cipher_key,h=a.channel,q=a.channel_group,G=a.start,l=a.end,u=a.include_token,r=a.string_message_token||!1,m={},w=
P();if(!h&&!q)return A("Missing Channel");if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");m.stringtoken="true";m.count=c;m.reverse=f;m.auth=g;q&&(m["channel-group"]=q,h||(h=","));w&&(m.callback=w);G&&(m.start=G);l&&(m.end=l);u&&(m.include_token="true");r&&(m.string_message_token="true");O({g:w,data:p(m),i:function(a){if("object"==typeof a&&a.error)d({message:a.message,payload:a.payload});else{for(var c=a[0],f=[],C=0;C<c.length;C++)if(u){var g=v(c[C].message,e),h=c[C].timetoken;
try{f.push({message:JSON.parse(g),timetoken:h})}catch(p){f.push({message:g,timetoken:h})}}else{g=v(c[C],e);try{f.push(JSON.parse(g))}catch(p){f.push(g)}}b([f,a[1],a[2]])}},h:function(a){J(a,d)},url:[Q,"v2","history","sub-key",E,"channel",encodeURIComponent(h)]})},replay:function(a,b){b=b||a.callback||function(){};var c=a.auth_key||L,f=a.source,d=a.destination,g=a.stop,e=a.start,h=a.end,q=a.reverse,G=a.limit,m=P(),l={};if(!f)return A("Missing Source Channel");if(!d)return A("Missing Destination Channel");
if(!fa)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");"0"!=m&&(l.callback=m);g&&(l.stop="all");q&&(l.reverse="true");e&&(l.start=e);h&&(l.end=h);G&&(l.count=G);l.auth=c;O({g:m,i:function(a){F(a,b,err)},h:function(){b([0,"Disconnected"])},url:[Q,"v1","replay",fa,E,f,d],data:p(l)})},auth:function(a){L=a;q()},time:function(a){var b=P(),c={uuid:N,auth:L};ba&&(c.instanceid=W);O({g:b,data:p(c),url:[Q,"time",b],i:function(b){a(b[0])},h:function(){a(0)}})},publish:function(a,b){var c=
a.message;if(!c)return A("Missing Message");b=b||a.callback||c.callback||function(){};var f=a.channel||c.channel,d=a.auth_key||L,g=a.cipher_key,e=a.error||c.error||function(){},h=a.post||!1,q="store_in_history"in a?a.store_in_history:!0,l=P(),m="push";a.prepend&&(m="unshift");if(!f)return A("Missing Channel");if(!fa)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");c.getPubnubMessage&&(c=c.getPubnubMessage());c=JSON.stringify(S(c,g));c=[Q,"publish",fa,E,0,encodeURIComponent(f),
l,encodeURIComponent(c)];d={uuid:N,auth:d};q||(d.store="0");ba&&(d.instanceid=W);la[m]({g:l,url:c,data:p(d),h:function(a){J(a,e);T(1)},i:function(a){F(a,b,e);T(1)},mode:h?"POST":"GET"});T()},unsubscribe:function(a,b){var c=a.channel,f=a.channel_group,d=a.auth_key||L;b=b||a.callback||function(){};var e=a.error||function(){};ma=0;Aa=1;if(c){var h=[],p=[];g(x(c)?c:(""+c).split(","),function(a){M[a]&&h.push(a)});if(0==h.length){b({action:"leave"});return}g(h,function(a){a in M&&(M[a]=0);a in aa&&delete aa[a]});
g(h,function(a){p.push(a+"-pnpres")});c=!0;wa&&(c=I.LEAVE(h.concat(p),0,d,b,e));c||b({action:"leave"})}if(f){var l=[],m=[];g(x(f)?f:(""+f).split(","),function(a){U[a]&&l.push(a)});if(0==l.length){b({action:"leave"});return}g(l,function(a){a in U&&(U[a]=0);a in aa&&delete aa[a]});g(l,function(a){m.push(a+"-pnpres")});c=!0;wa&&(c=I.LEAVE_GROUP(l.concat(m),0,d,b,e));c||b({action:"leave"})}q()},subscribe:function(b,c){function f(a){a?setTimeout(q,ea):(Q=ta(sa,1),va=ta(sa,1),y(function(){I.time(f)},1E3));
ga(function(b){if(a&&b.j)return b.j=0,b.da(b.name);a||b.j||(b.j=1,b.disconnect(b.name))});R(function(b){if(a&&b.j)return b.j=0,b.da(b.name);a||b.j||(b.j=1,b.disconnect(b.name))})}function h(){var b=P(),c=d(M).join(","),l=a(U).join(",");if(c||l){c||(c=",");ka();var m=p({uuid:N,auth:L});l&&(m["channel-group"]=l);2<JSON.stringify(aa).length&&(m.state=JSON.stringify(aa));V&&(m.heartbeat=V);ba&&(m.instanceid=W);H();Ca=O({timeout:T,g:b,h:function(a){a&&a.error&&a.service?(J(a,z),f(1)):I.time(function(b){!b&&
J(a,z);f(b)})},data:p(m),url:[va,"subscribe",E,encodeURIComponent(c),b,ma],i:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return z(a.error),setTimeout(q,1E3);Y(a[1]);ma=!ma&&Aa&&na.get(E)||a[1];ga(function(a){a.C||(a.C=1,a.connect(a.name))});R(function(a){a.C||(a.C=1,a.connect(a.name))});if(La&&!Aa)ma=0,La=!1,na.set(E,0);else{S&&(ma=1E4,S=0);na.set(E,a[1]);var b=function(){var b="",c="";3<a.length?(b=a[3],c=a[2]):b=2<a.length?a[2]:w(d(M),function(b){return w(Array(a[0].length).join(",").split(","),
function(){return b})}).join(",");var f=b.split(","),g=c?c.split(","):[];return function(){var a=f.shift()||Oa,b=g.shift(),c={};b?(a&&0<=a.indexOf("-pnpres")&&0>b.indexOf("-pnpres")&&(b+="-pnpres"),c=U[b]||M[b]||{callback:function(){}}):c=M[a];a=[c.g||Ka,a.split("-pnpres")[0]];b&&a.push(b.split("-pnpres")[0]);return a}}(),c=e()-Ia-+a[1]/1E4;g(a[0],function(f){var d=b();f=v(f,M[d[1]]?M[d[1]].cipher_key:null);d[0]&&d[0](f,a,d[2]||d[1],c,d[1])})}setTimeout(h,ea)}})}}var l=b.channel,m=b.channel_group;
c=(c=c||b.callback)||b.message;var G=b.connect||function(){},u=b.reconnect||function(){},r=b.disconnect||function(){},z=b.error||z||function(){},Y=b.idle||function(){},oa=b.presence||0,t=b.noheresync||0,S=b.backfill||0,F=b.timetoken||0,T=b.timeout||ja,ea=b.windowing||Ba,x=b.state,Ea=b.heartbeat||b.pnexpires,B=b.heartbeat_interval,K=b.restore||Aa;L=b.auth_key||L;Aa=K;ma=F;if(!l&&!m)return A("Missing Channel");if(!c)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");(Ea||0===Ea||B||
0===B)&&I.set_heartbeat(Ea,B);l&&g((l.join?l.join(","):""+l).split(","),function(a){var f=M[a]||{};M[Oa=a]={name:a,C:f.C,j:f.j,v:1,g:Ka=c,cipher_key:b.cipher_key,connect:G,disconnect:r,da:u};x&&(aa[a]=a in x?x[a]:x);oa&&(I.subscribe({channel:a+"-pnpres",callback:oa,restore:K}),f.v||t||I.here_now({channel:a,data:p({uuid:N,auth:L}),callback:function(b){g("uuids"in b?b.uuids:[],function(c){oa({action:"join",uuid:c,timestamp:Math.floor(e()/1E3),occupancy:b.occupancy||1},b,a)})}}))});m&&g((m.join?m.join(","):
""+m).split(","),function(a){var f=U[a]||{};U[a]={name:a,C:f.C,j:f.j,v:1,g:Ka=c,cipher_key:b.cipher_key,connect:G,disconnect:r,da:u};oa&&(I.subscribe({channel_group:a+"-pnpres",callback:oa,restore:K,auth_key:L}),f.v||t||I.here_now({channel_group:a,data:p({uuid:N,auth:L}),callback:function(b){g("uuids"in b?b.uuids:[],function(c){oa({action:"join",uuid:c,timestamp:Math.floor(e()/1E3),occupancy:b.occupancy||1},b,a)})}}))});q=function(){ka();setTimeout(h,ea)};if(!wa)return Ma.push(q);q()},here_now:function(a,
b){b=a.callback||b;var c=a.debug,f=a.error||function(){},d=a.auth_key||L,g=a.channel,h=a.channel_group,e=P(),l=a.state,d={uuid:N,auth:d};("uuids"in a?a.uuids:1)||(d.disable_uuids=1);l&&(d.state=1);if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");l=[Q,"v2","presence","sub_key",E];g&&l.push("channel")&&l.push(encodeURIComponent(g));"0"!=e&&(d.callback=e);h&&(d["channel-group"]=h,!g&&l.push("channel")&&l.push(","));ba&&(d.instanceid=W);O({g:e,data:p(d),i:function(a){F(a,b,f)},
h:function(a){J(a,f)},debug:c,url:l})},where_now:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.auth_key||L,d=P(),g=a.uuid||N,f={auth:f};if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");"0"!=d&&(f.callback=d);ba&&(f.instanceid=W);O({g:d,data:p(f),i:function(a){F(a,b,c)},h:function(a){J(a,c)},url:[Q,"v2","presence","sub_key",E,"uuid",encodeURIComponent(g)]})},state:function(a,b){b=a.callback||b||function(){};var c=a.error||function(){},f=a.auth_key||L,d=P(),
g=a.state,e=a.uuid||N,h=a.channel,l=a.channel_group,f=p({auth:f});if(!E)return A("Missing Subscribe Key");if(!e)return A("Missing UUID");if(!h&&!l)return A("Missing Channel");"0"!=d&&(f.callback=d);"undefined"!=typeof h&&M[h]&&M[h].v&&g&&(aa[h]=g);"undefined"!=typeof l&&U[l]&&U[l].v&&(g&&(aa[l]=g),f["channel-group"]=l,h||(h=","));f.state=JSON.stringify(g);ba&&(f.instanceid=W);g=g?[Q,"v2","presence","sub-key",E,"channel",h,"uuid",e,"data"]:[Q,"v2","presence","sub-key",E,"channel",h,"uuid",encodeURIComponent(e)];
O({g:d,data:p(f),i:function(a){F(a,b,c)},h:function(a){J(a,c)},url:g})},grant:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.channel||a.channels,d=a.channel_group,g=P(),h=a.ttl,e=a.read?"1":"0",l=a.write?"1":"0",m=a.manage?"1":"0",q=a.auth_key||a.auth_keys;if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");if(!fa)return A("Missing Publish Key");if(!ca)return A("Missing Secret Key");var G=E+"\n"+fa+"\ngrant\n",e={w:l,r:e,timestamp:Math.floor((new Date).getTime()/
1E3)};a.manage&&(e.m=m);x(f)&&(f=f.join(","));x(q)&&(q=q.join(","));"undefined"!=typeof f&&null!=f&&0<f.length&&(e.channel=f);"undefined"!=typeof d&&null!=d&&0<d.length&&(e["channel-group"]=d);"0"!=g&&(e.callback=g);if(h||0===h)e.ttl=h;q&&(e.auth=q);e=p(e);q||delete e.auth;G+=u(e);f=ua(G,ca);f=f.replace(/\+/g,"-");f=f.replace(/\//g,"_");e.signature=f;O({g:g,data:e,i:function(a){F(a,b,c)},h:function(a){J(a,c)},url:[Q,"v1","auth","grant","sub-key",E]})},mobile_gw_provision:function(a){var b=a.callback||
function(){},c=a.auth_key||L,f=a.error||function(){},d=P(),g=a.channel,e=a.op,h=a.gw_type;a=a.device_id;if(!a)return A("Missing Device ID (device_id)");if(!h)return A("Missing GW Type (gw_type: gcm or apns)");if(!e)return A("Missing GW Operation (op: add or remove)");if(!g)return A("Missing gw destination Channel (channel)");if(!fa)return A("Missing Publish Key");if(!E)return A("Missing Subscribe Key");a=[Q,"v1/push/sub-key",E,"devices",a];c={uuid:N,auth:c,type:h};"add"==e?c.add=g:"remove"==e&&(c.remove=
g);ba&&(data.instanceid=W);O({g:d,data:c,i:function(a){F(a,b,f)},h:function(a){J(a,f)},url:a})},audit:function(a,b){b=a.callback||b;var c=a.error||function(){},f=a.channel,d=a.channel_group,g=a.auth_key,e=P();if(!b)return A("Missing Callback");if(!E)return A("Missing Subscribe Key");if(!fa)return A("Missing Publish Key");if(!ca)return A("Missing Secret Key");var h=E+"\n"+fa+"\naudit\n",l={timestamp:Math.floor((new Date).getTime()/1E3)};"0"!=e&&(l.callback=e);"undefined"!=typeof f&&null!=f&&0<f.length&&
(l.channel=f);"undefined"!=typeof d&&null!=d&&0<d.length&&(l["channel-group"]=d);g&&(l.auth=g);l=p(l);g||delete l.auth;h+=u(l);f=ua(h,ca);f=f.replace(/\+/g,"-");f=f.replace(/\//g,"_");l.signature=f;O({g:e,data:l,i:function(a){F(a,b,c)},h:function(a){J(a,c)},url:[Q,"v1","auth","audit","sub-key",E]})},revoke:function(a,b){a.read=!1;a.write=!1;I.grant(a,b)},set_uuid:function(a){N=a;q()},get_uuid:function(){return N},isArray:function(a){return x(a)},get_subscibed_channels:function(){return d(M,!0)},presence_heartbeat:function(b){var f=
b.callback||function(){},g=b.error||function(){};b=P();var e={uuid:N,auth:L};2<JSON.stringify(aa).length&&(e.state=JSON.stringify(aa));0<V&&320>V&&(e.heartbeat=V);"0"!=b&&(e.callback=b);var h=c(d(M,!0).join(",")),l=a(U,!0).join(",");h||(h=",");l&&(e["channel-group"]=l);ba&&(e.instanceid=W);O({g:b,data:p(e),url:[Q,"v2","presence","sub-key",E,"channel",h,"heartbeat"],i:function(a){F(a,f,g)},h:function(a){J(a,g)}})},stop_timers:function(){clearTimeout(qa);clearTimeout(ra);clearTimeout(ya)},shutdown:function(){I.stop_timers();
Qa&&Qa()},xdr:O,ready:b,db:na,uuid:l,map:w,each:g,"each-channel":ga,grep:t,offline:function(){ka(1,{message:"Offline. Please check your network settings."})},supplant:B,now:e,unique:m,updater:r};N||(N=I.uuid());W||(W=I.uuid());na.set(E+"uuid",N);qa=setTimeout(X,1E3);ra=setTimeout(pa,ha);ya=setTimeout(H,1E3*(Z-3));da();return I}function Y(){function a(b){b=b||{};b.hasOwnProperty("encryptKey")||(b.encryptKey=h.encryptKey);b.hasOwnProperty("keyEncoding")||(b.keyEncoding=h.keyEncoding);b.hasOwnProperty("keyLength")||
(b.keyLength=h.keyLength);b.hasOwnProperty("mode")||(b.mode=h.mode);-1==d.indexOf(b.keyEncoding.toLowerCase())&&(b.keyEncoding=h.keyEncoding);-1==g.indexOf(parseInt(b.keyLength,10))&&(b.keyLength=h.keyLength);-1==e.indexOf(b.mode.toLowerCase())&&(b.mode=h.mode);return b}function b(a,c){var f=a;a="base64"==c.keyEncoding?D.enc.Base64.parse(f):"hex"==c.keyEncoding?D.enc.Hex.parse(f):f;return c.encryptKey?D.enc.Utf8.parse(D.SHA256(a).toString(D.enc.Hex).slice(0,32)):a}function c(a){return"ecb"==a.mode?
D.mode.ECB:D.mode.CBC}function f(a){return"cbc"==a.mode?D.enc.Utf8.parse("0123456789012345"):null}var d=["hex","utf8","base64","binary"],g=[128,256],e=["ecb","cbc"],h={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(d,g,e){if(!g)return d;e=a(e);var h=f(e),l=c(e);g=b(g,e);e=JSON.stringify(d);return D.AES.encrypt(e,g,{iv:h,mode:l}).ciphertext.toString(D.enc.Base64)||d},decrypt:function(d,e,g){if(!e)return d;g=a(g);var h=f(g),l=c(g);e=b(e,g);try{var p=D.enc.Base64.parse(d),
q=D.AES.decrypt({ciphertext:p},e,{iv:h,mode:l}).toString(D.enc.Utf8);return JSON.parse(q)}catch(m){}}}}function ga(a,b){return D.HmacSHA256(a,b).toString(D.enc.Base64)}function H(a){return document.getElementById(a)}function pa(a){console.error(a)}function T(a,b){var c=[];g(a.split(/\s+/),function(a){g((b||document).getElementsByTagName(a),function(a){c.push(a)})});return c}function R(a,b,c){g(a.split(","),function(a){function f(a){a||(a=window.event);c(a)||(a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),
a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,f,!1):b.attachEvent?b.attachEvent("on"+a,f):b["on"+a]=f})}function S(){return T("head")[0]}function K(a,b,c){if(c)a.setAttribute(b,c);else return a&&a.getAttribute&&a.getAttribute(b)}function F(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+(0<"|width|height|top|left|".indexOf(c)&&"number"==typeof b[c]?"px":"")}catch(f){}}function J(a){return document.createElement(a)}function da(){return ja||X()?0:m()}
function f(a){function b(a,f){g||(g=1,c.onerror=null,clearTimeout(e),a||!f||q(f),y(function(){a&&l();var b=H(d),c=b&&b.parentNode;c&&c.removeChild(b)},1E3))}if(ja||X())return u(a);var c=J("script"),f=a.g,d=m(),g=0,e=y(function(){b(1,{message:"timeout"})},a.timeout||15E3),l=a.h||function(){},p=a.data||{},q=a.i||function(){};window[f]=function(a){b(0,a)};a.V||(c.async="async");c.onerror=function(){b(1)};c.src=h(a.url,p);K(c,"id",d);S().appendChild(c);return b}function u(a){function b(a,c){e||(e=1,clearTimeout(q),
d&&(d.onerror=d.onload=null,d.abort&&d.abort(),d=null),a&&m(c))}function c(){if(!l){l=1;clearTimeout(q);try{g=JSON.parse(d.responseText)}catch(a){return b(1)}e=1;u(g)}}var d,g,e=0,l=0,p=a.timeout||15E3,q=y(function(){b(1,{message:"timeout"})},p),m=a.h||function(){},G=a.data||{},u=a.i||function(){},r=!a.V;try{d=X()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;d.onerror=d.onabort=function(a){b(1,a||d&&d.responseText||{error:"Network Connection Error"})};d.onload=d.onloadend=c;d.onreadystatechange=
function(){if(d&&4==d.readyState)switch(d.status){case 200:break;default:try{g=JSON.parse(d.responseText),b(1,g)}catch(a){return b(1,{status:d.status,ib:null,message:d.responseText})}}};var w=h(a.url,G);d.open("GET",w,r);r&&(d.timeout=p);d.send()}catch(z){return b(0),ja=0,f(a)}return b}function q(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(a){return!0}}function p(a){return"sendBeacon"in navigator?navigator.sendBeacon(a):!1}function X(){if(!ua||!ua.get)return 0;var a={id:X.id++,
send:function(){},abort:function(){a.id={}},open:function(b,c){X[a.id]=a;ua.get(a.id,c)}};return a}var ka=1,wa=!1,Ma=[],Fa=/{([\w\-]+)}/g,ta=function(){var a=Math.floor(20*Math.random());return function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?l().split("-")[0]:20>++a?a:a=1))||b}}(),Ba=navigator.userAgent,ja=-1==Ba.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var va=function(){function a(b,
c){document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}function b(a){return-1==document.cookie.indexOf(a)?null:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||null}var c={},f=!1;try{f=window.localStorage}catch(d){}var g;try{a("pnctest","1"),g="1"===b("pnctest")}catch(d){g=!1}return{get:function(a){try{return f?f.getItem(a):g?b(a):c[a]}catch(d){return c[a]}},set:function(b,d){try{if(f)return f.setItem(b,d)&&0;g&&a(b,d);c[b]=d}catch(e){c[b]=d}}}}(),ha={list:{},unbind:function(a){ha.list[a]=
[]},bind:function(a,b){(ha.list[a]=ha.list[a]||[]).push(b)},fire:function(a,b){g(ha.list[a]||[],function(a){a(b)})}},ia=H("pubnub")||0;v.init=v;v.secure=v;v.crypto_obj=Y();"complete"===document.readyState?setTimeout(b,0):R("load",window,function(){setTimeout(b,0)});var ca=ia||{};PUBNUB=v({notest:1,publish_key:K(ca,"pub-key"),subscribe_key:K(ca,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==K(ca,"ssl"),origin:K(ca,"origin"),uuid:K(ca,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=v);
"undefined"!==typeof module&&(module.exports=PUBNUB)&&b();var ua=H("pubnubs")||0;if(ia){F(ia,{position:"absolute",top:-1E3});if("opera"in window||K(ia,"flash"))ia.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(a,b){if(!b)return X[a].onerror();X[a].responseText=unescape(b);X[a].onload()};X.id=1E3}}();
(function(){var v=PUBNUB.ws=function(m,e){if(!(this instanceof v))return new v(m,e);var h=this;m=h.url=m||"";h.protocol=e||"Sec-WebSocket-Protocol";var r=m.split("/"),r={ssl:"wss:"===r[0],origin:r[2],publish_key:r[3],subscribe_key:r[4],channel:r[5]};h.CONNECTING=0;h.OPEN=1;h.CLOSING=2;h.CLOSED=3;h.CLOSE_NORMAL=1E3;h.CLOSE_GOING_AWAY=1001;h.CLOSE_PROTOCOL_ERROR=1002;h.CLOSE_UNSUPPORTED=1003;h.CLOSE_TOO_LARGE=1004;h.CLOSE_NO_STATUS=1005;h.CLOSE_ABNORMAL=1006;h.onclose=h.onerror=h.onmessage=h.onopen=
h.onsend=function(){};h.binaryType="";h.extensions="";h.bufferedAmount=0;h.trasnmitting=!1;h.buffer=[];h.readyState=h.CONNECTING;if(!m)return h.readyState=h.CLOSED,h.onclose({code:h.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),h;h.P=PUBNUB.init(r);h.P.za=r;h.za=r;h.P.subscribe({restore:!1,channel:r.channel,disconnect:h.onerror,reconnect:h.onopen,error:function(){h.onclose({code:h.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(e){h.onmessage({data:e})},connect:function(){h.readyState=
h.OPEN;h.onopen()}})};v.prototype.send=function(m){var e=this;e.P.publish({channel:e.P.za.channel,message:m,callback:function(h){e.onsend({data:h})}})}})();
var D=D||function(v,m){function e(){}var h={},r=h.u={},t=r.R={extend:function(c){e.prototype=this;var d=new e;c&&d.ca(c);d.hasOwnProperty("init")||(d.b=function(){d.Aa.b.apply(this,arguments)});d.b.prototype=d;d.Aa=this;return d},create:function(){var c=this.extend();c.b.apply(c,arguments);return c},b:function(){},ca:function(c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.b.prototype.extend(this)}},B=r.H=
t.extend({b:function(c,d){c=this.c=c||[];this.a=d!=m?d:4*c.length},toString:function(c){return(c||l).stringify(this)},concat:function(c){var d=this.c,a=c.c,b=this.a;c=c.a;this.X();if(b%4)for(var g=0;g<c;g++)d[b+g>>>2]|=(a[g>>>2]>>>24-g%4*8&255)<<24-(b+g)%4*8;else if(65535<a.length)for(g=0;g<c;g+=4)d[b+g>>>2]=a[g>>>2];else d.push.apply(d,a);this.a+=c;return this},X:function(){var c=this.c,d=this.a;c[d>>>2]&=4294967295<<32-d%4*8;c.length=v.ceil(d/4)},clone:function(){var c=t.clone.call(this);c.c=this.c.slice(0);
return c},random:function(c){for(var d=[],a=0;a<c;a+=4)d.push(4294967296*v.random()|0);return new B.b(d,c)}}),y=h.aa={},l=y.$a={stringify:function(c){var d=c.c;c=c.a;for(var a=[],b=0;b<c;b++){var g=d[b>>>2]>>>24-b%4*8&255;a.push((g>>>4).toString(16));a.push((g&15).toString(16))}return a.join("")},parse:function(c){for(var d=c.length,a=[],b=0;b<d;b+=2)a[b>>>3]|=parseInt(c.substr(b,2),16)<<24-b%8*4;return new B.b(a,d/2)}},x=y.cb={stringify:function(c){var d=c.c;c=c.a;for(var a=[],b=0;b<c;b++)a.push(String.fromCharCode(d[b>>>
2]>>>24-b%4*8&255));return a.join("")},parse:function(c){for(var d=c.length,a=[],b=0;b<d;b++)a[b>>>2]|=(c.charCodeAt(b)&255)<<24-b%4*8;return new B.b(a,d)}},g=y.Ka={stringify:function(c){try{return decodeURIComponent(escape(x.stringify(c)))}catch(d){throw Error("Malformed UTF-8 data");}},parse:function(c){return x.parse(unescape(encodeURIComponent(c)))}},w=r.Fa=t.extend({reset:function(){this.A=new B.b;this.N=0},J:function(c){"string"==typeof c&&(c=g.parse(c));this.A.concat(c);this.N+=c.a},B:function(c){var d=
this.A,a=d.c,b=d.a,g=this.s,e=b/(4*g),e=c?v.ceil(e):v.max((e|0)-this.oa,0);c=e*g;b=v.min(4*c,b);if(c){for(var h=0;h<c;h+=g)this.T(a,h);h=a.splice(0,c);d.a-=b}return new B.b(h,b)},clone:function(){var c=t.clone.call(this);c.A=this.A.clone();return c},oa:0});r.ia=w.extend({f:t.extend(),b:function(c){this.f=this.f.extend(c);this.reset()},reset:function(){w.reset.call(this);this.M()},update:function(c){this.J(c);this.B();return this},l:function(c){c&&this.J(c);return this.I()},s:16,L:function(c){return function(d,
a){return(new c.b(a)).l(d)}},ka:function(c){return function(d,a){return(new z.Ha.b(c,a)).l(d)}}});var z=h.F={};return h}(Math);
(function(v){function m(c){return 4294967296*(c-(c|0))|0}for(var e=D.u,h=e.H,r=e.ia,e=D.F,t=[],B=[],y=2,l=0;64>l;){var x;a:{x=y;for(var g=v.sqrt(x),w=2;w<=g;w++)if(!(x%w)){x=!1;break a}x=!0}x&&(8>l&&(t[l]=m(v.pow(y,.5))),B[l]=m(v.pow(y,1/3)),l++);y++}var z=[],e=e.Ja=r.extend({M:function(){this.o=new h.b(t.slice(0))},T:function(c,d){for(var a=this.o.c,b=a[0],g=a[1],e=a[2],h=a[3],l=a[4],m=a[5],r=a[6],w=a[7],t=0;64>t;t++){if(16>t)z[t]=c[d+t]|0;else{var v=z[t-15],F=z[t-2];z[t]=((v<<25|v>>>7)^(v<<14|v>>>
18)^v>>>3)+z[t-7]+((F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10)+z[t-16]}v=w+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&m^~l&r)+B[t]+z[t];F=((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+(b&g^b&e^g&e);w=r;r=m;m=l;l=h+v|0;h=e;e=g;g=b;b=v+F|0}a[0]=a[0]+b|0;a[1]=a[1]+g|0;a[2]=a[2]+e|0;a[3]=a[3]+h|0;a[4]=a[4]+l|0;a[5]=a[5]+m|0;a[6]=a[6]+r|0;a[7]=a[7]+w|0},I:function(){var c=this.A,d=c.c,a=8*this.N,b=8*c.a;d[b>>>5]|=128<<24-b%32;d[(b+64>>>9<<4)+14]=v.floor(a/4294967296);d[(b+64>>>9<<4)+15]=a;c.a=4*d.length;
this.B();return this.o},clone:function(){var c=r.clone.call(this);c.o=this.o.clone();return c}});D.Ja=r.L(e);D.bb=r.ka(e)})(Math);
(function(){var v=D.aa.Ka;D.F.Ha=D.u.R.extend({b:function(m,e){m=this.U=new m.b;"string"==typeof e&&(e=v.parse(e));var h=m.s,r=4*h;e.a>r&&(e=m.l(e));e.X();for(var t=this.Sa=e.clone(),B=this.Ma=e.clone(),y=t.c,l=B.c,x=0;x<h;x++)y[x]^=1549556828,l[x]^=909522486;t.a=B.a=r;this.reset()},reset:function(){var m=this.U;m.reset();m.update(this.Ma)},update:function(m){this.U.update(m);return this},l:function(m){var e=this.U;m=e.l(m);e.reset();return e.l(this.Sa.clone().concat(m))}})})();
(function(){var v=D.u.H;D.aa.Ca={stringify:function(m){var e=m.c,h=m.a,r=this.na;m.X();m=[];for(var t=0;t<h;t+=3)for(var v=(e[t>>>2]>>>24-t%4*8&255)<<16|(e[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|e[t+2>>>2]>>>24-(t+2)%4*8&255,y=0;4>y&&t+.75*y<h;y++)m.push(r.charAt(v>>>6*(3-y)&63));if(e=r.charAt(64))for(;m.length%4;)m.push(e);return m.join("")},parse:function(m){var e=m.length,h=this.na,r=h.charAt(64);r&&(r=m.indexOf(r),-1!=r&&(e=r));for(var r=[],t=0,B=0;B<e;B++)B%4&&(r[t>>>2]|=(h.indexOf(m.charAt(B-1))<<
B%4*2|h.indexOf(m.charAt(B))>>>6-B%4*2)<<24-t%4*8,t++);return v.create(r,t)},na:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
(function(v){function m(g,e,h,c,d,a,b){g=g+(e&h|~e&c)+d+b;return(g<<a|g>>>32-a)+e}function e(g,e,h,c,d,a,b){g=g+(e&c|h&~c)+d+b;return(g<<a|g>>>32-a)+e}function h(g,e,h,c,d,a,b){g=g+(e^h^c)+d+b;return(g<<a|g>>>32-a)+e}function r(g,e,h,c,d,a,b){g=g+(h^(e|~c))+d+b;return(g<<a|g>>>32-a)+e}for(var t=D.u,B=t.H,y=t.ia,t=D.F,l=[],x=0;64>x;x++)l[x]=4294967296*v.abs(v.sin(x+1))|0;t=t.ja=y.extend({M:function(){this.o=new B.b([1732584193,4023233417,2562383102,271733878])},T:function(g,w){for(var t=0;16>t;t++){var c=
w+t,d=g[c];g[c]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}var t=this.o.c,c=g[w+0],d=g[w+1],a=g[w+2],b=g[w+3],G=g[w+4],v=g[w+5],x=g[w+6],y=g[w+7],B=g[w+8],T=g[w+9],R=g[w+10],S=g[w+11],K=g[w+12],F=g[w+13],J=g[w+14],da=g[w+15],f=t[0],u=t[1],q=t[2],p=t[3],f=m(f,u,q,p,c,7,l[0]),p=m(p,f,u,q,d,12,l[1]),q=m(q,p,f,u,a,17,l[2]),u=m(u,q,p,f,b,22,l[3]),f=m(f,u,q,p,G,7,l[4]),p=m(p,f,u,q,v,12,l[5]),q=m(q,p,f,u,x,17,l[6]),u=m(u,q,p,f,y,22,l[7]),f=m(f,u,q,p,B,7,l[8]),p=m(p,f,u,q,T,12,l[9]),q=m(q,p,f,u,R,17,
l[10]),u=m(u,q,p,f,S,22,l[11]),f=m(f,u,q,p,K,7,l[12]),p=m(p,f,u,q,F,12,l[13]),q=m(q,p,f,u,J,17,l[14]),u=m(u,q,p,f,da,22,l[15]),f=e(f,u,q,p,d,5,l[16]),p=e(p,f,u,q,x,9,l[17]),q=e(q,p,f,u,S,14,l[18]),u=e(u,q,p,f,c,20,l[19]),f=e(f,u,q,p,v,5,l[20]),p=e(p,f,u,q,R,9,l[21]),q=e(q,p,f,u,da,14,l[22]),u=e(u,q,p,f,G,20,l[23]),f=e(f,u,q,p,T,5,l[24]),p=e(p,f,u,q,J,9,l[25]),q=e(q,p,f,u,b,14,l[26]),u=e(u,q,p,f,B,20,l[27]),f=e(f,u,q,p,F,5,l[28]),p=e(p,f,u,q,a,9,l[29]),q=e(q,p,f,u,y,14,l[30]),u=e(u,q,p,f,K,20,l[31]),
f=h(f,u,q,p,v,4,l[32]),p=h(p,f,u,q,B,11,l[33]),q=h(q,p,f,u,S,16,l[34]),u=h(u,q,p,f,J,23,l[35]),f=h(f,u,q,p,d,4,l[36]),p=h(p,f,u,q,G,11,l[37]),q=h(q,p,f,u,y,16,l[38]),u=h(u,q,p,f,R,23,l[39]),f=h(f,u,q,p,F,4,l[40]),p=h(p,f,u,q,c,11,l[41]),q=h(q,p,f,u,b,16,l[42]),u=h(u,q,p,f,x,23,l[43]),f=h(f,u,q,p,T,4,l[44]),p=h(p,f,u,q,K,11,l[45]),q=h(q,p,f,u,da,16,l[46]),u=h(u,q,p,f,a,23,l[47]),f=r(f,u,q,p,c,6,l[48]),p=r(p,f,u,q,y,10,l[49]),q=r(q,p,f,u,J,15,l[50]),u=r(u,q,p,f,v,21,l[51]),f=r(f,u,q,p,K,6,l[52]),p=
r(p,f,u,q,b,10,l[53]),q=r(q,p,f,u,R,15,l[54]),u=r(u,q,p,f,d,21,l[55]),f=r(f,u,q,p,B,6,l[56]),p=r(p,f,u,q,da,10,l[57]),q=r(q,p,f,u,x,15,l[58]),u=r(u,q,p,f,F,21,l[59]),f=r(f,u,q,p,G,6,l[60]),p=r(p,f,u,q,S,10,l[61]),q=r(q,p,f,u,a,15,l[62]),u=r(u,q,p,f,T,21,l[63]);t[0]=t[0]+f|0;t[1]=t[1]+u|0;t[2]=t[2]+q|0;t[3]=t[3]+p|0},I:function(){var g=this.A,e=g.c,h=8*this.N,c=8*g.a;e[c>>>5]|=128<<24-c%32;var d=v.floor(h/4294967296);e[(c+64>>>9<<4)+15]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;e[(c+64>>>9<<
4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;g.a=4*(e.length+1);this.B();g=this.o;e=g.c;for(h=0;4>h;h++)c=e[h],e[h]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return g},clone:function(){var e=y.clone.call(this);e.o=this.o.clone();return e}});D.ja=y.L(t);D.ab=y.ka(t)})(Math);
(function(){var v=D.u,m=v.R,e=v.H,v=D.F,h=v.ha=m.extend({f:m.extend({G:4,Ua:v.ja,Va:1}),b:function(e){this.f=this.f.extend(e)},ta:function(h,m){for(var v=this.f,y=v.Ua.create(),l=e.create(),x=l.c,g=v.G,v=v.Va;x.length<g;){w&&y.update(w);var w=y.update(h).l(m);y.reset();for(var z=1;z<v;z++)w=y.l(w),y.reset();l.concat(w)}l.a=4*g;return l}});D.ha=function(e,m,v){return h.create(v).ta(e,m)}})();
D.u.Ga||function(v){function m(a,b,c){var d=this.ma;d?this.ma=v:d=this.qa;for(var e=0;e<c;e++)a[b+e]^=d[e]}var e=D,h=e.u,r=h.R,t=h.H,B=h.Fa,y=e.aa.Ca,l=e.F.ha,x=h.Ga=B.extend({f:r.extend(),Z:function(a,b){return this.create(this.S,a,b)},Y:function(a,b){return this.create(this.La,a,b)},b:function(a,b,c){this.f=this.f.extend(c);this.ra=a;this.Oa=b;this.reset()},reset:function(){B.reset.call(this);this.M()},jb:function(a){this.J(a);return this.B()},l:function(a){a&&this.J(a);return this.I()},G:4,xa:4,
S:1,La:2,L:function(a){return{encrypt:function(b,e,g){return("string"==typeof e?d:c).encrypt(a,b,e,g)},decrypt:function(b,e,g){return("string"==typeof e?d:c).decrypt(a,b,e,g)}}}});h.hb=x.extend({I:function(){return this.B(!0)},s:1});var g=e.mode={},w=(h.Ea=r.extend({Z:function(a,b){return this.ga.create(a,b)},Y:function(a,b){return this.fa.create(a,b)},b:function(a,b){this.K=a;this.ma=b}})).extend();w.ga=w.extend({O:function(a,b){var c=this.K,d=c.s;m.call(this,a,b,d);c.va(a,b);this.qa=a.slice(b,b+
d)}});w.fa=w.extend({O:function(a,b){var c=this.K,d=c.s,e=a.slice(b,b+d);c.ua(a,b);m.call(this,a,b,d);this.qa=e}});g=g.Xa=w;w=(e.ya={}).fb={ya:function(a,b){for(var c=4*b,c=c-a.a%c,d=c<<24|c<<16|c<<8|c,e=[],g=0;g<c;g+=4)e.push(d);c=t.create(e,c);a.concat(c)},Wa:function(a){a.a-=a.c[a.a-1>>>2]&255}};h.Da=x.extend({f:x.f.extend({mode:g,padding:w}),reset:function(){x.reset.call(this);var a=this.f,b=a.D,a=a.mode;if(this.ra==this.S)var c=a.Z;else c=a.Y,this.oa=1;this.Qa=c.call(a,this,b&&b.c)},T:function(a,
b){this.Qa.O(a,b)},I:function(){var a=this.f.padding;if(this.ra==this.S){a.ya(this.A,this.s);var b=this.B(!0)}else b=this.B(!0),a.Wa(b);return b},s:4});var z=h.Ya=r.extend({b:function(a){this.ca(a)},toString:function(a){return(a||this.Ta).stringify(this)}}),g=(e.format={}).Ia={stringify:function(a){var b=a.W;a=a.ea;return(a?t.create([1398893684,1701076831]).concat(a).concat(b):b).toString(y)},parse:function(a){a=y.parse(a);var b=a.c;if(1398893684==b[0]&&1701076831==b[1]){var c=t.create(b.slice(2,
4));b.splice(0,4);a.a-=16}return z.create({W:a,ea:c})}},c=h.gb=r.extend({f:r.extend({format:g}),encrypt:function(a,b,c,d){d=this.f.extend(d);var e=a.Z(c,d);b=e.l(b);e=e.f;return z.create({W:b,key:c,D:e.D,algorithm:a,mode:e.mode,padding:e.padding,s:a.s,Ta:d.format})},decrypt:function(a,b,c,d){d=this.f.extend(d);b=this.pa(b,d.format);return a.Y(c,d).l(b.W)},pa:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),e=(e.ba={}).Ia={wa:function(a,b,c,d){d||(d=t.random(8));a=l.create({G:b+c}).ta(a,
d);c=t.create(a.c.slice(b),4*c);a.a=4*b;return z.create({key:a,D:c,ea:d})}},d=h.eb=c.extend({f:c.f.extend({ba:e}),encrypt:function(a,b,d,e){e=this.f.extend(e);d=e.ba.wa(d,a.G,a.xa);e.D=d.D;a=c.encrypt.call(this,a,b,d.key,e);a.ca(d);return a},decrypt:function(a,b,d,e){e=this.f.extend(e);b=this.pa(b,e.format);d=e.ba.wa(d,a.G,a.xa,b.ea);e.D=d.D;return c.decrypt.call(this,a,b,d.key,e)}})}();
(function(){for(var v=D.u.Da,m=D.F,e=[],h=[],r=[],t=[],B=[],y=[],l=[],x=[],g=[],w=[],z=[],c=0;256>c;c++)z[c]=128>c?c<<1:c<<1^283;for(var d=0,a=0,c=0;256>c;c++){var b=a^a<<1^a<<2^a<<3^a<<4,b=b>>>8^b&255^99;e[d]=b;h[b]=d;var G=z[d],Y=z[G],ga=z[Y],H=257*z[b]^16843008*b;r[d]=H<<24|H>>>8;t[d]=H<<16|H>>>16;B[d]=H<<8|H>>>24;y[d]=H;H=16843009*ga^65537*Y^257*G^16843008*d;l[b]=H<<24|H>>>8;x[b]=H<<16|H>>>16;g[b]=H<<8|H>>>24;w[b]=H;d?(d=G^z[z[z[ga^G]]],a^=z[z[a]]):d=a=1}var pa=[0,1,2,4,8,16,32,64,128,27,54],
m=m.Ba=v.extend({M:function(){for(var a=this.Oa,b=a.c,c=a.a/4,a=4*((this.Ra=c+6)+1),d=this.Pa=[],h=0;h<a;h++)if(h<c)d[h]=b[h];else{var m=d[h-1];h%c?6<c&&4==h%c&&(m=e[m>>>24]<<24|e[m>>>16&255]<<16|e[m>>>8&255]<<8|e[m&255]):(m=m<<8|m>>>24,m=e[m>>>24]<<24|e[m>>>16&255]<<16|e[m>>>8&255]<<8|e[m&255],m^=pa[h/c|0]<<24);d[h]=d[h-c]^m}b=this.Na=[];for(c=0;c<a;c++)h=a-c,m=c%4?d[h]:d[h-4],b[c]=4>c||4>=h?m:l[e[m>>>24]]^x[e[m>>>16&255]]^g[e[m>>>8&255]]^w[e[m&255]]},va:function(a,b){this.la(a,b,this.Pa,r,t,B,y,
e)},ua:function(a,b){var c=a[b+1];a[b+1]=a[b+3];a[b+3]=c;this.la(a,b,this.Na,l,x,g,w,h);c=a[b+1];a[b+1]=a[b+3];a[b+3]=c},la:function(a,b,c,d,e,g,h,f){for(var l=this.Ra,m=a[b]^c[0],p=a[b+1]^c[1],r=a[b+2]^c[2],t=a[b+3]^c[3],v=4,w=1;w<l;w++)var x=d[m>>>24]^e[p>>>16&255]^g[r>>>8&255]^h[t&255]^c[v++],y=d[p>>>24]^e[r>>>16&255]^g[t>>>8&255]^h[m&255]^c[v++],z=d[r>>>24]^e[t>>>16&255]^g[m>>>8&255]^h[p&255]^c[v++],t=d[t>>>24]^e[m>>>16&255]^g[p>>>8&255]^h[r&255]^c[v++],m=x,p=y,r=z;x=(f[m>>>24]<<24|f[p>>>16&255]<<
16|f[r>>>8&255]<<8|f[t&255])^c[v++];y=(f[p>>>24]<<24|f[r>>>16&255]<<16|f[t>>>8&255]<<8|f[m&255])^c[v++];z=(f[r>>>24]<<24|f[t>>>16&255]<<16|f[m>>>8&255]<<8|f[p&255])^c[v++];t=(f[t>>>24]<<24|f[m>>>16&255]<<16|f[p>>>8&255]<<8|f[r&255])^c[v++];a[b]=x;a[b+1]=y;a[b+2]=z;a[b+3]=t},G:8});D.Ba=v.L(m)})();D.mode.Za=function(){var v=D.u.Ea.extend();v.ga=v.extend({O:function(m,e){this.K.va(m,e)}});v.fa=v.extend({O:function(m,e){this.K.ua(m,e)}});return v}();
})();
(function(){function q(b){c.each(d,function(a){if(a in h&&b in h[a]){var e=h[a][b];e.connected&&(e.connected=!1,e.socket.user_count--,c.events.fire(a+"leave",e))}})}function l(b,a,e,g,m){var d=k(a);c.publish({channel:d.channel,message:{name:b,ns:a,data:e,uuid:n,geo:d.location||[0,0]},callback:function(c){if(c[0])return(m||function(){})(c);var d=2*(g||500);setTimeout(function(){l(b,a,e,d,m)},5500<d?5500:d)}})}function p(b,a){var e=[];PUBNUB.each(b||[],function(b){a(b)&&e.push(b)});return e}function x(b,
a,e){var g=k(b);a.channel=g.channel;c.history(a,function(a){a[0]=p(a[0],function(a){return"message"==a.name&&a.ns==b});e(a)})}function u(b){b=b||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){socket.location=[a.coords.latitude,a.coords.longitude];b(socket.location)})||b([0,0])}function k(b){var a=d[b]||function(){return d[b]={namespace:b,connected:!1,users:h[b]={},user_count:1,get_user_list:function(){return d[b].users},get_user_count:function(){return d[b].user_count},
emit:function(a,c,d){l(a,b,c,0,d)},send:function(a,c){l("message",b,a,0,c)},on:function(a,d){"string"===typeof a?c.events.bind(b+a,d):"object"===typeof a&&c.each(a,function(a){c.events.bind(b+a,d)})},disconnect:function(){c.unsubscribe({channel:a.channel})},history:function(a,c){x(b,a,c)},here_now:function(a){var d=k(b);c.here_now({channel:d.channel},a)}}}();return a}var c=PUBNUB,v=0,n=PUBNUB.db.get("uuid")||c.uuid(function(b){PUBNUB.db.set("uuid",n=b)}),d={},h={},w=window.io={connected:{},connect:function(b,
a){function e(){var a=c.map(d,function(a){return a});l("ping",t,{nss:a,cuser:m})}var g=(b+"////").split("/");a=a||{};var m=a.user||{},r="presence"in a?a.presence:!0,p=g[2],t=(g[3]||"standard")+"-"+a.channel,g=a.channel,f=k(t);f.channel=g;f.password="GibberishAES"in window&&a.password;if(g in w.connected)return f;a.geo&&setInterval(u,15E3)&&u();a.uuid=n;a.origin=p;c=w.connected[g]=v?c:PUBNUB[f.password?"secure":"init"](a);v=1;f.disconnected=0;c.subscribe({channel:f.channel,disconnect:function(){f.disconnected||
(f.disconnected=1,c.each(d,function(a){c.events.fire(a+"disconnect",{})}))},reconnect:function(){c.disconnected=0},connect:function(a,b,g){f.disconnected=0;c.each(d,function(a){var b=k(a);b.connected||(b.connected=!0,c.events.fire(a+"connect",{}))});e()},presence:r&&function(a){"leave"===a.action&&q(a.uuid);"timeout"===a.action&&q(a.uuid);"join"===a.action&&e()},callback:function(a){f.disconnected&&c.each(d,function(a){c.events.fire(a+"reconnect",{})});f.disconnected=0;var b=a.data;a.ns in d&&b&&
c.events.fire(a.ns+a.name,b);a.uuid&&a.uuid!==n&&"ping"===a.name&&c.each(b.nss,function(d){h[d]=h[d]||{};var e=h[d][a.uuid]=h[d][a.uuid]||{geo:a.geo||[0,0],uuid:a.uuid,last:+new Date,socket:f,namespace:d,connected:!1,slot:f.user_count++};e.last=+new Date;e.data=b.cuser;e.connected||(c.events.fire(d+"join",e),e.connected=!0)})}});r&&(setInterval(e,3E4),e());return f}}})();
