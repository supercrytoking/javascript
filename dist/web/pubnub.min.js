!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PUBNUB=t():e.PUBNUB=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return"onLine"in navigator?navigator.onLine:null}function o(e){return navigator&&navigator.sendBeacon?void navigator.sendBeacon(e):!1}var s=n(1),a=r(s),u={get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t)}},c=function(e){console.log("setup",e),e.db=u,e.navigatorOnlineCheck=i,e.sendBeacon=o;var t=(0,a["default"])(e);return window.addEventListener("beforeunload",t.unloadTriggered),window.addEventListener("offline",t.offlineTriggered),t};e.exports=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=e.sendBeacon,n=e.db,r=e.shutdown,i=new u["default"](e);e.presenceAnnounceInterval&&i.setPresenceAnnounceInterval(e.presenceAnnounceInterval);var o=new l["default"],a={onMessage:e.onMessage,onStatus:e.onStatus,onPresence:e.onPresence};n.set(i.getSubscribeKey()+"uuid",i.getUUID());var c=new d["default"]({config:i}),h=new s["default"]({config:i,crypto:c,sendBeacon:t}),p=new f["default"]({networking:h}),g=new _["default"]({networking:h,state:o,callbacks:a}),y=new m["default"]({networking:h}),b=new C["default"]({networking:h,crypto:c}),k=new K["default"]({networking:h}),S=new A["default"]({publishQueue:p}),E=new x["default"]({networking:h,publishQueue:p}),P=new w["default"]({config:i,networking:h,state:o}),M=new O["default"]({config:i,networking:h}),T=new j["default"]({networking:h,callbacks:a,config:i,state:o}),I=new v["default"]({callbacks:a,state:o,presenceEndpoints:P}),B={accessManager:{grant:M.grant.bind(M),audit:M.audit.bind(M),revoke:M.revoke.bind(M)},channelGroups:{listGroups:k.listGroups.bind(k),deleteGroup:k.removeGroup.bind(k),listChannels:k.listChannels.bind(k),addChannel:k.addChannel.bind(k),removeChannel:k.addChannel.bind(k)},history:b.fetch.bind(b),time:y.fetch.bind(y),publish:S.publish.bind(S),subscribe:T.subscribe.bind(T),unsubscribe:T.unsubscribe.bind(T),presence:{hereNow:P.hereNow.bind(P),whereNow:P.whereNow.bind(P),getState:P.getState.bind(P),setState:P.setState.bind(P)},push:{addDeviceToPushChannel:E.addDeviceToPushChannel.bind(E),removeDeviceFromPushChannel:E.removeDeviceFromPushChannel.bind(E),send:E.send.bind(E)},getPresenceTimeout:i.getPresenceTimeout.bind(i),setPresenceTimeout:i.setPresenceTimeout.bind(i),getPresenceAnnounceInterval:i.getPresenceAnnounceInterval.bind(i),setPresenceAnnounceInterval:i.setPresenceAnnounceInterval.bind(i),setAuthKey:i.setAuthKey.bind(i),setUUID:i.setUUID.bind(i),getUUID:i.getUUID.bind(i),setCipherKey:i.setCipherKey.bind(i),getCipherKey:i.getCipherKey.bind(i),getSubscribedChannels:o.getSubscribedChannels.bind(o),stopTimers:function(){I.stop()},getVersion:function(){return D.version},shutdown:function(){B.stopTimers(),r&&r()}};return g.start(),I.start(),B}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=n(2),s=r(o),a=n(11),u=r(a),c=n(19),l=r(c),h=n(35),f=r(h),p=n(10),d=r(p),g=n(36),v=r(g),y=n(40),_=r(y),b=n(54),m=r(b),k=n(37),w=r(k),S=n(55),C=r(S),E=n(56),x=r(E),P=n(57),O=r(P),M=n(58),K=r(M),T=n(59),j=r(T),I=n(60),A=r(I),D=(n(14),n(61));t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=r(a),c=n(10),l=(r(c),n(16)),h=r(l),f=n(11),p=(r(f),n(17)),d=r(p),g=function(){function e(t){var n=t.config,r=t.crypto,o=t.sendBeacon;i(this,e),this._config=n,this._crypto=r,this._sendBeacon=o,this._r=new h["default"]("#networking"),this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(n.isSslEnabled()?"https://":"http://")+n.getOrigin(),this._coreParams={},this.shiftStandardOrigin(!1),this.shiftSubscribeOrigin(!1)}return s(e,[{key:"addCoreParam",value:function(e,t){this._coreParams[e]=t}},{key:"prepareParams",value:function(e){return e||(e={}),d["default"].each(this._coreParams,function(t,n){t in e||(e[t]=n)}),this._config.isInstanceIdEnabled()&&(e.instanceid=this._config.getInstanceId()),e}},{key:"nextOrigin",value:function(e){if(-1===this._providedFQDN.indexOf("pubsub."))return this._providedFQDN;var t=void 0;return e?t=d["default"].generateUUID().split("-")[0]:(this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),t=this._currentSubDomain.toString()),this._providedFQDN.replace("pubsub","ps"+t)}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"shiftSubscribeOrigin",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return this._subscribeOrigin=this.nextOrigin(e),this._subscribeOrigin}},{key:"fetchHistory",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));var r=[this.getStandardOrigin(),"v2","history","sub-key",this._config.getSubscribeKey(),"channel",d["default"].encode(e)],i=this.prepareParams(t);this._config.getAuthKey()&&(i.auth=this._config.getAuthKey()),this._xdr({data:i,callback:n,url:r})}},{key:"performChannelGroupOperation",value:function(e,t,n,r){if(!this._config.getSubscribeKey())return r(this._r.validationError("Missing Subscribe Key"));var i=[this.getStandardOrigin(),"v1","channel-registration","sub-key",this._config.getSubscribeKey(),"channel-group"];e&&"*"!==e&&i.push(e),"remove"===t&&i.push("remove");var o=this.prepareParams(n);this._config.getAuthKey()&&(o.auth=this._config.getAuthKey()),this._xdr({data:o,callback:r,url:i})}},{key:"provisionDeviceForPush",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));if(!this._config.getPublishKey())return n(this._r.validationError("Missing Publish Key"));var r=[this.getStandardOrigin(),"v1","push","sub-key",this._config.getSubscribeKey(),"devices",e],i=this.prepareParams(t);i.uuid=this._config.getUUID(),i.auth=this._config.getAuthKey(),this._xdr({data:i,url:r,callback:n})}},{key:"performGrant",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));if(!this._config.getPublishKey())return n(this._r.validationError("Missing Publish Key"));if(!this._config.getSecretKey())return n(this._r.validationError("Missing Secret Key"));var r=this._config.getSubscribeKey()+"\n"+this._config.getPublishKey()+"\ngrant\n",i=[this.getStandardOrigin(),"v1","auth","grant","sub-key",this._config.getSubscribeKey()];t.auth=e,t=this.prepareParams(t),r+=d["default"]._get_pam_sign_input_from_params(t);var o=this._crypto.HMACSHA256(r,this._config.getSecretKey());o=o.replace(/\+/g,"-"),o=o.replace(/\//g,"_"),t.signature=o,this._xdr({data:t,callback:n,url:i})}},{key:"performAudit",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));if(!this._config.getPublishKey())return n(this._r.validationError("Missing Publish Key"));if(!this._config.getSecretKey())return n(this._r.validationError("Missing Secret Key"));var r=this._config.getSubscribeKey()+"\n"+this._config.getPublishKey()+"\naudit\n";t.auth=e,t=this.prepareParams(t),r+=d["default"]._get_pam_sign_input_from_params(t);var i=this._crypto.HMACSHA256(r,this._config.getSecretKey());i=i.replace(/\+/g,"-"),i=i.replace(/\//g,"_"),t.signature=i;var o=[this.getStandardOrigin(),"v1","auth","audit","sub-key",this._config.getSubscribeKey()];this._xdr({data:t,callback:n,url:o})}},{key:"performHeartbeat",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));var r=this.prepareParams(t),i=[this.getStandardOrigin(),"v2","presence","sub-key",this._config.getSubscribeKey(),"channel",e,"heartbeat"];this._config.getAuthKey()&&(r.auth=this._config.getAuthKey()),this._config.getUUID()&&(r.uuid=this._config.getUUID()),this._config.isRequestIdEnabled()&&(r.requestid=d["default"].generateUUID()),this._xdr({data:r,callback:n,url:i})}},{key:"performLeave",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));var r=this.prepareParams(t),i=this.nextOrigin(!1),o=[i,"v2","presence","sub_key",this._config.getSubscribeKey(),"channel",d["default"].encode(e),"leave"];this._config.getAuthKey()&&(r.auth=this._config.getAuthKey()),this._config.getUUID()&&(r.uuid=this._config.getUUID()),this._config.useSendBeacon&&this._sendBeacon?this._sendBeacon(d["default"].buildURL(o,r)):this._xdr({data:r,callback:n,url:o})}},{key:"fetchTime",value:function(e){var t=this.prepareParams({}),n=[this.getStandardOrigin(),"time",0];this._config.getUUID()&&(t.uuid=this._config.getUUID()),this._config.getAuthKey()&&(t.auth=this._config.getAuthKey()),this._xdr({data:t,callback:e,url:n})}},{key:"fetchWhereNow",value:function(e,t){if(!this._config.getSubscribeKey())return t(this._r.validationError("Missing Subscribe Key"));var n=this.prepareParams({});this._config.getAuthKey()&&(n.auth=this._config.getAuthKey()),e||(e=this._config.getUUID());var r=[this.getStandardOrigin(),"v2","presence","sub-key",this._config.getSubscribeKey(),"uuid",d["default"].encode(e)];this._xdr({data:n,callback:t,url:r})}},{key:"fetchHereNow",value:function(e,t,n,r){if(!this._config.getSubscribeKey())return r(this._r.validationError("Missing Subscribe Key"));var i=this.Params(n);this._config.getUUID()&&(i.uuid=this._config.getUUID()),this._config.getAuthKey()&&(i.auth=this._config.getAuthKey());var o=[this.getStandardOrigin(),"v2","presence","sub-key",this._config.getSubscribeKey()];e&&(o.push("channel"),o.push(d["default"].encode(e))),t&&!e&&(o.push("channel"),o.push(",")),this._xdr({data:i,callback:r,url:o})}},{key:"setState",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));var r=this.s(t),i=[this.getStandardOrigin(),"v2","presence","sub-key",this._config.getSubscribeKey(),"channel",e,"uuid",this._config.getUUID(),"data"];this._config.getAuthKey()&&(r.auth=this._config.getAuthKey()),r.state=JSON.stringify(r.state),this._xdr({data:r,callback:n,url:i})}},{key:"fetchState",value:function(e,t,n,r){if(!this._config.getSubscribeKey())return r(this._r.validationError("Missing Subscribe Key"));e||(e=this._config.getUUID());var i=this.prepareParams(n),o=[this.getStandardOrigin(),"v2","presence","sub-key",this._config.getSubscribeKey(),"channel",t,"uuid",e];this._config.getAuthKey()&&(i.auth=this._config.getAuthKey()),this._xdr({data:i,callback:r,url:o})}},{key:"performPublish",value:function(e,t,n,r,i){if(!this._config.getSubscribeKey())return i(this._r.validationError("Missing Subscribe Key"));if(!this._config.getPublishKey())return i(this._r.validationError("Missing Publish Key"));var o=JSON.stringify(t),s=this._crypto.encrypt(o),a=[this.getStandardOrigin(),"publish",this._config.getPublishKey(),this._config.getSubscribeKey(),0,d["default"].encode(e),0],u=this.prepareParams(n);this._config.getUUID()&&(u.uuid=this._config.getUUID()),this._config.getAuthKey()&&(u.auth=this._config.getAuthKey()),"POST"===r?(u.message=d["default"].encode(s),this._postXDR({data:u,callback:i,url:a})):(a.push(d["default"].encode(s)),this._xdr({data:u,callback:i,url:a}))}},{key:"performSubscribe",value:function(e,t,n){if(!this._config.getSubscribeKey())return n(this._r.validationError("Missing Subscribe Key"));var r=[this.getSubscribeOrigin(),"v2","subscribe",this._config.getSubscribeKey(),d["default"].encode(e),0],i=this.prepareParams(t);this._config.getUUID()&&(i.uuid=this._config.getUUID()),this._config.getAuthKey()&&(i.auth=this._config.getAuthKey());var o=this._config.getSubscribeTimeout();return this._xdr({data:i,callback:n,url:r,timeout:o})}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"getSubscribeOrigin",value:function(){return this._subscribeOrigin}},{key:"_postXDR",value:function(e){var t=e.data,n=e.url,r=e.timeout,i=e.callback,o=u["default"].post(n.join("/")).send(t);return this._abstractedXDR(o,r,i)}},{key:"_xdr",value:function(e){var t=e.data,n=e.url,r=e.timeout,i=e.callback,o=u["default"].get(n.join("/")).query(t);return this._abstractedXDR(o,r,i)}},{key:"_abstractedXDR",value:function(e,t,n){return e.type("json").timeout(t||this._config.getTransactionTimeout()).end(function(e,t){if(e)return n(e,null);var r=JSON.parse(t.text);return"object"===("undefined"==typeof r?"undefined":o(r))&&r.error?n(r.error,null):"object"===("undefined"==typeof r?"undefined":o(r))&&r.payload?n(null,r.payload):void n(null,r)})}}]),e}();t["default"]=g},function(e,t,n){function r(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){if(!b(e))return e;var t=[];for(var n in e)null!=e[n]&&s(t,n,e[n]);return t.join("&")}function s(e,t,n){return Array.isArray(n)?n.forEach(function(n){s(e,t,n)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function a(e){for(var t,n,r={},i=e.split("&"),o=0,s=i.length;s>o;++o)n=i[o],t=n.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function u(e){var t,n,r,i,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;u>a;++a)n=o[a],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=k(n.slice(t+1)),s[r]=i;return s}function c(e){return/[\/+]json\b/.test(e)}function l(e){return e.split(/ *; */).shift()}function h(e){return y(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(n)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,n.callback(i,t)})}function d(e,t){var n=m("DELETE",e);return t&&n.end(t),n}var g,v=n(4),y=n(5),_=n(6),b=n(7);g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var m=e.exports=n(9).bind(null,p);m.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var k="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};m.serializeObject=o,m.parseString=a,m.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var n=h(t);for(var r in n)this[r]=n[r]},f.prototype.parseBody=function(e){var t=m.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},m.Response=f,v(p.prototype);for(var w in _)p.prototype[w]=_[w];p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.type=function(e){return this.set("Content-Type",m.types[e]||e),this},p.prototype.responseType=function(e){return this._responseType=e,this},p.prototype.accept=function(e){return this.set("Accept",m.types[e]||e),this},p.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},p.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){return this._formData||(this._formData=new g.FormData),this._formData.append(e,t,n||t.name),this},p.prototype.send=function(e){var t=b(e),n=this._header["content-type"];if(t&&b(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(n||this.type("json"),this)},p.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(e){var t=this,n=this.xhr=m.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(r){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var u=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=u);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=u)}catch(l){}if(s&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},s)),o&&(o=m.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var h=this._header["content-type"],f=this._parser||m.serialize[h?h.split(";")[0]:""];!f&&c(h)&&(f=m.serialize["application/json"]),f&&(a=f(a))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof a?a:null),this},m.Request=p,m.get=function(e,t,n){var r=m("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},m.head=function(e,t,n){var r=m("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},m.del=d,m["delete"]=d,m.patch=function(e,t,n){var r=m("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},m.post=function(e,t,n){var r=m("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},m.put=function(e,t,n){var r=m("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t){function n(e){return e?r(e):void 0}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t,n){for(var r=0,i=e.length,o=3==arguments.length?n:e[r++];i>r;)o=t.call(null,o,e[r],++r,e);return o}},function(e,t,n){var r=n(7),i=n(8);t.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},t.parse=function(e){return this._parser=e,this},t.timeout=function(e){return this._timeout=e,this},t.then=function(e,t){return this.end(function(n,r){n?t(n):e(r)})},t.use=function(e){return e(this),this},t.get=function(e){return this._header[e.toLowerCase()]},t.getHeader=t.get,t.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},t.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},t.field=function(e,t){return this._formData||(this._formData=new i),this._formData.append(e,t),this}},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){e.exports=FormData},function(e,t){function n(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),a=(r(s),n(15)),u=r(a),c=function(){function e(t){var n=t.config;i(this,e),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return o(e,[{key:"HMACSHA256",value:function(e){var t=u["default"].HmacSHA256(e,this._config.getSecretKey());return t.toString(u["default"].enc.Base64)}},{key:"SHA256",value:function(e){return u["default"].SHA256(e).toString(u["default"].enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?u["default"].enc.Base64.parse(e):"hex"===t.keyEncoding?u["default"].enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?u["default"].enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?u["default"].mode.ECB:u["default"].mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?u["default"].enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t){if(!this._config.getCipherKey())return e;t=this._parseOptions(t);var n=this._getIV(t),r=this._getMode(t),i=this._getPaddedKey(this._config.getCipherKey(),t),o=u["default"].AES.encrypt(e,i,{iv:n,mode:r}).ciphertext,s=o.toString(u["default"].enc.Base64);return s||e}},{key:"decrypt",value:function(e,t){if(!this._config.getCipherKey())return e;t=this._parseOptions(t);var n=this._getIV(t),r=this._getMode(t),i=this._getPaddedKey(this._config.getCipherKey(),t);try{var o=u["default"].enc.Base64.parse(e),s=u["default"].AES.decrypt({ciphertext:o},i,{iv:n,mode:r}).toString(u["default"].enc.Utf8),a=JSON.parse(s);return a}catch(c){return null}}}]),e}();t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),a=r(s),u=(n(14),function(){function e(t){i(this,e),this.setInstanceId(a["default"].v4()),this.setAuthKey(t.authKey||""),this.setSecretKey(t.secretKey||""),this.setSubscribeKey(t.subscribeKey),this.setPublishKey(t.publishKey),this.setCipherKey(t.cipherKey),this.setRequestIdConfig(t.useRequestId||!1),this.setSupressLeaveEvents(t.suppressLeaveEvents||!1),this.setInstanceIdConfig(t.useInstanceId||!1),this.setSslConfig(t.ssl||!1),this.setOrigin(t.origin||"pubsub.pubnub.com"),this.setTransactionTimeout(t.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(t.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(t.useSendBeacon||!0),this.setPresenceTimeout(t.presenceTimeout||300)}return o(e,[{key:"getSubscribeKey",value:function(){return this._subscribeKey}},{key:"setSubscribeKey",value:function(e){return this._subscribeKey=e,this}},{key:"getAuthKey",value:function(){return this._authKey}},{key:"setAuthKey",value:function(e){return this._authKey=e,this}},{key:"getPublishKey",value:function(){return this._publishKey}},{key:"setPublishKey",value:function(e){return this._publishKey=e,this}},{key:"getSecretKey",value:function(){return this._secretKey}},{key:"setSecretKey",value:function(e){return this._secretKey=e,this}},{key:"getCipherKey",value:function(){return this._cipherKey}},{key:"setCipherKey",value:function(e){return this._cipherKey=e,this}},{key:"getUUID",value:function(){return this._UUID}},{key:"setUUID",value:function(e){return this._UUID=e,this}},{key:"getInstanceId",value:function(){return this._instanceId}},{key:"setInstanceId",value:function(e){return this._instanceId=e,this}},{key:"isInstanceIdEnabled",value:function(){return this._useInstanceId}},{key:"setInstanceIdConfig",value:function(e){return this._useInstanceId=e,this}},{key:"isRequestIdEnabled",value:function(){return this._useRequestId}},{key:"setRequestIdConfig",value:function(e){return this._useRequestId=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSuppressingLeaveEvents",value:function(){return this._suppressLeaveEvents}},{key:"setSupressLeaveEvents",value:function(e){return this._suppressLeaveEvents=e,this}},{key:"isSslEnabled",value:function(){return this._sslEnabled}},{key:"setSslConfig",value:function(e){return this._sslEnabled=e,this}},{key:"getOrigin",value:function(){return this._customOrigin}},{key:"setOrigin",value:function(e){return this._customOrigin=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this._presenceAnnounceInterval=this._presenceTimeout/2-1,this}},{key:"getPresenceAnnounceInterval",value:function(){return this._presenceAnnounceInterval}},{key:"setPresenceAnnounceInterval",value:function(e){return this._presenceAnnounceInterval=e,this}}]),e}());t["default"]=u},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>i&&(t[r+i++]=c[e])});16>i;)t[r+i++]=0;return t}function i(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:p,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=a-d+(u-g)/1e4;if(0>c&&void 0===e.clockseq&&(s=s+1&16383),(0>c||a>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,g=u,p=s,a+=122192928e5;var l=(1e4*(268435455&a)+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var h=a/4294967296*1e4&268435455;o[r++]=h>>>8&255,o[r++]=255&h,o[r++]=h>>>24&15|16,o[r++]=h>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var v=e.node||f,y=0;6>y;y++)o[r+y]=v[y];return t?t:i(o)}function s(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;16>s;s++)t[r+s]=o[s];return t||i(o)}for(var a=n(13),u=[],c={},l=0;256>l;l++)u[l]=(l+256).toString(16).substr(1),c[u[l]]=l;var h=a(),f=[1|h[0],h[1],h[2],h[3],h[4],h[5]],p=16383&(h[6]<<8|h[7]),d=0,g=0,v=s;v.v1=o,v.v4=s,v.parse=r,v.unparse=i,e.exports=v},function(e,t){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);
n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict"},function(e,t){"use strict";var n=n||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;e>i;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*o,i=e.min(4*t,i),t){for(var u=0;t>u;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);!function(e){for(var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,r=t.algo,s=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var h;e:{h=c;for(var f=e.sqrt(h),p=2;f>=p;p++)if(!(h%p)){h=!1;break e}h=!0}h&&(8>l&&(s[l]=u(e.pow(c,.5))),a[l]=u(e.pow(c,1/3)),l++),c++}var d=[],r=r.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|e[t+f];else{var p=d[f-15],g=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[f]+d[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=c,c=u,u=s+p|0,s=o,o=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(r),t.HmacSHA256=o._createHmacHelper(r)}(Math),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,u=s.words,c=0;r>c;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;n>i;i+=3)for(var o=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&n>i+.75*s;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],o=0,s=0;n>s;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<2*(s%4),u=r.indexOf(e.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(a|u)<<24-8*(o%4),o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,s){return e=e+(t&n|~t&r)+i+s,(e<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,s){return e=e+(t&r|n&~r)+i+s,(e<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,s){return e=e+(t^n^r)+i+s,(e<<o|e>>>32-o)+t}function o(e,t,n,r,i,o,s){return e=e+(n^(t|~r))+i+s,(e<<o|e>>>32-o)+t}for(var s=n,a=s.lib,u=a.WordArray,c=a.Hasher,a=s.algo,l=[],h=0;64>h;h++)l[h]=4294967296*e.abs(e.sin(h+1))|0;a=a.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var s=0;16>s;s++){var a=n+s,u=e[a];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=e[n+0],u=e[n+1],c=e[n+2],h=e[n+3],f=e[n+4],p=e[n+5],d=e[n+6],g=e[n+7],v=e[n+8],y=e[n+9],_=e[n+10],b=e[n+11],m=e[n+12],k=e[n+13],w=e[n+14],S=e[n+15],C=s[0],E=s[1],x=s[2],P=s[3],C=t(C,E,x,P,a,7,l[0]),P=t(P,C,E,x,u,12,l[1]),x=t(x,P,C,E,c,17,l[2]),E=t(E,x,P,C,h,22,l[3]),C=t(C,E,x,P,f,7,l[4]),P=t(P,C,E,x,p,12,l[5]),x=t(x,P,C,E,d,17,l[6]),E=t(E,x,P,C,g,22,l[7]),C=t(C,E,x,P,v,7,l[8]),P=t(P,C,E,x,y,12,l[9]),x=t(x,P,C,E,_,17,l[10]),E=t(E,x,P,C,b,22,l[11]),C=t(C,E,x,P,m,7,l[12]),P=t(P,C,E,x,k,12,l[13]),x=t(x,P,C,E,w,17,l[14]),E=t(E,x,P,C,S,22,l[15]),C=r(C,E,x,P,u,5,l[16]),P=r(P,C,E,x,d,9,l[17]),x=r(x,P,C,E,b,14,l[18]),E=r(E,x,P,C,a,20,l[19]),C=r(C,E,x,P,p,5,l[20]),P=r(P,C,E,x,_,9,l[21]),x=r(x,P,C,E,S,14,l[22]),E=r(E,x,P,C,f,20,l[23]),C=r(C,E,x,P,y,5,l[24]),P=r(P,C,E,x,w,9,l[25]),x=r(x,P,C,E,h,14,l[26]),E=r(E,x,P,C,v,20,l[27]),C=r(C,E,x,P,k,5,l[28]),P=r(P,C,E,x,c,9,l[29]),x=r(x,P,C,E,g,14,l[30]),E=r(E,x,P,C,m,20,l[31]),C=i(C,E,x,P,p,4,l[32]),P=i(P,C,E,x,v,11,l[33]),x=i(x,P,C,E,b,16,l[34]),E=i(E,x,P,C,w,23,l[35]),C=i(C,E,x,P,u,4,l[36]),P=i(P,C,E,x,f,11,l[37]),x=i(x,P,C,E,g,16,l[38]),E=i(E,x,P,C,_,23,l[39]),C=i(C,E,x,P,k,4,l[40]),P=i(P,C,E,x,a,11,l[41]),x=i(x,P,C,E,h,16,l[42]),E=i(E,x,P,C,d,23,l[43]),C=i(C,E,x,P,y,4,l[44]),P=i(P,C,E,x,m,11,l[45]),x=i(x,P,C,E,S,16,l[46]),E=i(E,x,P,C,c,23,l[47]),C=o(C,E,x,P,a,6,l[48]),P=o(P,C,E,x,g,10,l[49]),x=o(x,P,C,E,w,15,l[50]),E=o(E,x,P,C,p,21,l[51]),C=o(C,E,x,P,m,6,l[52]),P=o(P,C,E,x,h,10,l[53]),x=o(x,P,C,E,_,15,l[54]),E=o(E,x,P,C,u,21,l[55]),C=o(C,E,x,P,v,6,l[56]),P=o(P,C,E,x,S,10,l[57]),x=o(x,P,C,E,d,15,l[58]),E=o(E,x,P,C,k,21,l[59]),C=o(C,E,x,P,f,6,l[60]),P=o(P,C,E,x,b,10,l[61]),x=o(x,P,C,E,c,15,l[62]),E=o(E,x,P,C,y,21,l[63]);s[0]=s[0]+C|0,s[1]=s[1]+E|0,s[2]=s[2]+x|0,s[3]=s[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=c._createHelper(a),s.HmacMD5=c._createHmacHelper(a)}(Math),function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,t=e.algo,o=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),s=o.words,a=n.keySize,n=n.iterations;s.length<a;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var c=1;n>c;c++)u=r.finalize(u),r.reset();o.concat(u)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=t.enc.Base64,u=t.algo.EvpKDF,c=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?g:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?g:d).decrypt(e,t,n,r)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},h=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;r>o;o++)t[n+o]^=i[o]},f=(r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();f.Encryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;h.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),f.Decryptor=f.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),h.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=f,f=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],s=0;n>s;s+=4)i.push(r);n=o.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:l,padding:f}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:n})}},d=r.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,p.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=o.random(8)),e=u.create({keySize:t+n}).compute(e,r),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,p.create({key:e,iv:n,salt:r})}},g=r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=d.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],u=[],c=[],l=[],h=[],f=[],p=[],d=[],g=0;256>g;g++)d[g]=128>g?g<<1:g<<1^283;for(var v=0,y=0,g=0;256>g;g++){var _=y^y<<1^y<<2^y<<3^y<<4,_=_>>>8^255&_^99;i[v]=_,o[_]=v;var b=d[v],m=d[b],k=d[m],w=257*d[_]^16843008*_;s[v]=w<<24|w>>>8,a[v]=w<<16|w>>>16,u[v]=w<<8|w>>>24,c[v]=w,w=16843009*k^65537*m^257*b^16843008*v,l[_]=w<<24|w>>>8,h[_]=w<<16|w>>>16,f[_]=w<<8|w>>>24,p[_]=w,v?(v=b^d[d[d[k^b]]],y^=d[d[y]]):v=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],o=0;e>o;o++)if(n>o)r[o]=t[o];else{var s=r[o-1];o%n?n>6&&4==o%n&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=S[o/n|0]<<24),r[o]=r[o-n]^s}for(t=this._invKeySchedule=[],n=0;e>n;n++)o=e-n,s=n%4?r[o]:r[o-4],t[n]=4>n||4>=o?s:l[i[s>>>24]]^h[i[s>>>16&255]]^f[i[s>>>8&255]]^p[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,p,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],p=4,d=1;u>d;d++)var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[p++],v=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^n[p++],y=r[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^n[p++],f=r[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[p++],c=g,l=v,h=y;g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[p++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[p++],y=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[p++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[p++],e[t]=g,e[t+1]=v,e[t+2]=y,e[t+3]=f},keySize:8});e.AES=t._createHelper(r)}(),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this._componentName=t}return i(e,[{key:"callback",value:function(e,t){if("object"===("undefined"==typeof e?"undefined":r(e))){if(e.error)return void this.error(e,t);if(e.payload)return void(e.next_page?t&&t(e.payload,e.next_page):t&&t(e.payload))}t&&t(e)}},{key:"error",value:function(e,t){if("object"===("undefined"==typeof e?"undefined":r(e))&&e.error){var n=_pick(e,["message","payload"]);return this._createError(t,n,"httpResultError")}return this._createError(t,{message:e},"httpResultError")}},{key:"validationError",value:function(e){return this._createError({message:e},"validationError")}},{key:"_createError",value:function(e,t){return e.component=this._componentName,e.type=t,e}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return+new Date}function o(){return"x"+ ++C+ +new Date}function s(e){return!!e&&"string"!=typeof e&&(Array.isArray&&Array.isArray(e)||"number"==typeof e.length)}function a(e,t){if(e&&t)if(s(e))for(var n=0,r=e.length;r>n;)t.call(e[n],e[n],n++);else for(var n in e)e.hasOwnProperty&&e.hasOwnProperty(n)&&t.call(e[n],n,e[n])}function u(e){return encodeURIComponent(e)}function c(e,t){var n=e.join(S.URLBIT),r=[];return t?(a(t,function(e,t){var n="object"===("undefined"==typeof t?"undefined":m(t))?JSON.stringify(t):t;"undefined"!=typeof t&&null!==t&&u(n).length>0&&r.push(e+"="+u(n))}),n+="?"+r.join(S.PARAMSBIT)):n}function l(e,t){return"undefined"!=typeof setTimeout?setTimeout(e,t):void 0}function h(e){var t=w["default"].v4();return e&&e(t),t}function f(e,t){var n=[];return a(e||[],function(e,r){n.push(t(e,r))}),n}function p(e){return encodeURIComponent(e).replace(/[!'()*~]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function d(e){var t=[];return a(e,function(e){t.push(e)}),t}function g(e){return d(e).sort()}function v(e){var t=g(e);return f(t,function(t){return t+"="+p(e[t])}).join("&")}function y(e,t,n){var r=!1;if("undefined"==typeof e)return t;if("number"==typeof e)r=!(e>S._minimumHeartbeatInterval||0===e);else{if("boolean"==typeof e)return e?S._defaultHeartbeatInterval:0;r=!0}if(r){if(n){var i="Presence Heartbeat value invalid. Valid range ( x >";i+=S._minimumHeartbeatInterval+" or x = 0). Current Value : ",i+=t||S._minimumHeartbeatInterval,n(i)}return t||S._minimumHeartbeatInterval}return e}function _(e,t,n){if("undefined"!=typeof e[t]){var r=e[t];e[n]=r,delete e[t]}return!0}function b(e){return e.o&&(_(e.o,"t","timetoken"),_(e.o,"r","regionCode")),e.p&&(_(e.p,"t","timetoken"),_(e.p,"r","regionCode")),_(e,"a","shard"),_(e,"b","subscriptionMatch"),_(e,"c","channel"),_(e,"d","payload"),_(e,"ear","eatAfterReading"),_(e,"f","flags"),_(e,"i","issuing_client_id"),_(e,"k","subscribeKey"),_(e,"s","sequenceNumber"),_(e,"o","originationTimetoken"),_(e,"p","publishTimetoken"),_(e,"r","replicationMap"),_(e,"u","userMetadata"),_(e,"w","waypointList"),e}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},k=n(12),w=r(k),S=n(18),C=1;e.exports={v2ExpandKeys:b,buildURL:c,encode:u,each:a,rnow:i,isArray:s,map:f,pamEncode:p,generateUUID:h,timeout:l,_get_pam_sign_input_from_params:v,_object_to_key_list_sorted:g,_object_to_key_list:d,validateHeartbeat:y,unique:o}},function(e,t){e.exports={PARAMSBIT:"&",URLBIT:"/",defaultHeartbeatInterval:30,minimumHeartbeatInterval:5,PRESENCE_SUFFIX:"-pnpres",SECOND:1e3}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(20),a=r(s),u=function(){function e(){i(this,e),this._channelStorage={},this._channelGroupStorage={},this._presenceState={},this._eventEmitter=new a["default"],this._subscribeTimeToken="0",this.filterExpression=""}return o(e,[{key:"containsChannel",value:function(e){return e in this._channelStorage}},{key:"containsChannelGroup",value:function(e){return e in this._channelGroupStorage}},{key:"getChannel",value:function(e){return this._channelStorage[e]}},{key:"getChannelGroup",value:function(e){return this._channelGroupStorage[e]}},{key:"addChannel",value:function(e,t){this._channelStorage[e]=t}},{key:"removeChannel",value:function(e){delete this._channelStorage[e]}},{key:"addChannelGroup",value:function(e,t){this._channelGroupStorage[e]=t}},{key:"removeFromPresenceState",value:function(e){delete this._presenceState[e]}},{key:"isInPresenceState",value:function(e){return e in this._presenceState}},{key:"removeChannelGroup",value:function(e){delete this._channelGroupStorage[e]}},{key:"addToPresenceState",value:function(e,t){this._presenceState[e]=t}},{key:"getPresenceState",value:function(){return this._presenceState}},{key:"setSubscribeTimeToken",value:function(e){this._subscribeTimeToken=e}},{key:"getSubscribeTimeToken",value:function(){return this._subscribeTimeToken}},{key:"onStateChange",value:function(e){this._eventEmitter.on("onStateChange",e)}},{key:"onSubscriptionChange",value:function(e){this._eventEmitter.on("onSubscriptionChange",e)}},{key:"onPresenceConfigChange",value:function(e){this._eventEmitter.on("onPresenceConfigChange",e)}},{key:"announceStateChange",value:function(){this._eventEmitter.emit("onStateChange")}},{key:"announceSubscriptionChange",value:function(){this._subscribeTimeToken="0",this._eventEmitter.emit("onSubscriptionChange")}},{key:"announcePresenceConfigChange",value:function(){this._eventEmitter.emit("onPresenceConfigChange")}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channelStorage)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroupStorage)}},{key:"getChannelsWithPresence",value:function(){var e=this,t=[];return Object.keys(this._channelStorage).forEach(function(n){var r=e._channelStorage[n];r.enablePresence===!0&&t.push(n)}),t}},{key:"getChannelGroupsWithPresence",value:function(){var e=this,t=[];return Object.keys(this._channelGroupStorage).forEach(function(n){var r=e._channelGroupStorage[n];r.enablePresence===!0&&t.push(n)}),t}}]),e}();t["default"]=u},function(e,t,n){"use strict";var r,i,o,s,a,u,c,l=n(21),h=n(34),f=Function.prototype.apply,p=Function.prototype.call,d=Object.create,g=Object.defineProperty,v=Object.defineProperties,y=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return h(t),y.call(this,"__ee__")?n=this.__ee__:(n=_.value=d(null),g(this,"__ee__",_),_.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return h(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(h(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},s=function(e){var t,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;n>t;++t)o[t-1]=arguments[t];f.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},u={on:l(r),once:l(i),off:l(o),emit:l(s)},c=v({},u),e.exports=t=function(e){return null==e?d(c):v(Object(e),u)},t.methods=a},function(e,t,n){"use strict";var r,i=n(22),o=n(29),s=n(30),a=n(31);r=e.exports=function(e,t){var n,r,s,u,c;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=s=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),s=a.call(e,"w")),c={value:t,configurable:n,enumerable:r,writable:s},u?i(o(u),c):c},r.gs=function(e,t,n){var r,u,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:s(t)?null==n?n=void 0:s(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(r=!0,u=!1):(r=a.call(e,"c"),u=a.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:u},c?i(o(c),l):l}},function(e,t,n){"use strict";e.exports=n(23)()?Object.assign:n(24)},function(e,t){"use strict";e.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(25),i=n(28),o=Math.max;e.exports=function(e,t){var n,s,a,u=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},s=1;u>s;++s)t=arguments[s],r(t).forEach(a);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(26)()?Object.keys:n(27)},function(e,t){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t){"use strict";var n=Object.keys;e.exports=function(e){return n(null==e?e:Object(e))}},function(e,t){"use strict";e.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create,i=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=r(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},function(e,t){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";e.exports=n(32)()?String.prototype.contains:n(33)},function(e,t){"use strict";var n="razdwatrzy";e.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(e,t){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),function c(){i(this,c)}),u=function(){function e(t){var n=t.networking,r=t.parallelPublish,o=void 0===r?!1:r;i(this,e),this._publishQueue=[],this._networking=n,this._parallelPublish=o,this._isSending=!1}return o(e,[{key:"newQueueable",value:function(){return new a}},{key:"queueItem",value:function(e){this._publishQueue.push(e),this._sendNext()}},{key:"_sendNext",value:function(){return 0!==this._publishQueue.length?this._parallelPublish?this.__publishNext():void(this._isSending||(this._isSending=!0,this.__publishNext())):void 0}},{key:"__publishNext",value:function(){var e=this,t=this._publishQueue.shift(),n=t.channel,r=t.payload,i=t.params,o=t.httpMethod,s=t.callback,a=function(t,n){e._isSending=!1,e._sendNext(),s(t,n)};this._networking.performPublish(n,r,i,o,a)}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(19),a=(r(s),n(37)),u=(r(a),n(38)),c=r(u),l=(n(14),n(18)),h=function(){function e(t){var n=t.state,r=t.presence,o=t.callbacks;i(this,e),this._state=n,this._presence=r,this._callbacks=o,this._state.onPresenceConfigChange(this.start.bind(this)),this._state.onSubscriptionChange(this.start.bind(this)),this._state.onStateChange(this.start.bind(this)),this._l=c["default"].getLogger("#iterators/presence_heartbeat")}return o(e,[{key:"start",value:function(){this._l.debug("(re-)starting presence heartbeat"),this.stop(),this.__periodicHeartbeat()}},{key:"stop",value:function(){this._l.debug("stopping presence heartbeat"),clearTimeout(this._intervalId),this._intervalId=null}},{key:"__periodicHeartbeat",value:function(){var e=this,t=this._callbacks.onStatus,n=this._state.getPresenceAnnounceInterval()*l.SECOND;return this._state.getPresenceAnnounceInterval()<1||this._state.getPresenceAnnounceInterval()>500?void this._l.debug("interval is greater than 500 or below 1; aborting"):0===this._state.getChannelsWithPresence().length&&0===this._state.getChannelGroupsWithPresence().length?void this._l.debug("there are no channels / channel groups to heartbeat; aborting"):void this._presence.heartbeat(function(r){e._intervalId=setTimeout(e.__periodicHeartbeat,n),r&&t({type:"heartbeatFailure",message:"Presence Heartbeat unable to reach Pubnub servers",rawError:r})})}}]),e}();t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(19)),u=(r(a),n(38)),c=r(u),l=n(16),h=r(l),f=function(){function e(t){var n=t.networking,r=t.state;i(this,e),this._networking=n,this._state=r,this._r=new h["default"]("#endpoints/presence"),this._l=c["default"].getLogger("#endpoints/presence")}return o(e,[{key:"hereNow",value:function(e,t){var n=e.channels,r=void 0===n?[]:n,i=e.channelGroups,o=void 0===i?[]:i,s=e.uuids,a=void 0===s?!0:s,u=e.state,c={};if(a||(c.disable_uuids=1),u&&(c.state=1),!t)return this._l.error("Missing Callback");o.length>0&&(c["channel-group"]=o.join(","));var l=r.length>0?r.join(","):null,h=o.length>0?o.join(","):null;this._networking.fetchHereNow(l,h,c,t)}},{key:"whereNow",value:function(e,t){var n=e.uuid;return t?void this._networking.fetchWhereNow(n,t):this._l.error("Missing Callback")}},{key:"getState",value:function(e,t){var n=e.uuid,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,s=void 0===o?[]:o,a={};if(!t)return this._l.error("Missing Callback");if(0===i.length&&0===s.length)return t(this._r.validationError("Channel or Channel Group must be supplied"));s.length>0&&(a["channel-group"]=s.join(","));var u=i.length>0?i.join(","):",";this._networking.fetchState(n,u,a,t)}},{key:"setState",value:function(e,t){var n=this,r=e.state,i=e.channels,o=void 0===i?[]:i,s=e.channelGroups,a=void 0===s?[]:s,u={},c=[],l=[];if(!t)return this._l.error("Missing Callback");if(0===o.length&&0===a.length)return t(this._r.validationError("Channel or Channel Group must be supplied"));if(!r)return t(this._r.validationError("State must be supplied"));if(u.state=r,o.forEach(function(e){n._state.getChannel(e)&&(n._state.addToPresenceState(e,r),c.push(e))}),a.forEach(function(e){n._state.getChannelGroup(e)&&(n._state.addToPresenceState(e,r),l.push(e))}),0===c.length&&0===l.length)return t(this._r.validationError("No subscriptions exists for the states"));l.length>0&&(u["channel-group"]=l.join(","));
var h=c.length>0?c.join(","):",";this._networking.setState(h,u,function(e,r){return e?t(e,r):(n._state.announceStateChange(),t(e,r))})}},{key:"heartbeat",value:function(e){var t={state:JSON.stringify(this._state.getPresenceState()),heartbeat:this._state.getPresenceTimeout()},n=this._state.getSubscribedChannels(),r=this._state.getSubscribedChannelGroups();r.length>0&&(t["channel-group"]=r.join(","));var i=n.length>0?n.join(","):",";this._networking.performHeartbeat(i,t,e)}}]),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(39),a=r(s),u=function(){function e(t){i(this,e),this._moduleName=t}return o(e,[{key:"__commonLogger",value:function(e,t){a["default"][e]({component:this._moduleName,data:t,timestamp:new Date})}},{key:"error",value:function(e){this.__commonLogger("error",e)}},{key:"debug",value:function(e){this.__commonLogger("debug",e)}}]),e}();t["default"]={getLogger:function(e){return new u(e)}}},function(e,t,n){var r,i;!function(o,s){"use strict";"object"==typeof e&&e.exports?e.exports=s():(r=s,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i)))}(this,function(){"use strict";function e(e){return typeof console===a?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):s}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==a&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<u.length;n++){var r=u[n];this[r]=e>n?s:this.methodFactory(r,e,t)}}function i(t,r,i){return e(t)||n.apply(this,arguments)}function o(e,t,n){function o(e){var t=(u[e]||"silent").toUpperCase();try{return void(window.localStorage[h]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(h)+"="+t+";"}catch(n){}}function s(){var e;try{e=window.localStorage[h]}catch(t){}if(typeof e===a)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(h)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===l.levels[e]&&(e=void 0),e}var c,l=this,h="loglevel";e&&(h+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||i,l.getLevel=function(){return c},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return c=t,n!==!1&&o(t),r.call(l,t,e),typeof console===a&&t<l.levels.SILENT?"No console available for logging":void 0},l.setDefaultLevel=function(e){s()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var f=s();null==f&&(f=null==t?"WARN":t),l.setLevel(f,!1)}var s=function(){},a="undefined",u=["trace","debug","info","warn","error"],c=new o,l={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new o(e,c.getLevel(),c.methodFactory)),t};var h=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=h),c},c})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(19)),u=(r(a),n(38)),c=r(u),l=n(3),h=(r(l),n(18)),f=r(h),p=n(17),d=r(p),g=n(41),v=r(g),y=(n(14),function(){function e(t){var n=t.networking,r=t.state,o=t.callbacks;i(this,e),this._networking=n,this._state=r,this._callbacks=o,this._l=c["default"].getLogger("#iterator/subscriber"),this._state.onPresenceConfigChange(this.start.bind(this)),this._state.onSubscriptionChange(this.start.bind(this)),this._state.onStateChange(this.start.bind(this))}return o(e,[{key:"start",value:function(){var e=this;this.stop();var t=[],n=[],r={};if(this._state.getSubscribedChannels().forEach(function(n){var r=e._state.getChannel(n);t.push(r.name),r.enablePresence&&t.push(r.name+f["default"].PRESENCE_SUFFIX)}),this._state.getSubscribedChannelGroups().forEach(function(t){var r=e._state.getChannelGroup(t);n.push(r.name),r.enablePresence&&n.push(r.name+f["default"].PRESENCE_SUFFIX)}),0===t.length&&0===n.length)return void this._l.debug("channelList and channelGroupList is empty, aborting");var i=t.length>0?t.join(","):",",o=this.__handleSubscribeResponse.bind(this);r.tt=this._state.getSubscribeTimeToken(),n.length>0&&(r["channel-group"]=n.join(",")),this._state.filterExpression&&""!==this._state.filterExpression&&(r["filter-expr"]=this._state.filterExpression),this._state.subscribeRegion&&""!==this._state.subscribeRegion&&(r.tr=this._state.subscribeRegion),(this._state.getChannelsWithPresence().length>0||this._state.getChannelGroupsWithPresence().length>0)&&(r.state=JSON.stringify(this._state.getPresenceState()),r.heartbeat=this._state.getPresenceTimeout()),this._runningSuperagent=this._networking.performSubscribe(i,r,o)}},{key:"__handleSubscribeResponse",value:function(e,t){if(e)return void this.start();var n=this._callbacks,r=n.onMessage,i=n.onPresence,o=t.m?t.m:[],s=t.t.t,a=t.t.r;o.forEach(function(e){var t=!1,n=d["default"].v2ExpandKeys(e);n.channel&&(0,v["default"])(n.channel,f["default"].PRESENCE_SUFFIX)&&(t=!0,n.channel=n.channel.replace(f["default"].PRESENCE_SUFFIX,"")),n.subscriptionMatch&&(0,v["default"])(n.subscriptionMatch,f["default"].PRESENCE_SUFFIX)&&(t=!0,n.subscriptionMatch=n.subscriptionMatch.replace(f["default"].PRESENCE_SUFFIX,"")),t?i(n):r(n)}),this._state.setSubscribeTimeToken(s),this._state.subscribeRegion=a,this.start()}},{key:"stop",value:function(){this._runningSuperagent&&(this._runningSuperagent.abort(),this._runningSuperagent=null)}}]),e}());t["default"]=y},function(e,t,n){function r(e,t,n){e=s(e),t="string"==typeof t?t:t+"";var r=e.length;return n=void 0===n?r:i(o(n),0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}var i=n(42),o=n(43),s=n(47);e.exports=r},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=n>=e?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=i(e),e===o||e===-o){var t=0>e?-1:1;return t*s}var n=e%1;return e===e?n?e-n:e:0}var i=n(44),o=1/0,s=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if(o(e)){var t=i(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=c.test(e);return n||l.test(e)?h(e.slice(2),n?2:8):u.test(e)?s:+e}var i=n(45),o=n(46),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,h=parseInt;e.exports=r},function(e,t,n){function r(e){var t=i(e)?u.call(e):"";return t==o||t==s}var i=n(46),o="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,u=a.toString;e.exports=r},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e){if("string"==typeof e)return e;if(null==e)return"";if(o(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var i=n(48),o=n(52),s=1/0,a=i?i.prototype:void 0,u=a?a.toString:void 0;e.exports=r},function(e,t,n){var r=n(49),i=r.Symbol;e.exports=i},function(e,t,n){(function(e,r){var i=n(51),o={"function":!0,object:!0},s=o[typeof t]&&t&&!t.nodeType?t:void 0,a=o[typeof e]&&e&&!e.nodeType?e:void 0,u=i(s&&a&&"object"==typeof r&&r),c=i(o[typeof self]&&self),l=i(o[typeof window]&&window),h=i(o[typeof this]&&this),f=u||l!==(h&&h.window)&&l||c||h||Function("return this")();e.exports=f}).call(t,n(50)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&a.call(e)==o}var i=n(53),o="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),function(){function e(t){var n=t.networking;i(this,e),this._networking=n}return o(e,[{key:"fetch",value:function(e){this._networking.fetchTime(function(t,n){return t?e(t):void e(null,n[0])})}}]),e}());t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(10)),u=(r(a),n(16)),c=r(u),l=n(38),h=r(l),f=function(){function e(t){var n=t.networking,r=t.crypto;i(this,e),this._networking=n,this._crypto=r,this._r=new c["default"]("#endpoints/history"),this._l=h["default"].getLogger("#endpoints/history")}return o(e,[{key:"fetch",value:function(e,t){var n=this,r=e.channel,i=e.channelGroup,o=e.start,s=e.end,a=e.includeToken,u=e.count||e.limit||100,c=e.reverse||"false",l=e.stringMessageToken||!1;if(!r&&!i)return t(this._r.validationError("Missing channel and/or channel group"));if(!t)return this._l.error("Missing Callback");var h={count:u,reverse:c,stringtoken:"true"};i&&(h["channel-group"]=i,r||(r=",")),o&&(h.start=o),s&&(h.end=s),a&&(h.include_token="true"),l&&(h.string_message_token="true"),this._networking.fetchHistory(r,h,function(e,r){return e?t(e,null):void t(null,n._parseResponse(r,a))})}},{key:"_parseResponse",value:function(e,t){var n=this,r=e[0],i=[];return r.forEach(function(e){if(t){var r=n._crypto.decrypt(e.message),o=e.timetoken;try{i.push({timetoken:o,message:JSON.parse(r)})}catch(s){i.push({timetoken:o,message:r})}}else{var a=n._crypto.decrypt(e);try{i.push(JSON.parse(a))}catch(s){i.push(a)}}}),[i,e[1],e[2]]}}]),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(35)),u=(r(a),n(16)),c=r(u),l=function(){function e(t){var n=t.networking,r=t.publishQueue;i(this,e),this._networking=n,this._publishQueue=r,this._r=new c["default"]("endpoints/push")}return o(e,[{key:"addDeviceToPushChannel",value:function(e,t){var n=e.pushGateway,r=e.device,i=e.channel,o={operation:"add",pushGateway:n,device:r,channel:i};this.__provisionDevice(o,t)}},{key:"removeDeviceFromPushChannel",value:function(e,t){var n=e.pushGateway,r=e.device,i=e.channel,o={operation:"remove",pushGateway:n,device:r,channel:i};this.__provisionDevice(o,t)}},{key:"send",value:function(e,t){var n=e.apns,r=e.gcm,i=e.mpns,o=e.channel,s={},a=this._publishQueue.newQueueable();return o?n||r||i?(n&&(s.pn_apns=n),r&&(s.pn_gcm=r),i&&(s.pn_mpns=i),a.payload=s,a.channel=o,a.params={},a.httpMethod="GET",a.callback=t,void this._publishQueue.queueItem(a)):t(this._r.validationError("Missing Push Payload (apns, gcm, mpns)")):t(this._r.validationError("Missing Push Channel (channel)"))}},{key:"__provisionDevice",value:function(e,t){var n=e.operation,r=e.pushGateway,i=e.device,o=e.channel;if(!i)return t(this._r.validationError("Missing Device ID (device)"));if(!r)return t(this._r.validationError("Missing GW Type (pushGateway: gcm or apns)"));if(!n)return t(this._r.validationError("Missing GW Operation (operation: add or remove)"));if(!o)return t(this._r.validationError("Missing gw destination Channel (channel)"));var s={type:r};"add"===n?s.add=o:"remove"===n&&(s.remove=o),this._networking.provisionDeviceForPush(i,s,t)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(38)),u=r(a),c=n(16),l=r(c),h=function(){function e(t){var n=t.networking;i(this,e),this._networking=n,this._r=new l["default"]("#endpoints/PAM"),this._l=u["default"].getLogger("#endpoints/PAM")}return o(e,[{key:"revoke",value:function(e,t){e.read=!1,e.write=!1,this.grant(e,t)}},{key:"grant",value:function(e,t){var n=e.channels,r=void 0===n?[]:n,i=e.channelGroups,o=void 0===i?[]:i,s=e.ttl,a=e.read,u=e.write,c=e.manage,l=e.authKeys,h=void 0===l?[]:l,f=a?"1":"0",p=u?"1":"0",d=c?"1":"0";if(!t)return this._l.error("Missing Callback");var g=Math.floor((new Date).getTime()/1e3),v={w:p,r:f,timestamp:g};"undefined"!=typeof c&&(v.m=d),r.length>0&&(v.channel=r.join(",")),o.length>0&&(v["channel-group"]=o.join(",")),(s||0===s)&&(v.ttl=s);var y=h.length>0?h.join(","):null;this._networking.performGrant(y,v,t)}},{key:"audit",value:function(e,t){var n=e.channels,r=void 0===n?[]:n,i=e.channelGroups,o=void 0===i?[]:i,s=e.authKeys,a=void 0===s?[]:s;if(!t)return this._l.error("Missing Callback");var u=Math.floor((new Date).getTime()/1e3),c={timestamp:u};r.length>0&&(c.channel=r.join(",")),o.length>0&&(c["channel-group"]=o.join(","));var l=a.length>0?a.join(","):null;this._networking.performAudit(l,c,t)}}]),e}();t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(38)),u=r(a),c=n(16),l=r(c),h=function(){function e(t){var n=t.networking;i(this,e),this._networking=n,this._r=new l["default"]("#endpoints/history"),this._l=u["default"].getLogger("#endpoints/history")}return o(e,[{key:"channelGroup",value:function t(e,n){var t=e.channelGroup,r=e.channels,i=void 0===r?[]:r,o="",s={},a=e.mode||"add";if(t){var u=t.split(":");o=u.length>1?u[1]:u[0]}i.length>0&&(s[a]=i.join(",")),this._networking.performChannelGroupOperation(o,a,s,n)}},{key:"listChannels",value:function(e,t){return e.channelGroup?void this.channelGroup(e,t):t(this._r.validationError("Missing Channel Group"))}},{key:"deleteGroup",value:function(e,t){var n="Use removeChannel to remove a channel from a group.";return e.channelGroup?e.channel?t(this._r.validationError(n)):(e.mode="remove",void this.channelGroup(e,t)):t(this._r.validationError("Missing Channel Group"))}},{key:"listGroups",value:function(e,t){this.channelGroup(e,t)}},{key:"addChannels",value:function(e,t){var n=e.channelGroup,r=e.channels,i=void 0===r?[]:r;return n?0===i.length?t(this._r.validationError("Missing Channel")):(e.mode="add",void this.channelGroup(e,t)):t(this._r.validationError("Missing Channel Group"))}},{key:"removeChannels",value:function(e,t){var n=e.channelGroup,r=e.channels,i=void 0===r?[]:r;return n?0===i.length?t(this._r.validationError("Missing Channel")):(e.mode="remove",void this.channelGroup(e,t)):t(this._r.validationError("Missing Channel Group"))}}]),e}();t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=(r(s),n(11)),u=(r(a),n(19)),c=(r(u),n(16)),l=r(c),h=n(38),f=r(h),p=(n(14),function(){function e(t){var n=t.networking,r=t.config,o=t.state,s=t.callbacks;i(this,e),this._networking=n,this._config=r,this._state=o,this._callbacks=s,this._r=new l["default"]("#endpoints/subscribe"),this._l=f["default"].getLogger("#endpoints/subscribe")}return o(e,[{key:"unsubscribe",value:function(e){var t=this,n=this._callbacks.onStatus,r=e.channels,i=void 0===r?[]:r,o=e.channelGroups,s=void 0===o?[]:o,a=[],u=[],c={};if(!n)return this._l.error("Missing onStatus Callback");if(0===i.length&&0===s.length)return n(this._r.validationError("Missing Channel or Channel Group"));if(i&&i.forEach(function(e){t._state.containsChannel(e)&&a.push(e)}),s&&s.forEach(function(e){t._state.containsChannelGroup(e)&&u.push(e)}),0===a.length&&0===u.length)return n(this._r.validationError("already unsubscribed from all channel / channel groups"));var l=a.length>0?a.join(","):",";u.length>0&&(c["channel-group"]=u.join(",")),this._networking.performLeave(l,c,function(e,r){return e?n(e,null):(t._postUnsubscribeCleanup(a,u),t._state.setSubscribeTimeToken("0"),t._state.announceSubscriptionChange(),void n(null,{action:"unsubscribe",status:"finished",response:r}))})}},{key:"_postUnsubscribeCleanup",value:function(e,t){var n=this;e.forEach(function(e){n._state.removeChannel(e),n._state.removeFromPresenceState(e)}),t.forEach(function(e){n._state.removeChannelGroup(e),n._state.removeFromPresenceState(e)})}},{key:"subscribe",value:function(e){var t=this,n=e.channels,r=void 0===n?[]:n,i=e.channelGroups,o=void 0===i?[]:i,s=e.enablePresence,a=void 0===s?!1:s,u=e.filterExpression,c=this._callbacks.onStatus;return 0===r.length&&0===o.length?c(this._r.validationError("Missing Channel or Channel Group")):(r.forEach(function(e){t._state.addChannel(e,{name:e,enablePresence:a})}),o.forEach(function(e){t._state.addChannelGroup(e,{name:e,enablePresence:a})}),this._state.filterExpression="",u&&(this._state.filterExpression=u),void this._state.announceSubscriptionChange())}}]),e}());t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(35),u=(r(a),n(16)),c=r(u),l=n(38),h=r(l),f=function(){function e(t){var n=t.publishQueue;i(this,e),this._publishQueue=n,this._r=new c["default"]("#endpoints/publish"),this._l=h["default"].getLogger("#endpoints/publish")}return s(e,[{key:"publish",value:function(e,t){var n=e.message,r=e.channel,i=e.meta,s=e.sendByPost,a=void 0===s?!1:s,u=e.storeInHistory,c=void 0===u?!0:u;if(!n)return t(this._r.validationError("Missing Message"));if(!r)return t(this._r.validationError("Missing Channel"));var l={},h=this._publishQueue.newQueueable();c||(l.store="0"),i&&"object"===("undefined"==typeof i?"undefined":o(i))&&(l.meta=JSON.stringify(i)),h.payload=n,h.channel=r,h.params=l,h.httpMethod=a?"POST":"GET",h.callback=t,this._publishQueue.queueItem(h)}}]),e}();t["default"]=f},function(e,t){e.exports={name:"pubnub",preferGlobal:!1,version:"4.0.0-beta1",author:"PubNub <support@pubnub.com>",description:"Publish & Subscribe Real-time Messaging with PubNub",contributors:[{name:"Stephen Blum",email:"stephen@pubnub.com"}],bin:{},scripts:{test:"grunt test --force"},main:"./node.js/pubnub.js",browser:"./modern/dist/pubnub.js",repository:{type:"git",url:"git://github.com/pubnub/javascript.git"},keywords:["cloud","publish","subscribe","websockets","comet","bosh","xmpp","real-time","messaging"],dependencies:{agentkeepalive:"~0.2","event-emitter":"^0.3.4",lodash:"^4.1.0",loglevel:"^1.4.0",q:"^1.4.1","sinon-as-promised":"^4.0.0",superagent:"^1.8.0",uuid:"^2.0.1"},noAnalyze:!1,devDependencies:{"babel-core":"^6.6.5","babel-eslint":"5.0.0","babel-plugin-transform-class-properties":"^6.6.0","babel-plugin-transform-flow-strip-types":"^6.6.5","babel-preset-es2015":"^6.6.0","babel-register":"^6.6.5",chai:"^3.5.0","chai-as-promised":"^5.2.0",eslint:"2.2.0","eslint-config-airbnb":"6.0.2","eslint-plugin-flowtype":"2.1.0","eslint-plugin-mocha":"2.0.0","eslint-plugin-react":"4.1.0","flow-bin":"^0.22.1",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-clean":"^0.3.2","gulp-exec":"^2.1.2","gulp-flowtype":"^0.4.9","gulp-mocha":"^2.2.0","gulp-rename":"^1.2.2","gulp-webpack":"^1.5.0","imports-loader":"0.6.5","json-loader":"0.5.4",karma:"0.13.21","karma-babel-preprocessor":"^6.0.1","karma-chai":"0.1.0","karma-chrome-launcher":"^0.2.2","karma-mocha":"^0.2.2","karma-phantomjs-launcher":"1.0.0","karma-spec-reporter":"0.0.24",mocha:"2.4.5","node-uuid":"1.4.7","phantomjs-prebuilt":"2.1.4",proxyquire:"1.7.4","run-sequence":"^1.1.5",sinon:"^1.17.3","uglify-js":"^2.6.2",underscore:"1.7.0",webpack:"^1.12.14","webpack-dev-server":"1.14.1"},bundleDependencies:[],license:"MIT",engine:{node:">=0.8"}}}])});