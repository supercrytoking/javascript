{"version":3,"sources":["core/endpoints/spaces/get_spaces.js"],"names":["getOperation","operationConstants","PNGetSpacesOperation","validateParams","getURL","modules","config","subscribeKey","getRequestTimeout","getTransactionTimeout","isAuthSupported","getAuthToken","token","tokenManager","getToken","prepareParams","incomingParams","include","limit","page","params","includes","totalCount","count","customFields","push","includesString","join","length","next","start","prev","end","handleResponse","spacesResponse"],"mappings":";;;;;;;;;;;;;;AAEA;;AAKA;;;;AAEO,SAASA,YAAT,GAAgC;AACrC,SAAOC,uBAAmBC,oBAA1B;AACD;;AAEM,SAASC,cAAT,GAA0B,CAEhC;;AAEM,SAASC,MAAT,CACLC,OADK,EAEG;AAAA,MACFC,MADE,GACSD,OADT,CACFC,MADE;AAGR,+BAAsBA,MAAM,CAACC,YAA7B;AACD;;AAEM,SAASC,iBAAT,OAAsD;AAAA,MAAzBF,MAAyB,QAAzBA,MAAyB;AAC3D,SAAOA,MAAM,CAACG,qBAAP,EAAP;AACD;;AAEM,SAASC,eAAT,GAA2B;AAChC,SAAO,IAAP;AACD;;AAEM,SAASC,YAAT,CAAsBN,OAAtB,EAAsD;AAC3D,MAAIO,KAAK,GAAGP,OAAO,CAACQ,YAAR,CAAqBC,QAArB,CAA8B,OAA9B,CAAZ;AAEA,SAAOF,KAAP;AACD;;AAEM,SAASG,aAAT,CACLV,OADK,EAELW,cAFK,EAGG;AAAA,MACAC,OADA,GACyBD,cADzB,CACAC,OADA;AAAA,MACSC,KADT,GACyBF,cADzB,CACSE,KADT;AAAA,MACgBC,IADhB,GACyBH,cADzB,CACgBG,IADhB;AAER,MAAMC,MAAM,GAAG,EAAf;;AAEA,MAAIF,KAAJ,EAAW;AACTE,IAAAA,MAAM,CAACF,KAAP,GAAeA,KAAf;AACD;;AAED,MAAID,OAAJ,EAAa;AACX,QAAII,QAAQ,GAAG,EAAf;;AAEA,QAAIJ,OAAO,CAACK,UAAZ,EAAwB;AACtBF,MAAAA,MAAM,CAACG,KAAP,GAAe,IAAf;AACD;;AAED,QAAIN,OAAO,CAACO,YAAZ,EAA0B;AACxBH,MAAAA,QAAQ,CAACI,IAAT,CAAc,QAAd;AACD;;AAED,QAAIC,cAAc,GAAGL,QAAQ,CAACM,IAAT,CAAc,GAAd,CAArB;;AAEA,QAAID,cAAc,CAACE,MAAf,GAAwB,CAA5B,EAA+B;AAC7BR,MAAAA,MAAM,CAACH,OAAP,GAAiBS,cAAjB;AACD;AACF;;AAED,MAAIP,IAAJ,EAAU;AACR,QAAIA,IAAI,CAACU,IAAT,EAAe;AACbT,MAAAA,MAAM,CAACU,KAAP,GAAeX,IAAI,CAACU,IAApB;AACD;;AACD,QAAIV,IAAI,CAACY,IAAT,EAAe;AACbX,MAAAA,MAAM,CAACY,GAAP,GAAab,IAAI,CAACY,IAAlB;AACD;AACF;;AAED,SAAOX,MAAP;AACD;;AAEM,SAASa,cAAT,CACL5B,OADK,EAEL6B,cAFK,EAGe;AACpB,SAAOA,cAAP;AACD","sourcesContent":["/* @flow */\n\nimport {\n  SpaceListInput,\n  SpacesListResponse,\n  ModulesInject,\n} from '../../flow_interfaces';\nimport operationConstants from '../../constants/operations';\n\nexport function getOperation(): string {\n  return operationConstants.PNGetSpacesOperation;\n}\n\nexport function validateParams() {\n  // no required parameters\n}\n\nexport function getURL(\n  modules: ModulesInject\n): string {\n  let { config } = modules;\n\n  return `/v1/objects/${config.subscribeKey}/spaces`;\n}\n\nexport function getRequestTimeout({ config }: ModulesInject) {\n  return config.getTransactionTimeout();\n}\n\nexport function isAuthSupported() {\n  return true;\n}\n\nexport function getAuthToken(modules: ModulesInject): string {\n  let token = modules.tokenManager.getToken('space');\n\n  return token;\n}\n\nexport function prepareParams(\n  modules: ModulesInject,\n  incomingParams: SpaceListInput\n): Object {\n  const { include, limit, page } = incomingParams;\n  const params = {};\n\n  if (limit) {\n    params.limit = limit;\n  }\n\n  if (include) {\n    let includes = [];\n\n    if (include.totalCount) {\n      params.count = true;\n    }\n\n    if (include.customFields) {\n      includes.push('custom');\n    }\n\n    let includesString = includes.join(',');\n\n    if (includesString.length > 0) {\n      params.include = includesString;\n    }\n  }\n\n  if (page) {\n    if (page.next) {\n      params.start = page.next;\n    }\n    if (page.prev) {\n      params.end = page.prev;\n    }\n  }\n\n  return params;\n}\n\nexport function handleResponse(\n  modules: ModulesInject,\n  spacesResponse: Object\n): SpacesListResponse {\n  return spacesResponse;\n}\n"],"file":"get_spaces.js"}