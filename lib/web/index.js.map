{"version":3,"sources":["web/index.js"],"names":["db","get","key","localStorage","getItem","e","set","data","setItem","setup","sdkFamily","networking","window","addEventListener","__networkDownDetected","__networkUpDetected"],"mappings":";;;;;;AAGA;;;;AACA;;;;AACA;;;;;;;;;;AAKA,IAAIA,KAAK;AACPC,KADO,eACHC,GADG,EACU;AAEf,QAAI;AACF,aAAOC,aAAaC,OAAb,CAAqBF,GAArB,CAAP;AACD,KAFD,CAEE,OAAOG,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF,GARM;AAUPC,KAVO,eAUHJ,GAVG,EAUUK,IAVV,EAUqB;AAE1B,QAAI;AACF,aAAOJ,aAAaK,OAAb,CAAqBN,GAArB,EAA0BK,IAA1B,CAAP;AACD,KAFD,CAEE,OAAOF,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF;AAjBM,CAAT;;;;;AAsBE,kBAAYI,KAAZ,EAAwC;AAAA;;AACtCA,UAAMT,EAAN,GAAWA,EAAX;AACAS,UAAMC,SAAN,GAAkB,KAAlB;AACAD,UAAME,UAAN,GAAmB,mBAAnB;;AAHsC,gHAKhCF,KALgC;;AAQtCG,WAAOC,gBAAP,CAAwB,SAAxB,EAAmC,YAAM;AACvC,YAAKC,qBAAL;AACD,KAFD;;AAIAF,WAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACtC,YAAKE,mBAAL;AACD,KAFD;AAZsC;AAevC","file":"index.js","sourcesContent":["/* @flow */\n/* global localStorage, navigator, window */\n\nimport PubNubCore from '../core/pubnub-common';\nimport Networking from '../networking/web';\nimport { InternalSetupStruct } from '../core/flow_interfaces';\n\n/**\n * LOCAL STORAGE\n */\nlet db = {\n  get(key: string) {\n    // try catch for operating within iframes which disable localStorage\n    try {\n      return localStorage.getItem(key);\n    } catch (e) {\n      return null;\n    }\n  },\n\n  set(key: string, data: any) {\n    // try catch for operating within iframes which disable localStorage\n    try {\n      return localStorage.setItem(key, data);\n    } catch (e) {\n      return null;\n    }\n  }\n};\n\nexport default class extends PubNubCore {\n\n  constructor(setup: InternalSetupStruct) {\n    setup.db = db;\n    setup.sdkFamily = 'Web';\n    setup.networking = new Networking();\n\n    super(setup);\n\n    // mount network events.\n    window.addEventListener('offline', () => {\n      this.__networkDownDetected();\n    });\n\n    window.addEventListener('online', () => {\n      this.__networkUpDetected();\n    });\n  }\n\n}\n"]}