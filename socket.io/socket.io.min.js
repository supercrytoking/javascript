// Version: 3.7.18
(function(){
var p=!0,v=null,w=!1;function D(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(a){return v}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=m[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(d,C){var x,s,m,q,E,H=e,u=C[d];u&&"object"===typeof u&&(u=a.call(u));"function"===typeof j&&(u=j.call(C,d,u));switch(typeof u){case "string":return c(u);case "number":return isFinite(u)?String(u):"null";case "boolean":case "null":return String(u);
case "object":if(!u)return"null";e+=f;E=[];if("[object Array]"===Object.prototype.toString.apply(u)){q=u.length;for(x=0;x<q;x+=1)E[x]=b(x,u)||"null";m=0===E.length?"[]":e?"[\n"+e+E.join(",\n"+e)+"\n"+H+"]":"["+E.join(",")+"]";e=H;return m}if(j&&"object"===typeof j){q=j.length;for(x=0;x<q;x+=1)s=j[x],"string"===typeof s&&(m=b(s,u))&&E.push(c(s)+(e?": ":":")+m)}else for(s in u)Object.hasOwnProperty.call(u,s)&&(m=b(s,u))&&E.push(c(s)+(e?": ":":")+m);m=0===E.length?"{}":e?"{\n"+e+E.join(",\n"+e)+"\n"+
H+"}":"{"+E.join(",")+"}";e=H;return m}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,f,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var m;f=e="";if("number"===typeof d)for(m=0;m<d;m+=1)f+=" ";else"string"===typeof d&&(f=d);if((j=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ea=function(){return"x"+ ++da+""+ +new Date},ia=function(){return+new Date},la=function(a,c){var b=a.join(ja),d=[];if(!c)return b;F(c,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&(b!=v&&0<encodeURIComponent(c).length)&&d.push(a+"="+encodeURIComponent(c))});return b+="?"+d.join(ka)},pa=function(a,c){function b(){e+c>ia()?(clearTimeout(d),d=setTimeout(b,c)):(e=ia(),a())}var d,e=0;return b},qa=function(a,c){var b=[];F(a||[],function(a){c(a)&&
b.push(a)});return b},sa=function(a,c){return a.replace(ra,function(a,d){return c[d]||a})},ta=function(a){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)});a&&a(c);return c},ua=function(a){return!!a&&"string"!==typeof a&&(Array.isArray&&Array.isArray(a)||"number"===typeof a.length)},F=function(a,c){if(a&&c)if(ua(a))for(var b=0,d=a.length;b<d;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&
c.call(a[b],b,a[b])},va=function(a,c){var b=[];F(a||[],function(a,e){b.push(c(a,e))});return b},wa=function(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},za=function(a,c){var b=[];F(a,function(a,e){c?0>a.search("-pnpres")&&e.o&&b.push(a):e.o&&b.push(a)});return b.sort()},Aa=function(a,c){var b=[];F(a,function(a,e){c?0>a.search("-pnpres")&&e.o&&b.push(a):e.o&&b.push(a)});return b.sort()},Da=function(){setTimeout(function(){Ba||
(Ba=1,F(Ca,function(a){a()}))},I)},Fa=function(){function a(a){a=a||{};a.hasOwnProperty("encryptKey")||(a.encryptKey=r.encryptKey);a.hasOwnProperty("keyEncoding")||(a.keyEncoding=r.keyEncoding);a.hasOwnProperty("keyLength")||(a.keyLength=r.keyLength);a.hasOwnProperty("mode")||(a.mode=r.mode);-1==f.indexOf(a.keyEncoding.toLowerCase())&&(a.keyEncoding=r.keyEncoding);-1==m.indexOf(parseInt(a.keyLength,10))&&(a.keyLength=r.keyLength);-1==j.indexOf(a.mode.toLowerCase())&&(a.mode=r.mode);return a}function c(a,
b){a="base64"==b.keyEncoding?K.enc.Base64.parse(a):"hex"==b.keyEncoding?K.enc.Hex.parse(a):a;return b.encryptKey?K.enc.Utf8.parse(K.SHA256(a).toString(K.enc.Hex).slice(0,32)):a}function b(a){return"ecb"==a.mode?K.mode.ECB:K.mode.CBC}function d(a){return"cbc"==a.mode?K.enc.Utf8.parse(e):v}var e="0123456789012345",f=["hex","utf8","base64","binary"],m=[128,256],j=["ecb","cbc"],r={encryptKey:p,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,f,j){if(!f)return e;var j=a(j),m=d(j),
r=b(j),f=c(f,j),j=JSON.stringify(e);return K.AES.encrypt(j,f,{iv:m,mode:r}).ciphertext.toString(K.enc.Base64)||e},decrypt:function(e,f,j){if(!f)return e;var j=a(j),m=d(j),r=b(j),f=c(f,j);try{var E=K.enc.Base64.parse(e),H=K.AES.decrypt({ciphertext:E},f,{iv:m,mode:r}).toString(K.enc.Utf8);return JSON.parse(H)}catch(u){}}}},Ga=function(a,c){return K.HmacSHA256(a,c).toString(K.enc.Base64)},Ha=function(a){return document.getElementById(a)},Ia=function(a){console.error(a)},Ja=function(a,c){var b=[];F(a.split(/\s+/),
function(a){F((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},Ka=function(a,c,b){F(a.split(","),function(a){function e(a){a||(a=window.event);b(a)||(a.cancelBubble=p,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?c.addEventListener(a,e,w):c.attachEvent?c.attachEvent("on"+a,e):c["on"+a]=e})},La=function(){return Ja("head")[0]},Ma=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},Na=function(a,
c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<"|width|height|top|left|".indexOf(b)&&"number"==typeof c[b]?"px":"")}catch(d){}},Oa=function(a){return document.createElement(a)},Ta=function(){return Ra||Sa()?0:ea()},Va=function(a){function c(a,b){y||(y=1,u.onerror=v,clearTimeout(h),a||!b||g(b),setTimeout(function(){a&&i();var b=Ha(B),c=b&&b.parentNode;c&&c.removeChild(b)},I))}if(Ra||Sa()){a:{var b,d,e=function(){if(!m){m=1;clearTimeout(r);try{d=JSON.parse(b.responseText)}catch(a){return q(1)}f=
1;s(d)}},f=0,m=0,j=a.timeout||Ua,r=setTimeout(function(){q(1,{message:"timeout"})},j),C=a.f||D(),x=a.data||{},s=a.g||D(),A=!a.Q,q=function(a,c){f||(f=1,clearTimeout(r),b&&(b.onerror=b.onload=v,b.abort&&b.abort(),b=v),a&&C(c))};try{b=Sa()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;b.onerror=b.onabort=function(a){q(1,a||b&&b.responseText||{error:"Network Connection Error"})};b.onload=b.onloadend=e;b.onreadystatechange=function(){if(b&&4==b.readyState)switch(b.status){case 200:break;
default:var a=b.responseText,c=b.status;try{d=JSON.parse(a),q(1,d)}catch(e){return q(1,{status:c,fb:v,message:a})}}};var E=la(a.url,x);b.open("GET",E,A);A&&(b.timeout=j);b.send()}catch(H){q(0);Ra=0;a=Va(a);break a}a=q}return a}var u=Oa("script"),e=a.e,B=ea(),y=0,h=setTimeout(function(){c(1,{message:"timeout"})},a.timeout||Ua),i=a.f||D(),j=a.data||{},g=a.g||D();window[e]=function(a){c(0,a)};a.Q||(u[Wa]=Wa);u.onerror=function(){c(1)};u.src=la(a.url,j);Ma(u,"id",B);La().appendChild(u);return c},Xa=function(){if(!("onLine"in
navigator))return 1;try{return navigator.onLine}catch(a){return p}},Ya=function(a){return!("sendBeacon"in navigator)?w:navigator.sendBeacon(a)},Sa=function(){if(!Za||!Za.get)return 0;var a={id:Sa.id++,send:D(),abort:function(){a.id={}},open:function(c,b){Sa[a.id]=a;Za.get(a.id,b)}};return a},da=1,Ba=w,Ca=[],$a="-pnpres",Ua=15E3,I=1E3,ja="/",ka="&",ra=/{([\w\-]+)}/g,ab,bb=Math.floor(20*Math.random());ab=function(a,c){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(c?ta().split("-")[0]:20>++bb?
bb:bb=1))||a};var Wa="async",cb=navigator.userAgent,Ra=-1==cb.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||D());var db,eb={},fb=w;try{fb=window.localStorage}catch(gb){}var mb=function(a){return-1==document.cookie.indexOf(a)?v:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||v},nb=function(a,c){document.cookie=a+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"},ob;try{nb("pnctest","1"),ob=
"1"===mb("pnctest")}catch(pb){ob=w}db={get:function(a){try{return fb?fb.getItem(a):ob?mb(a):eb[a]}catch(c){return eb[a]}},set:function(a,c){try{if(fb)return fb.setItem(a,c)&&0;ob&&nb(a,c);eb[a]=c}catch(b){eb[a]=c}}};var qb={list:{},unbind:function(a){qb.list[a]=[]},bind:function(a,c){(qb.list[a]=qb.list[a]||[]).push(c)},fire:function(a,c){F(qb.list[a]||[],function(a){a(c)})}},rb=Ha("pubnub")||0,sb=function(a){function c(){}function b(a,b){function c(b){b&&(yb=ia()-(b/1E4+(ia()-d)/2),a&&a(yb))}var d=
ia();b&&c(b)||G.time(c)}function d(a,b){hb&&hb(a,b);hb=v;clearTimeout(fa);clearTimeout(aa)}function e(){Kc&&G.time(function(a){b(D(),a);a||d(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});aa&&clearTimeout(aa);aa=setTimeout(e,Ub)})}function f(){Nc()||d(1,{error:"Offline. Please check your network settings. "});fa&&clearTimeout(fa);fa=setTimeout(f,I)}function m(a,b,c,d){var b=a.callback||b,e=a.error||t,f=S(),d=d||{};d.auth||(d.auth=a.auth_key||J);a=[U,
"v1","channel-registration","sub-key",z];a.push.apply(a,c);f&&(d.callback=f);N({e:f,data:B(d),g:function(a){r(a,b,e)},f:function(a){j(a,e)},url:a})}function j(a,b){if("object"==typeof a&&a.error){var c={};a.message&&(c.message=a.message);a.payload&&(c.payload=a.payload);b&&b(c)}else b&&b(a)}function r(a,b,c){if("object"==typeof a){if(a.error){b={};a.message&&(b.message=a.message);a.payload&&(b.payload=a.payload);c&&c(b);return}if(a.payload){a.next_page?b&&b(a.payload,a.next_page):b&&b(a.payload);
return}}b&&b(a)}function C(a){var b=0;F(za(L),function(c){if(c=L[c])b++,(a||D())(c)});return b}function x(a){var b=0;F(Aa(Y),function(c){if(c=Y[c])b++,(a||D())(c)})}function s(a){if(Oc){if(!ma.length)return}else{a&&(ma.ua=0);if(ma.ua||!ma.length)return;ma.ua=1}N(ma.shift())}function A(){!zb&&q()}function q(){clearTimeout(na);!V||500<=V||1>V||!za(L,p).length&&!Aa(Y,p).length?zb=w:(zb=p,G.presence_heartbeat({callback:function(){na=setTimeout(q,V*I)},error:function(a){t&&t("Presence Heartbeat unable to reach Pubnub servers."+
JSON.stringify(a));na=setTimeout(q,V*I)}}))}function E(a,b){return ib.decrypt(a,b||ga)||ib.decrypt(a,ga)||a}function H(a,b,c){var d=w;if("undefined"===typeof a)return b;if("number"===typeof a)d=5<a||0==a?w:p;else{if("boolean"===typeof a)return a?30:0;d=p}return d?(c&&c("Presence Heartbeat value invalid. Valid range ( x > 5 or x = 0). Current Value : "+(b||5)),b||5):a}function u(a){var b="",c=[];F(a,function(a){c.push(a)});var d=c.sort(),e;for(e in d){var f=d[e],b=b+(f+"="+wa(a[f]));e!=d.length-1&&
(b+="&")}return b}function B(a){a||(a={});F(bc,function(b,c){b in a||(a[b]=c)});return a}function y(a){return sb(a)}Ra=a.jsonp?0:-1==cb.indexOf("MSIE 6");var h=a.subscribe_key||"";a.uuid||db.get(h+"uuid");var i=a.leave_on_unload||0;a.xdr=Va;a.db=db;a.error=a.error||Ia;a._is_online=Xa;a.jsonp_cb=Ta;a.hmac_SHA256=Ga;a.crypto_obj=Fa();a.sendBeacon=Ya;a.params={pnsdk:"PubNub-JS-Web/3.7.18"};var g=+a.windowing||10,l=(+a.timeout||310)*I,Ub=(+a.keepalive||60)*I,Kc=a.timecheck||0,Vb=a.noleave||0,ba=a.publish_key,
z=a.subscribe_key,J=a.auth_key||"",jb=a.secret_key||"",cc=a.hmac_SHA256,oa=a.ssl?"s":"",Ea="http"+oa+"://"+(a.origin||"pubsub.pubnub.com"),U=ab(Ea),dc=ab(Ea),ma=[],Ab=p,yb=0,Bb=0,ec=0,hb=0,Qa=a.restore||0,xa=0,Cb=w,L={},Y={},ca={},na=v,Z=H(a.heartbeat||a.pnexpires||0,a.error),V=a.heartbeat_interval||Z/2-1,zb=w,Oc=a.no_wait_for_pending,fc=a["compatible_3.5"]||w,N=a.xdr,bc=a.params||{},t=a.error||D(),Nc=a._is_online||function(){return 1},S=a.jsonp_cb||function(){return 0},ya=a.db||{get:D(),set:D()},
ga=a.cipher_key,M=a.uuid||!a.unique_uuid&&ya&&ya.get(z+"uuid")||"",ha=a.instance_id||w,$="",gc=a.shutdown,kb=("undefined"!=typeof a.use_send_beacon?a.use_send_beacon:1)?a.sendBeacon:v,fa,aa;2===Z&&(V=1);var ib=a.crypto_obj||{encrypt:function(a){return a},decrypt:function(a){return a}},G={LEAVE:function(a,b,c,d,e){var c={uuid:M,auth:c||J},f=ab(Ea),d=d||D(),h=e||D(),e=S();if(0<a.indexOf($a))return p;if(fc&&(!oa||"0"==e)||Vb)return w;"0"!=e&&(c.callback=e);ha&&(c.instanceid=$);a=[f,"v2","presence","sub_key",
z,"channel",encodeURIComponent(a),"leave"];c=B(c);if(kb&&(url_string=la(a,c),kb(url_string)))return d&&d({status:200,action:"leave",message:"OK",service:"Presence"}),p;N({Q:b||oa,e:e,data:c,g:function(a){r(a,d,h)},f:function(a){j(a,h)},url:a});return p},LEAVE_GROUP:function(a,b,c,d,e){var c={uuid:M,auth:c||J},f=ab(Ea),d=d||D(),h=e||D(),e=S();if(0<a.indexOf($a))return p;if(fc&&(!oa||"0"==e)||Vb)return w;"0"!=e&&(c.callback=e);a&&0<a.length&&(c["channel-group"]=a);ha&&(c.instanceid=$);a=[f,"v2","presence",
"sub_key",z,"channel",encodeURIComponent(","),"leave"];c=B(c);if(kb&&(url_string=la(a,c),kb(url_string)))return d&&d({status:200,action:"leave",message:"OK",service:"Presence"}),p;N({Q:b||oa,e:e,data:c,g:function(a){r(a,d,h)},f:function(a){j(a,h)},url:a});return p},set_resumed:function(a){Cb=a},get_cipher_key:function(){return ga},set_cipher_key:function(a){ga=a},raw_encrypt:function(a,b){return ib.encrypt(a,b||ga)||a},raw_decrypt:function(a,b){return E(a,b)},get_heartbeat:function(){return Z},set_heartbeat:function(a,
b){Z=H(a,Z,t);V=b||Z/2-1;2==Z&&(V=1);c();q()},get_heartbeat_interval:function(){return V},set_heartbeat_interval:function(a){V=a;q()},get_version:function(){return"3.7.18"},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b={aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm);apns&&(a.pn_apns=apns);for(k in n)a[k]=n[k];return a},_add_param:function(a,b){bc[a]=b},channel_group:function(a,b){var c=a.channel_group,
b=b||a.callback,d=a.channels||a.channel,e=a.cloak,f,h,j=[],g={},i=a.mode||"add";c&&(c=c.split(":"),1<c.length?(f="*"===c[0]?v:c[0],h=c[1]):h=c[0]);f&&j.push("namespace")&&j.push(encodeURIComponent(f));j.push("channel-group");h&&"*"!==h&&j.push(h);d?(ua(d)&&(d=d.join(",")),g[i]=d,g.cloak=Ab?"true":"false"):"remove"===i&&j.push("remove");"undefined"!=typeof e&&(g.cloak=e?"true":"false");m(a,b,j,g)},channel_group_list_groups:function(a,b){var c;(c=a.namespace||a.ns||a.channel_group||v)&&(a.channel_group=
c+":*");G.channel_group(a,b)},channel_group_list_channels:function(a,b){if(!a.channel_group)return t("Missing Channel Group");G.channel_group(a,b)},channel_group_remove_channel:function(a,b){if(!a.channel_group)return t("Missing Channel Group");if(!a.channel&&!a.channels)return t("Missing Channel");a.mode="remove";G.channel_group(a,b)},channel_group_remove_group:function(a,b){if(!a.channel_group)return t("Missing Channel Group");if(a.channel)return t("Use channel_group_remove_channel if you want to remove a channel from a group.");
a.mode="remove";G.channel_group(a,b)},channel_group_add_channel:function(a,b){if(!a.channel_group)return t("Missing Channel Group");if(!a.channel&&!a.channels)return t("Missing Channel");G.channel_group(a,b)},channel_group_cloak:function(a,b){"undefined"==typeof a.cloak?b(Ab):(Ab=a.cloak,G.channel_group(a,b))},channel_group_list_namespaces:function(a,b){m(a,b,["namespace"])},channel_group_remove_namespace:function(a,b){m(a,b,["namespace",a.namespace,"remove"])},history:function(a,b){var b=a.callback||
b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||D(),f=a.auth_key||J,h=a.cipher_key,g=a.channel,i=a.channel_group,l=a.start,m=a.end,r=a.include_token,s=a.string_message_token||w,q={},u=S();if(!g&&!i)return t("Missing Channel");if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");q.stringtoken="true";q.count=c;q.reverse=d;q.auth=f;i&&(q["channel-group"]=i,g||(g=","));u&&(q.callback=u);l&&(q.start=l);m&&(q.end=m);r&&(q.include_token="true");s&&(q.string_message_token=
"true");N({e:u,data:B(q),g:function(a){if("object"==typeof a&&a.error)e({message:a.message,payload:a.payload});else{for(var c=a[0],d=[],Pa=0;Pa<c.length;Pa++)if(r){var f=E(c[Pa].message,h),g=c[Pa].timetoken;try{d.push({message:JSON.parse(f),timetoken:g})}catch(j){d.push({message:f,timetoken:g})}}else{f=E(c[Pa],h);try{d.push(JSON.parse(f))}catch(i){d.push(f)}}b([d,a[1],a[2]])}},f:function(a){j(a,e)},url:[U,"v2","history","sub-key",z,"channel",encodeURIComponent(g)]})},replay:function(a,b){var b=b||
a.callback||D(),c=a.auth_key||J,d=a.source,e=a.destination,f=a.stop,h=a.start,g=a.end,j=a.reverse,i=a.limit,l=S(),m={};if(!d)return t("Missing Source Channel");if(!e)return t("Missing Destination Channel");if(!ba)return t("Missing Publish Key");if(!z)return t("Missing Subscribe Key");"0"!=l&&(m.callback=l);f&&(m.stop="all");j&&(m.reverse="true");h&&(m.start=h);g&&(m.end=g);i&&(m.count=i);m.auth=c;N({e:l,g:function(a){r(a,b,err)},f:function(){b([0,"Disconnected"])},url:[U,"v1","replay",ba,z,d,e],data:B(m)})},
auth:function(a){J=a;c()},time:function(a){var b=S(),c={uuid:M,auth:J};ha&&(c.instanceid=$);N({e:b,data:B(c),url:[U,"time",b],g:function(b){a(b[0])},f:function(){a(0)}})},publish:function(a,b){var c=a.message;if(!c)return t("Missing Message");var b=b||a.callback||c.callback||a.success||D(),d=a.channel||c.channel,e=a.auth_key||J,f=a.cipher_key,h=a.error||c.error||D(),g=a.post||w,i="store_in_history"in a?a.store_in_history:p,l=S(),m="push";a.prepend&&(m="unshift");if(!d)return t("Missing Channel");
if(!ba)return t("Missing Publish Key");if(!z)return t("Missing Subscribe Key");c.getPubnubMessage&&(c=c.getPubnubMessage());c=JSON.stringify(ib.encrypt(c,f||ga)||c);c=[U,"publish",ba,z,0,encodeURIComponent(d),l,encodeURIComponent(c)];e={uuid:M,auth:e};i||(e.store="0");ha&&(e.instanceid=$);ma[m]({e:l,url:c,data:B(e),f:function(a){j(a,h);s(1)},g:function(a){r(a,b,h);s(1)},mode:g?"POST":"GET"});s()},unsubscribe:function(a,b){var d=a.channel,e=a.channel_group,f=a.auth_key||J,b=b||a.callback||D(),h=a.error||
D();xa=0;Qa=1;if(d){var g=va((d.join?d.join(","):""+d).split(","),function(a){if(L[a])return a}).join(","),d=va((d.join?d.join(","):""+d).split(","),function(a){if(L[a])return a+","+a+$a}).join(",");F(d.split(","),function(a){a&&(L[a]=0,a in ca&&delete ca[a])});d=p;Ba&&(d=G.LEAVE(g,0,f,b,h));d||b({action:"leave"})}e&&(g=va((e.join?e.join(","):""+e).split(","),function(a){if(Y[a])return a}).join(","),e=va((e.join?e.join(","):""+e).split(","),function(a){if(Y[a])return a+","+a+$a}).join(","),F(e.split(","),
function(a){a&&(Y[a]=0,a in ca&&delete ca[a])}),d=p,Ba&&(d=G.LEAVE_GROUP(g,0,f,b,h)),d||b({action:"leave"}));c()},subscribe:function(a,b){function e(a){a?setTimeout(c,fa):(U=ab(Ea,1),dc=ab(Ea,1),setTimeout(function(){G.time(e)},I));C(function(b){if(a&&b.i)return b.i=0,b.aa(b.name);!a&&!b.i&&(b.i=1,b.W(b.name))});x(function(b){if(a&&b.i)return b.i=0,b.aa(b.name);!a&&!b.i&&(b.i=1,b.W(b.name))})}function f(){var a=S(),b=za(L).join(","),h=Aa(Y).join(",");if(b||h){b||(b=",");d();var g=B({uuid:M,auth:J});
h&&(g["channel-group"]=h);2<JSON.stringify(ca).length&&(g.state=JSON.stringify(ca));Z&&(g.heartbeat=Z);ha&&(g.instanceid=$);A();hb=N({timeout:ma,e:a,f:function(a){a&&a.error&&a.service?(j(a,s),e(1)):G.time(function(b){!b&&j(a,s);e(b)})},data:B(g),url:[dc,"subscribe",z,encodeURIComponent(b),a,xa],g:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return s(a.error),setTimeout(c,I);u(a[1]);xa=!xa&&Qa&&ya.get(z)||a[1];C(function(a){a.s||(a.s=1,a.T(a.name))});x(function(a){a.s||(a.s=1,a.T(a.name))});
if(Cb&&!Qa)xa=0,Cb=w,ya.set(z,0);else{V&&(xa=1E4,V=0);ya.set(z,a[1]);var b,d="",e="";3<a.length?(d=a[3],e=a[2]):d=2<a.length?a[2]:va(za(L),function(b){return va(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var h=d.split(","),g=e?e.split(","):[];b=function(){var a=h.shift()||ec,b=g.shift(),c={};b?(a&&(0<=a.indexOf("-pnpres")&&0>b.indexOf("-pnpres"))&&(b+="-pnpres"),c=Y[b]||L[b]||{callback:D()}):c=L[a];a=[c.e||Bb,a.split($a)[0]];b&&a.push(b.split($a)[0]);return a};var i=
ia()-yb-+a[1]/1E4;F(a[0],function(c){var d=b(),c=E(c,L[d[1]]?L[d[1]].cipher_key:v);d[0]&&d[0](c,a,d[2]||d[1],i,d[1])})}setTimeout(f,fa)}})}}var h=a.channel,i=a.channel_group,b=(b=b||a.callback)||a.message,m=a.connect||D(),r=a.reconnect||D(),q=a.disconnect||D(),s=a.error||s||D(),u=a.idle||D(),y=a.presence||0,H=a.noheresync||0,V=a.backfill||0,ba=a.timetoken||0,ma=a.timeout||l,fa=a.windowing||g,aa=a.state,ga=a.heartbeat||a.pnexpires,na=a.heartbeat_interval,oa=a.restore||Qa;J=a.auth_key||J;Qa=oa;xa=ba;
if(!h&&!i)return t("Missing Channel");if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");(ga||0===ga||na||0===na)&&G.set_heartbeat(ga,na);h&&F((h.join?h.join(","):""+h).split(","),function(c){var d=L[c]||{};L[ec=c]={name:c,s:d.s,i:d.i,o:1,e:Bb=b,cipher_key:a.cipher_key,T:m,W:q,aa:r};aa&&(ca[c]=c in aa?aa[c]:aa);y&&(G.subscribe({channel:c+$a,callback:y,restore:oa}),!d.o&&!H&&G.here_now({channel:c,data:B({uuid:M,auth:J}),callback:function(a){F("uuids"in a?a.uuids:[],function(b){y({action:"join",
uuid:b,timestamp:Math.floor(ia()/1E3),occupancy:a.occupancy||1},a,c)})}}))});i&&F((i.join?i.join(","):""+i).split(","),function(c){var d=Y[c]||{};Y[c]={name:c,s:d.s,i:d.i,o:1,e:Bb=b,cipher_key:a.cipher_key,T:m,W:q,aa:r};y&&(G.subscribe({channel_group:c+$a,callback:y,restore:oa,auth_key:J}),!d.o&&!H&&G.here_now({channel_group:c,data:B({uuid:M,auth:J}),callback:function(a){F("uuids"in a?a.uuids:[],function(b){y({action:"join",uuid:b,timestamp:Math.floor(ia()/1E3),occupancy:a.occupancy||1},a,c)})}}))});
c=function(){d();setTimeout(f,fa)};if(!Ba)return Ca.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.debug,d=a.error||D(),e=a.auth_key||J,f=a.channel,h=a.channel_group,g=S(),i=a.state,e={uuid:M,auth:e};if(!("uuids"in a?a.uuids:1))e.disable_uuids=1;i&&(e.state=1);if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");i=[U,"v2","presence","sub_key",z];f&&i.push("channel")&&i.push(encodeURIComponent(f));"0"!=g&&(e.callback=g);h&&(e["channel-group"]=h,!f&&i.push("channel")&&
i.push(","));ha&&(e.instanceid=$);N({e:g,data:B(e),g:function(a){r(a,b,d)},f:function(a){j(a,d)},debug:c,url:i})},where_now:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.auth_key||J,e=S(),f=a.uuid||M,d={auth:d};if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");"0"!=e&&(d.callback=e);ha&&(d.instanceid=$);N({e:e,data:B(d),g:function(a){r(a,b,c)},f:function(a){j(a,c)},url:[U,"v2","presence","sub_key",z,"uuid",encodeURIComponent(f)]})},state:function(a,b){var b=a.callback||
b||D(),c=a.error||D(),d=a.auth_key||J,e=S(),f=a.state,h=a.uuid||M,g=a.channel,i=a.channel_group,d=B({auth:d});if(!z)return t("Missing Subscribe Key");if(!h)return t("Missing UUID");if(!g&&!i)return t("Missing Channel");"0"!=e&&(d.callback=e);"undefined"!=typeof g&&L[g]&&L[g].o&&f&&(ca[g]=f);"undefined"!=typeof i&&(Y[i]&&Y[i].o)&&(f&&(ca[i]=f),d["channel-group"]=i,g||(g=","));d.state=JSON.stringify(f);ha&&(d.instanceid=$);f=f?[U,"v2","presence","sub-key",z,"channel",g,"uuid",h,"data"]:[U,"v2","presence",
"sub-key",z,"channel",g,"uuid",encodeURIComponent(h)];N({e:e,data:B(d),g:function(a){r(a,b,c)},f:function(a){j(a,c)},url:f})},grant:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.channel||a.channels,e=a.channel_group,f=S(),h=a.ttl,g=a.read?"1":"0",i=a.write?"1":"0",l=a.manage?"1":"0",m=a.auth_key||a.auth_keys;if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");if(!ba)return t("Missing Publish Key");if(!jb)return t("Missing Secret Key");var q=z+"\n"+ba+"\ngrant\n",g={w:i,
r:g,timestamp:Math.floor((new Date).getTime()/1E3)};a.manage&&(g.m=l);ua(d)&&(d=d.join(","));ua(m)&&(m=m.join(","));"undefined"!=typeof d&&(d!=v&&0<d.length)&&(g.channel=d);"undefined"!=typeof e&&(e!=v&&0<e.length)&&(g["channel-group"]=e);"0"!=f&&(g.callback=f);if(h||0===h)g.ttl=h;m&&(g.auth=m);g=B(g);m||delete g.auth;q+=u(g);d=cc(q,jb);d=d.replace(/\+/g,"-");d=d.replace(/\//g,"_");g.signature=d;N({e:f,data:g,g:function(a){r(a,b,c)},f:function(a){j(a,c)},url:[U,"v1","auth","grant","sub-key",z]})},
mobile_gw_provision:function(a){var b=a.callback||D(),c=a.auth_key||J,d=a.error||D(),e=S(),f=a.channel,g=a.op,h=a.gw_type,a=a.device_id;if(!a)return t("Missing Device ID (device_id)");if(!h)return t("Missing GW Type (gw_type: gcm or apns)");if(!g)return t("Missing GW Operation (op: add or remove)");if(!f)return t("Missing gw destination Channel (channel)");if(!ba)return t("Missing Publish Key");if(!z)return t("Missing Subscribe Key");a=[U,"v1/push/sub-key",z,"devices",a];c={uuid:M,auth:c,type:h};
"add"==g?c.add=f:"remove"==g&&(c.remove=f);ha&&(data.instanceid=$);N({e:e,data:c,g:function(a){r(a,b,d)},f:function(a){j(a,d)},url:a})},audit:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.channel,e=a.channel_group,f=a.auth_key,g=S();if(!b)return t("Missing Callback");if(!z)return t("Missing Subscribe Key");if(!ba)return t("Missing Publish Key");if(!jb)return t("Missing Secret Key");var h=z+"\n"+ba+"\naudit\n",i={timestamp:Math.floor((new Date).getTime()/1E3)};"0"!=g&&(i.callback=g);"undefined"!=
typeof d&&(d!=v&&0<d.length)&&(i.channel=d);"undefined"!=typeof e&&(e!=v&&0<e.length)&&(i["channel-group"]=e);f&&(i.auth=f);i=B(i);f||delete i.auth;h+=u(i);d=cc(h,jb);d=d.replace(/\+/g,"-");d=d.replace(/\//g,"_");i.signature=d;N({e:g,data:i,g:function(a){r(a,b,c)},f:function(a){j(a,c)},url:[U,"v1","auth","audit","sub-key",z]})},revoke:function(a,b){a.read=w;a.write=w;G.grant(a,b)},set_uuid:function(a){M=a;c()},get_uuid:function(){return M},isArray:function(a){return ua(a)},get_subscribed_channels:function(){return za(L,
p)},presence_heartbeat:function(a){var b=a.callback||D(),c=a.error||D(),a=S(),d={uuid:M,auth:J};2<JSON.stringify(ca).length&&(d.state=JSON.stringify(ca));0<Z&&320>Z&&(d.heartbeat=Z);"0"!=a&&(d.callback=a);var e;e=za(L,p).join(",");e=encodeURIComponent(e);var f=Aa(Y,p).join(",");e||(e=",");f&&(d["channel-group"]=f);ha&&(d.instanceid=$);N({e:a,data:B(d),url:[U,"v2","presence","sub-key",z,"channel",e,"heartbeat"],g:function(a){r(a,b,c)},f:function(a){j(a,c)}})},stop_timers:function(){clearTimeout(fa);
clearTimeout(aa);clearTimeout(na)},shutdown:function(){G.stop_timers();gc&&gc()},xdr:N,ready:Da,db:ya,uuid:ta,map:va,each:F,"each-channel":C,grep:qa,offline:function(){d(1,{message:"Offline. Please check your network settings."})},supplant:sa,now:ia,unique:ea,updater:pa};M||(M=G.uuid());$||($=G.uuid());ya.set(z+"uuid",M);fa=setTimeout(f,I);aa=setTimeout(e,Ub);na=setTimeout(A,(V-3)*I);b();var h=G,lb;for(lb in h)h.hasOwnProperty(lb)&&(y[lb]=h[lb]);y.css=Na;y.$=Ha;y.create=Oa;y.bind=Ka;y.head=La;y.search=
Ja;y.attr=Ma;y.events=qb;y.init=y;y.secure=y;y.crypto_obj=Fa();Ka("beforeunload",window,function(){if(i)y["each-channel"](function(a){y.LEAVE(a.name,0)});return p});if(a.notest)return y;Ka("offline",window,y.offline);Ka("offline",document,y.offline);return y};sb.init=sb;sb.secure=sb;sb.crypto_obj=Fa();"complete"===document.readyState?setTimeout(Da,0):Ka("load",window,function(){setTimeout(Da,0)});var tb=rb||{};PUBNUB=sb({notest:1,publish_key:Ma(tb,"pub-key"),subscribe_key:Ma(tb,"sub-key"),ssl:!document.location.href.indexOf("https")||
"on"==Ma(tb,"ssl"),origin:Ma(tb,"origin"),uuid:Ma(tb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=sb);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Da();var Za=Ha("pubnubs")||0;if(rb){Na(rb,{position:"absolute",top:-I});if("opera"in window||Ma(rb,"flash"))rb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(a,c){if(!c)return Sa[a].onerror();
Sa[a].responseText=unescape(c);Sa[a].onload()};Sa.id=I}}
var ub=PUBNUB.ws=function(a,c){if(!(this instanceof ub))return new ub(a,c);var b=this,a=b.url=a||"";b.protocol=c||"Sec-WebSocket-Protocol";var d=a.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=b.onsend=
D();b.binaryType="";b.extensions="";b.bufferedAmount=0;b.trasnmitting=w;b.buffer=[];b.readyState=b.CONNECTING;if(!a)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),b;b.L=PUBNUB.init(d);b.L.va=d;b.va=d;b.L.subscribe({restore:w,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:w})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=b.OPEN;b.onopen()}})};
ub.prototype.send=function(a){var c=this;c.L.publish({channel:c.L.va.channel,message:a,callback:function(a){c.onsend({data:a})}})};var vb;
if(!(vb=K)){var wb=Math,xb={},Db=xb.n={},Eb=D(),Fb=Db.M={extend:function(a){Eb.prototype=this;var c=new Eb;a&&c.Z(a);c.hasOwnProperty("init")||(c.b=function(){c.wa.b.apply(this,arguments)});c.b.prototype=c;c.wa=this;return c},create:function(){var a=this.extend();a.b.apply(a,arguments);return a},b:D(),Z:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},h:function(){return this.b.prototype.extend(this)}},Hb=Db.z=Fb.extend({b:function(a,
c){a=this.c=a||[];this.a=void 0!=c?c:4*a.length},toString:function(a){return(a||Gb).stringify(this)},concat:function(a){var c=this.c,b=a.c,d=this.a,a=a.a;this.S();if(d%4)for(var e=0;e<a;e++)c[d+e>>>2]|=(b[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<b.length)for(e=0;e<a;e+=4)c[d+e>>>2]=b[e>>>2];else c.push.apply(c,b);this.a+=a;return this},S:function(){var a=this.c,c=this.a;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=wb.ceil(c/4)},h:function(){var a=Fb.h.call(this);a.c=this.c.slice(0);return a},
random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*wb.random()|0);return new Hb.b(c,a)}}),Ib=xb.X={},Gb=Ib.Wa={stringify:function(a){for(var c=a.c,a=a.a,b=[],d=0;d<a;d++){var e=c[d>>>2]>>>24-8*(d%4)&255;b.push((e>>>4).toString(16));b.push((e&15).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d+=2)b[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new Hb.b(b,c/2)}},Jb=Ib.Za={stringify:function(a){for(var c=a.c,a=a.a,b=[],d=0;d<a;d++)b.push(String.fromCharCode(c[d>>>
2]>>>24-8*(d%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d++)b[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return new Hb.b(b,c)}},Kb=Ib.Ga={stringify:function(a){try{return decodeURIComponent(escape(Jb.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return Jb.parse(unescape(encodeURIComponent(a)))}},Lb=Db.Ba=Fb.extend({reset:function(){this.p=new Hb.b;this.G=0},B:function(a){"string"==typeof a&&(a=Kb.parse(a));this.p.concat(a);this.G+=
a.a},q:function(a){var c=this.p,b=c.c,d=c.a,e=this.l,f=d/(4*e),f=a?wb.ceil(f):wb.max((f|0)-this.la,0),a=f*e,d=wb.min(4*a,d);if(a){for(var m=0;m<a;m+=e)this.O(b,m);m=b.splice(0,a);c.a-=d}return new Hb.b(m,d)},h:function(){var a=Fb.h.call(this);a.p=this.p.h();return a},la:0});Db.fa=Lb.extend({d:Fb.extend(),b:function(a){this.d=this.d.extend(a);this.reset()},reset:function(){Lb.reset.call(this);this.F()},update:function(a){this.B(a);this.q();return this},j:function(a){a&&this.B(a);return this.A()},l:16,
D:function(a){return function(c,b){return(new a.b(b)).j(c)}},ha:function(a){return function(c,b){return(new Mb.Da.b(a,b)).j(c)}}});var Mb=xb.u={};vb=xb}for(var K=vb,Nb=Math,Ob=K.n,Pb=Ob.z,Qb=Ob.fa,Ob=K.u,Rb=[],Sb=[],Tb=2,Wb=0;64>Wb;){var Xb;a:{Xb=Tb;for(var Yb=Nb.sqrt(Xb),Zb=2;Zb<=Yb;Zb++)if(!(Xb%Zb)){Xb=w;break a}Xb=p}Xb&&(8>Wb&&(Rb[Wb]=4294967296*(Nb.pow(Tb,0.5)-(Nb.pow(Tb,0.5)|0))|0),Sb[Wb]=4294967296*(Nb.pow(Tb,1/3)-(Nb.pow(Tb,1/3)|0))|0,Wb++);Tb++}
var $b=[],Ob=Ob.Fa=Qb.extend({F:function(){this.k=new Pb.b(Rb.slice(0))},O:function(a,c){for(var b=this.k.c,d=b[0],e=b[1],f=b[2],m=b[3],j=b[4],r=b[5],C=b[6],x=b[7],s=0;64>s;s++){if(16>s)$b[s]=a[c+s]|0;else{var A=$b[s-15],q=$b[s-2];$b[s]=((A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3)+$b[s-7]+((q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10)+$b[s-16]}A=x+((j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25))+(j&r^~j&C)+Sb[s]+$b[s];q=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f);x=C;C=r;r=j;j=m+A|0;m=f;f=e;e=d;d=A+q|
0}b[0]=b[0]+d|0;b[1]=b[1]+e|0;b[2]=b[2]+f|0;b[3]=b[3]+m|0;b[4]=b[4]+j|0;b[5]=b[5]+r|0;b[6]=b[6]+C|0;b[7]=b[7]+x|0},A:function(){var a=this.p,c=a.c,b=8*this.G,d=8*a.a;c[d>>>5]|=128<<24-d%32;c[(d+64>>>9<<4)+14]=Nb.floor(b/4294967296);c[(d+64>>>9<<4)+15]=b;a.a=4*c.length;this.q();return this.k},h:function(){var a=Qb.h.call(this);a.k=this.k.h();return a}});K.Fa=Qb.D(Ob);K.Ya=Qb.ha(Ob);var ac=K.X.Ga;
K.u.Da=K.n.M.extend({b:function(a,c){a=this.P=new a.b;"string"==typeof c&&(c=ac.parse(c));var b=a.l,d=4*b;c.a>d&&(c=a.j(c));c.S();for(var e=this.Oa=c.h(),f=this.Ia=c.h(),m=e.c,j=f.c,r=0;r<b;r++)m[r]^=1549556828,j[r]^=909522486;e.a=f.a=d;this.reset()},reset:function(){var a=this.P;a.reset();a.update(this.Ia)},update:function(a){this.P.update(a);return this},j:function(a){var c=this.P,a=c.j(a);c.reset();return c.j(this.Oa.h().concat(a))}});var hc=K.n.z;
K.X.ya={stringify:function(a){var c=a.c,b=a.a,d=this.ka;a.S();for(var a=[],e=0;e<b;e+=3)for(var f=(c[e>>>2]>>>24-8*(e%4)&255)<<16|(c[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|c[e+2>>>2]>>>24-8*((e+2)%4)&255,m=0;4>m&&e+0.75*m<b;m++)a.push(d.charAt(f>>>6*(3-m)&63));if(c=d.charAt(64))for(;a.length%4;)a.push(c);return a.join("")},parse:function(a){var c=a.length,b=this.ka,d=b.charAt(64);d&&(d=a.indexOf(d),-1!=d&&(c=d));for(var d=[],e=0,f=0;f<c;f++)f%4&&(d[e>>>2]|=(b.indexOf(a.charAt(f-1))<<2*(f%4)|b.indexOf(a.charAt(f))>>>
6-2*(f%4))<<24-8*(e%4),e++);return hc.create(d,e)},ka:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var ic=Math;function O(a,c,b,d,e,f,m){a=a+(c&b|~c&d)+e+m;return(a<<f|a>>>32-f)+c}function P(a,c,b,d,e,f,m){a=a+(c&d|b&~d)+e+m;return(a<<f|a>>>32-f)+c}function Q(a,c,b,d,e,f,m){a=a+(c^b^d)+e+m;return(a<<f|a>>>32-f)+c}function R(a,c,b,d,e,f,m){a=a+(b^(c|~d))+e+m;return(a<<f|a>>>32-f)+c}
for(var jc=K.n,kc=jc.z,lc=jc.fa,jc=K.u,T=[],mc=0;64>mc;mc++)T[mc]=4294967296*ic.abs(ic.sin(mc+1))|0;
jc=jc.ga=lc.extend({F:function(){this.k=new kc.b([1732584193,4023233417,2562383102,271733878])},O:function(a,c){for(var b=0;16>b;b++){var d=c+b,e=a[d];a[d]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var b=this.k.c,d=a[c+0],e=a[c+1],f=a[c+2],m=a[c+3],j=a[c+4],r=a[c+5],C=a[c+6],x=a[c+7],s=a[c+8],A=a[c+9],q=a[c+10],E=a[c+11],H=a[c+12],u=a[c+13],B=a[c+14],y=a[c+15],h=b[0],i=b[1],g=b[2],l=b[3],h=O(h,i,g,l,d,7,T[0]),l=O(l,h,i,g,e,12,T[1]),g=O(g,l,h,i,f,17,T[2]),i=O(i,g,l,h,m,22,T[3]),h=O(h,i,g,l,j,
7,T[4]),l=O(l,h,i,g,r,12,T[5]),g=O(g,l,h,i,C,17,T[6]),i=O(i,g,l,h,x,22,T[7]),h=O(h,i,g,l,s,7,T[8]),l=O(l,h,i,g,A,12,T[9]),g=O(g,l,h,i,q,17,T[10]),i=O(i,g,l,h,E,22,T[11]),h=O(h,i,g,l,H,7,T[12]),l=O(l,h,i,g,u,12,T[13]),g=O(g,l,h,i,B,17,T[14]),i=O(i,g,l,h,y,22,T[15]),h=P(h,i,g,l,e,5,T[16]),l=P(l,h,i,g,C,9,T[17]),g=P(g,l,h,i,E,14,T[18]),i=P(i,g,l,h,d,20,T[19]),h=P(h,i,g,l,r,5,T[20]),l=P(l,h,i,g,q,9,T[21]),g=P(g,l,h,i,y,14,T[22]),i=P(i,g,l,h,j,20,T[23]),h=P(h,i,g,l,A,5,T[24]),l=P(l,h,i,g,B,9,T[25]),g=
P(g,l,h,i,m,14,T[26]),i=P(i,g,l,h,s,20,T[27]),h=P(h,i,g,l,u,5,T[28]),l=P(l,h,i,g,f,9,T[29]),g=P(g,l,h,i,x,14,T[30]),i=P(i,g,l,h,H,20,T[31]),h=Q(h,i,g,l,r,4,T[32]),l=Q(l,h,i,g,s,11,T[33]),g=Q(g,l,h,i,E,16,T[34]),i=Q(i,g,l,h,B,23,T[35]),h=Q(h,i,g,l,e,4,T[36]),l=Q(l,h,i,g,j,11,T[37]),g=Q(g,l,h,i,x,16,T[38]),i=Q(i,g,l,h,q,23,T[39]),h=Q(h,i,g,l,u,4,T[40]),l=Q(l,h,i,g,d,11,T[41]),g=Q(g,l,h,i,m,16,T[42]),i=Q(i,g,l,h,C,23,T[43]),h=Q(h,i,g,l,A,4,T[44]),l=Q(l,h,i,g,H,11,T[45]),g=Q(g,l,h,i,y,16,T[46]),i=Q(i,
g,l,h,f,23,T[47]),h=R(h,i,g,l,d,6,T[48]),l=R(l,h,i,g,x,10,T[49]),g=R(g,l,h,i,B,15,T[50]),i=R(i,g,l,h,r,21,T[51]),h=R(h,i,g,l,H,6,T[52]),l=R(l,h,i,g,m,10,T[53]),g=R(g,l,h,i,q,15,T[54]),i=R(i,g,l,h,e,21,T[55]),h=R(h,i,g,l,s,6,T[56]),l=R(l,h,i,g,y,10,T[57]),g=R(g,l,h,i,C,15,T[58]),i=R(i,g,l,h,u,21,T[59]),h=R(h,i,g,l,j,6,T[60]),l=R(l,h,i,g,E,10,T[61]),g=R(g,l,h,i,f,15,T[62]),i=R(i,g,l,h,A,21,T[63]);b[0]=b[0]+h|0;b[1]=b[1]+i|0;b[2]=b[2]+g|0;b[3]=b[3]+l|0},A:function(){var a=this.p,c=a.c,b=8*this.G,d=8*
a.a;c[d>>>5]|=128<<24-d%32;var e=ic.floor(b/4294967296);c[(d+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;c[(d+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;a.a=4*(c.length+1);this.q();a=this.k;c=a.c;for(b=0;4>b;b++)d=c[b],c[b]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;return a},h:function(){var a=lc.h.call(this);a.k=this.k.h();return a}});K.ga=lc.D(jc);K.Xa=lc.ha(jc);
var nc=K.n,oc=nc.M,pc=nc.z,nc=K.u,qc=nc.ea=oc.extend({d:oc.extend({v:4,Qa:nc.ga,Ra:1}),b:function(a){this.d=this.d.extend(a)},pa:function(a,c){for(var b=this.d,d=b.Qa.create(),e=pc.create(),f=e.c,m=b.v,b=b.Ra;f.length<m;){j&&d.update(j);var j=d.update(a).j(c);d.reset();for(var r=1;r<b;r++)j=d.j(j),d.reset();e.concat(j)}e.a=4*m;return e}});K.ea=function(a,c,b){return qc.create(b).pa(a,c)};
if(!K.n.Ca){var rc=K,sc=rc.n,tc=sc.M,uc=sc.z,vc=sc.Ba,wc=rc.X.ya,xc=rc.u.ea,Ac=sc.Ca=vc.extend({d:tc.extend(),V:function(a,c){return this.create(this.N,a,c)},U:function(a,c){return this.create(this.Ha,a,c)},b:function(a,c,b){this.d=this.d.extend(b);this.oa=a;this.Ka=c;this.reset()},reset:function(){vc.reset.call(this);this.F()},gb:function(a){this.B(a);return this.q()},j:function(a){a&&this.B(a);return this.A()},v:4,sa:4,N:1,Ha:2,D:function(a){return{I:function(c,b,d){return("string"==typeof b?yc:
zc).I(a,c,b,d)},H:function(c,b,d){return("string"==typeof b?yc:zc).H(a,c,b,d)}}}});sc.cb=Ac.extend({A:function(){return this.q(p)},l:1});var Bc=rc.mode={},Cc=function(a,c,b){var d=this.ja;d?this.ja=void 0:d=this.na;for(var e=0;e<b;e++)a[c+e]^=d[e]},Dc=(sc.Aa=tc.extend({V:function(a,c){return this.da.create(a,c)},U:function(a,c){return this.ca.create(a,c)},b:function(a,c){this.C=a;this.ja=c}})).extend();Dc.da=Dc.extend({K:function(a,c){var b=this.C,d=b.l;Cc.call(this,a,c,d);b.ra(a,c);this.na=a.slice(c,
c+d)}});Dc.ca=Dc.extend({K:function(a,c){var b=this.C,d=b.l,e=a.slice(c,c+d);b.qa(a,c);Cc.call(this,a,c,d);this.na=e}});Bc=Bc.Ta=Dc;Dc=(rc.ta={}).ab={ta:function(a,c){for(var b=4*c,b=b-a.a%b,d=b<<24|b<<16|b<<8|b,e=[],f=0;f<b;f+=4)e.push(d);b=uc.create(e,b);a.concat(b)},Sa:function(a){a.a-=a.c[a.a-1>>>2]&255}};sc.za=Ac.extend({d:Ac.d.extend({mode:Bc,padding:Dc}),reset:function(){Ac.reset.call(this);var a=this.d,c=a.t,a=a.mode;if(this.oa==this.N)var b=a.V;else b=a.U,this.la=1;this.Ma=b.call(a,this,
c&&c.c)},O:function(a,c){this.Ma.K(a,c)},A:function(){var a=this.d.padding;if(this.oa==this.N){a.ta(this.p,this.l);var c=this.q(p)}else c=this.q(p),a.Sa(c);return c},l:4});var Ec=sc.Ua=tc.extend({b:function(a){this.Z(a)},toString:function(a){return(a||this.Pa).stringify(this)}}),Bc=(rc.J={}).Ea={stringify:function(a){var c=a.R,a=a.ba;return(a?uc.create([1398893684,1701076831]).concat(a).concat(c):c).toString(wc)},parse:function(a){var a=wc.parse(a),c=a.c;if(1398893684==c[0]&&1701076831==c[1]){var b=
uc.create(c.slice(2,4));c.splice(0,4);a.a-=16}return Ec.create({R:a,ba:b})}},zc=sc.bb=tc.extend({d:tc.extend({J:Bc}),I:function(a,c,b,d){var d=this.d.extend(d),e=a.V(b,d),c=e.j(c),e=e.d;return Ec.create({R:c,key:b,t:e.t,eb:a,mode:e.mode,padding:e.padding,l:a.l,Pa:d.J})},H:function(a,c,b,d){d=this.d.extend(d);c=this.ma(c,d.J);return a.U(b,d).j(c.R)},ma:function(a,c){return"string"==typeof a?c.parse(a,this):a}}),rc=(rc.Y={}).Ea={execute:function(a,c,b,d){d||(d=uc.random(8));a=xc.create({v:c+b}).pa(a,
d);b=uc.create(a.c.slice(c),4*b);a.a=4*c;return Ec.create({key:a,t:b,ba:d})}},yc=sc.$a=zc.extend({d:zc.d.extend({Y:rc}),I:function(a,c,b,d){d=this.d.extend(d);b=d.Y.execute(b,a.v,a.sa);d.t=b.t;a=zc.I.call(this,a,c,b.key,d);a.Z(b);return a},H:function(a,c,b,d){d=this.d.extend(d);c=this.ma(c,d.J);b=d.Y.execute(b,a.v,a.sa,c.ba);d.t=b.t;return zc.H.call(this,a,c,b.key,d)}})}
for(var Fc=K.n.za,Gc=K.u,W=[],Hc=[],Ic=[],Jc=[],Lc=[],Mc=[],Pc=[],Qc=[],Rc=[],Sc=[],Tc=[],Uc=0;256>Uc;Uc++)Tc[Uc]=128>Uc?Uc<<1:Uc<<1^283;
for(var Vc=0,Wc=0,Uc=0;256>Uc;Uc++){var Xc=Wc^Wc<<1^Wc<<2^Wc<<3^Wc<<4,Xc=Xc>>>8^Xc&255^99;W[Vc]=Xc;Hc[Xc]=Vc;var Yc=Tc[Vc],Zc=Tc[Yc],$c=Tc[Zc],X=257*Tc[Xc]^16843008*Xc;Ic[Vc]=X<<24|X>>>8;Jc[Vc]=X<<16|X>>>16;Lc[Vc]=X<<8|X>>>24;Mc[Vc]=X;X=16843009*$c^65537*Zc^257*Yc^16843008*Vc;Pc[Xc]=X<<24|X>>>8;Qc[Xc]=X<<16|X>>>16;Rc[Xc]=X<<8|X>>>24;Sc[Xc]=X;Vc?(Vc=Yc^Tc[Tc[Tc[$c^Yc]]],Wc^=Tc[Tc[Wc]]):Vc=Wc=1}
var ad=[0,1,2,4,8,16,32,64,128,27,54],Gc=Gc.xa=Fc.extend({F:function(){for(var a=this.Ka,c=a.c,b=a.a/4,a=4*((this.Na=b+6)+1),d=this.La=[],e=0;e<a;e++)if(e<b)d[e]=c[e];else{var f=d[e-1];e%b?6<b&&4==e%b&&(f=W[f>>>24]<<24|W[f>>>16&255]<<16|W[f>>>8&255]<<8|W[f&255]):(f=f<<8|f>>>24,f=W[f>>>24]<<24|W[f>>>16&255]<<16|W[f>>>8&255]<<8|W[f&255],f^=ad[e/b|0]<<24);d[e]=d[e-b]^f}c=this.Ja=[];for(b=0;b<a;b++)e=a-b,f=b%4?d[e]:d[e-4],c[b]=4>b||4>=e?f:Pc[W[f>>>24]]^Qc[W[f>>>16&255]]^Rc[W[f>>>8&255]]^Sc[W[f&255]]},
ra:function(a,c){this.ia(a,c,this.La,Ic,Jc,Lc,Mc,W)},qa:function(a,c){var b=a[c+1];a[c+1]=a[c+3];a[c+3]=b;this.ia(a,c,this.Ja,Pc,Qc,Rc,Sc,Hc);b=a[c+1];a[c+1]=a[c+3];a[c+3]=b},ia:function(a,c,b,d,e,f,m,j){for(var r=this.Na,C=a[c]^b[0],x=a[c+1]^b[1],s=a[c+2]^b[2],A=a[c+3]^b[3],q=4,E=1;E<r;E++)var H=d[C>>>24]^e[x>>>16&255]^f[s>>>8&255]^m[A&255]^b[q++],u=d[x>>>24]^e[s>>>16&255]^f[A>>>8&255]^m[C&255]^b[q++],B=d[s>>>24]^e[A>>>16&255]^f[C>>>8&255]^m[x&255]^b[q++],A=d[A>>>24]^e[C>>>16&255]^f[x>>>8&255]^m[s&
255]^b[q++],C=H,x=u,s=B;H=(j[C>>>24]<<24|j[x>>>16&255]<<16|j[s>>>8&255]<<8|j[A&255])^b[q++];u=(j[x>>>24]<<24|j[s>>>16&255]<<16|j[A>>>8&255]<<8|j[C&255])^b[q++];B=(j[s>>>24]<<24|j[A>>>16&255]<<16|j[C>>>8&255]<<8|j[x&255])^b[q++];A=(j[A>>>24]<<24|j[C>>>16&255]<<16|j[x>>>8&255]<<8|j[s&255])^b[q++];a[c]=H;a[c+1]=u;a[c+2]=B;a[c+3]=A},v:8});K.xa=Fc.D(Gc);var bd=K.mode,cd=K.n.Aa.extend();cd.da=cd.extend({K:function(a,c){this.C.ra(a,c)}});cd.ca=cd.extend({K:function(a,c){this.C.qa(a,c)}});bd.Va=cd;
})();
(function(){function n(c){b.each(d,function(a){if(a in g&&c in g[a]){var e=g[a][c];e.connected&&(e.connected=!1,e.socket.user_count--,b.events.fire(a+"leave",e))}})}function l(c,a,e,h,d){var k=j(a);b.publish({channel:k.channel,message:{name:c,ns:a,data:e,uuid:m,geo:k.location||[0,0]},callback:function(b){if(b[0])return(d||function(){})(b);var i=2*(h||500);setTimeout(function(){l(c,a,e,i,d)},5500<i?5500:i)}})}function p(c){c=c||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){socket.location=
[b.coords.latitude,b.coords.longitude];c(socket.location)})||c([0,0])}function j(c){var a=d[c]||(d[c]={namespace:c,connected:!1,users:g[c]={},user_count:1,get_user_list:function(){return d[c].users},get_user_count:function(){return d[c].user_count},emit:function(b,a,d){l(b,c,a,0,d)},send:function(b,a){l("message",c,b,0,a)},on:function(a,d){"string"===typeof a?b.events.bind(c+a,d):"object"===typeof a&&b.each(a,function(a){b.events.bind(c+a,d)})},disconnect:function(){b.unsubscribe({channel:a.channel})},
history:function(a,d){var g=j(c);a.channel=g.channel;b.history(a,function(a){var b=[];PUBNUB.each(a[0]||[],function(a){"message"==a.name&&a.ns==c&&b.push(a)});a[0]=b;d(a)})},here_now:function(a){var d=j(c);b.here_now({channel:d.channel},a)}});return a}var b=PUBNUB,q=0,m=PUBNUB.db.get("uuid")||b.uuid(function(b){PUBNUB.db.set("uuid",m=b)}),d={},g={},r=window.io={connected:{},connect:function(c,a){function e(){var a=b.map(d,function(a){return a});l("ping",i,{nss:a,cuser:s})}var h=(c+"////").split("/"),
a=a||{},s=a.user||{},k="presence"in a?a.presence:!0,t=h[2],i=(h[3]||"standard")+"-"+a.channel,h=a.channel,f=j(i);f.channel=h;f.password="GibberishAES"in window&&a.password;if(h in r.connected)return f;a.geo&&setInterval(p,15E3)&&p();a.uuid=m;a.origin=t;b=r.connected[h]=q?b:PUBNUB[f.password?"secure":"init"](a);q=1;f.disconnected=0;b.subscribe({channel:f.channel,disconnect:function(){f.disconnected||(f.disconnected=1,b.each(d,function(a){b.events.fire(a+"disconnect",{})}))},reconnect:function(){b.disconnected=
0},connect:function(){f.disconnected=0;b.each(d,function(a){var c=j(a);c.connected||(c.connected=!0,b.events.fire(a+"connect",{}))});e()},presence:k&&function(a){"leave"===a.action&&n(a.uuid);"timeout"===a.action&&n(a.uuid);"join"===a.action&&e()},callback:function(a){f.disconnected&&b.each(d,function(a){b.events.fire(a+"reconnect",{})});f.disconnected=0;var c=a.data;a.ns in d&&c&&b.events.fire(a.ns+a.name,c);a.uuid&&a.uuid!==m&&"ping"===a.name&&b.each(c.nss,function(d){g[d]=g[d]||{};var e=g[d][a.uuid]=
g[d][a.uuid]||{geo:a.geo||[0,0],uuid:a.uuid,last:+new Date,socket:f,namespace:d,connected:!1,slot:f.user_count++};e.last=+new Date;e.data=c.cuser;e.connected||(b.events.fire(d+"join",e),e.connected=!0)})}});k&&(setInterval(e,3E4),e());return f}}})();
