// Version: 3.5.0
(function(){
var m=!1;function q(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(a){return null}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=r[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(d,B){var t,h,n,i,j,r=e,f=B[d];f&&"object"===typeof f&&(f=a.call(f));"function"===typeof p&&(f=p.call(B,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";
case "boolean":case "null":return String(f);case "object":if(!f)return"null";e+=u;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){i=f.length;for(t=0;t<i;t+=1)j[t]=b(t,f)||"null";n=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+r+"]":"["+j.join(",")+"]";e=r;return n}if(p&&"object"===typeof p){i=p.length;for(t=0;t<i;t+=1)h=p[t],"string"===typeof h&&(n=b(h,f))&&j.push(c(h)+(e?": ":":")+n)}else for(h in f)Object.hasOwnProperty.call(f,h)&&(n=b(h,f))&&j.push(c(h)+(e?": ":":")+n);n=0===
j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+r+"}":"{"+j.join(",")+"}";e=r;return n}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,u,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var h;u=e="";if("number"===typeof d)for(h=0;h<d;h+=1)u+=" ";else"string"===typeof d&&(u=d);if((p=c)&&"function"!==
typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var aa=1,v=m,ba=[],C="-pnpres",D=1E3,ca=/{([\w\-]+)}/g;function F(){return"x"+ ++aa+""+ +new Date}function G(){return+new Date}var K,L=Math.floor(20*Math.random());K=function(a,c){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+(c?da().split("-")[0]:20>++L?L:L=1))||a};
function ea(a,c){function b(){e+c>G()?(clearTimeout(d),d=setTimeout(b,c)):(e=G(),a())}var d,e=0;return b}function fa(a,c){var b=[];M(a||[],function(a){c(a)&&b.push(a)});return b}function ga(a,c){return a.replace(ca,function(a,d){return c[d]||a})}function da(a){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)});a&&a(c);return c}
function M(a,c){if(a&&c)if("undefined"!=typeof a[0])for(var b=0,d=a.length;b<d;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&c.call(a[b],b,a[b])}function N(a,c){var b=[];M(a||[],function(a,e){b.push(c(a,e))});return b}function P(a){return N(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function ha(a){var c=[];M(a,function(a,d){d.h&&c.push(a)});return c.sort()}
function la(){setTimeout(function(){v||(v=1,M(ba,function(a){a()}))},D)}
if(!window.PUBNUB){var Q=function(a){return document.getElementById(a)},ma=function(a){console.error(a)},na=function(a,c){var b=[];M(a.split(/\s+/),function(a){M((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},R=function(a,c,b){M(a.split(","),function(a){function e(a){a||(a=window.event);b(a)||(a.cancelBubble=!0,a.returnValue=m,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?c.addEventListener(a,e,m):c.attachEvent?c.attachEvent("on"+
a,e):c["on"+a]=e})},oa=function(){return na("head")[0]},S=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},pa=function(a,c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<"|width|height|top|left|".indexOf(b)&&"number"==typeof c[b]?"px":"")}catch(d){}},qa=function(a){return document.createElement(a)},ra=function(){return F()},ua=function(a){function c(a,c){u||(u=1,a||!c||g(c),b.onerror=null,clearTimeout(r),setTimeout(function(){var a=Q(e),b=a&&
a.parentNode;b&&b.removeChild(a)},D))}var b=qa("script"),d=a.a,e=F(),u=0,r=setTimeout(function(){c(1)},a.timeout||1E4),p=a.data||{},g=a.b||q();window[d]=function(a){c(0,a)};a.i||(b[sa]=sa);b.onerror=function(){c(1)};p.pnsdk=ta;var a=a.url.join("/"),B=[];p&&(M(p,function(a,b){B.push(a+"="+P(b))}),a+="?"+B.join("&"));b.src=a;S(b,"id",e);oa().appendChild(b);return c},va=function(){return!("onLine"in navigator)?1:navigator.onLine},sa="async",ta="PubNub-JS-SmartTV/3.5.0";window.console||(window.console=
window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||q());var U,V=window.localStorage;U={get:function(a){try{return V?V.getItem(a):-1==document.cookie.indexOf(a)?null:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||null}catch(c){}},set:function(a,c){try{if(V)return V.setItem(a,c)&&0;document.cookie=a+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(b){}}};var W={list:{},unbind:function(a){W.list[a]=[]},bind:function(a,c){(W.list[a]=W.list[a]||
[]).push(c)},fire:function(a,c){M(W.list[a]||[],function(a){a(c)})}},wa=Q("pubnub")||0,xa=function(a){function c(){}function b(){T&&T();T=null}function d(){w.time(function(a){a||b();setTimeout(d,h)})}function e(){Y()||b();setTimeout(e,D)}function u(a){var b=0;M(ha(y),function(c){if(c=y[c])b++,(a||q())(c)});return b}function r(a){a&&(x.g=0);!x.g&&x.length&&(x.g=1,z(x.shift()))}XORIGN=0;var p=a.subscribe_key||"";a.uuid||U.get(p+"uuid");a.xdr=ua;a.db=U;a.error=ma;a._is_online=va;a.jsonp_cb=ra;var g,
B=+a.windowing||10,t=(+a.timeout||310)*D,h=(+a.keepalive||3600)*D,n=a.publish_key||"",i=a.subscribe_key||"",j=a.auth_key||"",O=a.ssl?"s":"",f="http"+O+"://"+(a.origin||"pubsub.pubnub.com"),H=K(f),ia=K(f),x=[],ja=0,ka=0,T=0,Z=0,I=0,y={},z=a.xdr,k=a.error||q(),Y=a._is_online||function(){return 1},E=a.jsonp_cb||function(){return 0},J=a.db||{get:q(),set:q()},A=a.uuid||J&&J.get(i+"uuid")||"",w={LEAVE:function(a,b){var c={uuid:A,auth:j},d=K(f),e=E();0<a.indexOf(C)||("0"!=e&&(c.callback=e),z({i:b||O,timeout:2E3,
a:e,data:c,url:[d,"v2","presence","sub_key",i,"channel",P(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||q(),f=a.channel,g=a.start,h=a.end,l={},s=E();if(!f)return k("Missing Channel");if(!b)return k("Missing Callback");if(!i)return k("Missing Subscribe Key");l.stringtoken="true";l.count=c;l.reverse=d;l.auth=j;s&&(l.callback=s);g&&(l.start=g);h&&(l.end=h);z({a:s,data:l,b:function(a){b(a)},d:e,url:[H,"v2","history","sub-key",i,"channel",
P(f)]})},replay:function(a){var b=b||a.callback||q(),c=a.source,d=a.destination,e=a.stop,f=a.start,g=a.end,h=a.reverse,a=a.limit,l=E(),s={};if(!c)return k("Missing Source Channel");if(!d)return k("Missing Destination Channel");if(!n)return k("Missing Publish Key");if(!i)return k("Missing Subscribe Key");"0"!=l&&(s.callback=l);e&&(s.stop="all");h&&(s.reverse="true");f&&(s.start=f);g&&(s.end=g);a&&(s.count=a);s.auth=j;z({a:l,b:function(a){b(a)},d:function(){b([0,"Disconnected"])},url:[H,"v1","replay",
n,i,c,d],data:s})},auth:function(a){j=a;c()},time:function(a){var b=E();z({a:b,data:{uuid:A,auth:j},timeout:5*D,url:[H,"time",b],b:function(b){a(b[0])},d:function(){a(0)}})},publish:function(a,b){var b=b||a.callback||q(),c=a.message,d=a.channel,e=E();if(!c)return k("Missing Message");if(!d)return k("Missing Channel");if(!n)return k("Missing Publish Key");if(!i)return k("Missing Subscribe Key");c=JSON.stringify(c);d=[H,"publish",n,i,0,P(d),e,P(c)];x.push({a:e,timeout:5*D,url:d,data:{uuid:A,auth:j},
b:function(a){b(a);r(1)},d:function(){b([0,"Failed",c]);r(1)}});r()},unsubscribe:function(a){a=a.channel;I=0;Z=1;a=N((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+C}).join(",");M(a.split(","),function(a){v&&w.LEAVE(a,0);y[a]=0});2>u()&&c()},subscribe:function(a,d){function e(a){a?setTimeout(c,D):(H=K(f,1),ia=K(f,1),setTimeout(function(){w.time(e)},D));u(function(b){if(a&&b.c)return b.c=0,b.l(b.name);!a&&!b.c&&(b.c=1,b.k(b.name))})}function g(){var a=E(),d=ha(y).join(",");d&&(b(),
T=z({timeout:Y,a:a,d:function(){w.time(e)},data:{uuid:A,auth:j},url:[ia,"subscribe",i,P(d),a,I],b:function(a){if(!a)return setTimeout(c,$);I=!I&&Z&&J.get(i)||a[1];u(function(a){a.e||(a.e=1,a.j(a.name))});x&&(I=1E4,x=0);J.set(i,a[1]);var b,d=(2<a.length?a[2]:N(y,function(b){return N(Array(a[0].length).join(",").split(","),function(){return b})}).join(",")).split(",");b=function(){var a=d.shift()||ka;return[(y[a]||{}).a||ja,a.split(C)[0]]};M(a[0],function(c){var d=b();d[0](c,a,d[1])});setTimeout(g,
$)}}))}var h=a.channel,d=(d=d||a.callback)||a.message,n=a.connect||q(),p=a.reconnect||q(),r=a.disconnect||q(),l=a.presence||0,s=a.noheresync||0,x=a.backfill||0,O=a.timetoken||0,Y=a.timeout||t,$=a.windowing||B;Z=a.restore;I=O;if(!h)return k("Missing Channel");if(!d)return k("Missing Callback");if(!i)return k("Missing Subscribe Key");M((h.join?h.join(","):""+h).split(","),function(a){var b=y[a]||{};y[ka=a]={name:a,e:b.e,c:b.c,h:1,a:ja=d,j:n,k:r,l:p};l&&(w.subscribe({channel:a+C,callback:l}),!b.h&&!s&&
w.here_now({channel:a,callback:function(b){M("uuids"in b?b.uuids:[],function(c){l({action:"join",uuid:c,timestamp:G(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){b();setTimeout(g,$)};if(!v)return ba.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||q(),d=a.channel,e=E(),f={uuid:A,auth:j};if(!d)return k("Missing Channel");if(!b)return k("Missing Callback");if(!i)return k("Missing Subscribe Key");"0"!=e&&(f.callback=e);z({a:e,data:f,b:function(a){b(a)},d:c,url:[H,"v2","presence",
"sub_key",i,"channel",P(d)]})},xdr:z,ready:la,db:J,uuid:da,map:N,each:M,"each-channel":u,grep:fa,supplant:ga,now:G,unique:F,updater:ea};A||(A=w.uuid());J.set(i+"uuid",A);setTimeout(e,D);setTimeout(d,h);w.time(q());g=w;g.css=pa;g.$=Q;g.create=qa;g.bind=R;g.head=oa;g.search=na;g.attr=S;g.events=W;g.init=xa;R("beforeunload",window,function(){g["each-channel"](function(a){g.LEAVE(a.name,1)});return!0});if(a.notest)return g;R("offline",window,g._reset_offline);R("offline",document,g._reset_offline);return g};
R("load",window,function(){setTimeout(la,0)});var X=wa||{};PUBNUB=xa({notest:1,publish_key:S(X,"pub-key"),subscribe_key:S(X,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==S(X,"ssl"),origin:S(X,"origin"),uuid:S(X,"uuid")})}
var ya=PUBNUB.ws=function(a,c){if(!(this instanceof ya))return new ya(a,c);var b=this,a=b.url=a||"";b.protocol=c||"Sec-WebSocket-Protocol";var d=a.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=b.onsend=
q();b.binaryType="";b.extensions="";b.bufferedAmount=0;b.trasnmitting=m;b.buffer=[];b.readyState=b.CONNECTING;if(!a)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),b;b.f=PUBNUB.init(d);b.f.m=d;b.m=d;b.f.subscribe({restore:m,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:m})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=b.OPEN;b.onopen()}})};
})();
