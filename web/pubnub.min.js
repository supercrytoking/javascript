// 3.4.3
(function(){
function r(b){throw b;}var t=!0,u=null,v=!1;function y(){return function(){}}function A(b){return function(){return b}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var E=1,H=v,I=[],K="-pnpres",aa=10,L=1E4,ba=310,ca=60,M=1E3,da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var Q,ea=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++ea?ea:ea=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),h=a.channel,f=a.start,i=a.end,k={},q=C();if(!h)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");k.stringtoken="true";k.count=c;k.reverse=d;q&&(k.callback=
q);f&&(k.start=f);i&&(k.end=i);z({b:q,data:k,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(h)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,h=a.start,f=a.end,i=a.reverse,a=a.limit,k=C(),q={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=k&&(q.callback=k);e&&(q.stop="all");i&&(q.reverse="true");h&&(q.start=
h);f&&(q.end=f);a&&(q.count=a);z({b:k,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:q})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,h=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),h,X(d)];m.push({b:h,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function q(a){a?U(l,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(q)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function l(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:W,b:a,c:function(){s.time(q)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(l,N);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(l,N)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,gc=a.connect||y(),w=
a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.timeout||k,N=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:gc,l:ia,m:w};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(l,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),h=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(h={},h.callback=e);z({b:e,data:h,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,
map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ma=function(b){return document.getElementById(b)},na=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},oa=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},pa=
function(){return na("head")[0]},qa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},ra=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},sa=function(b){return document.createElement(b)},va=function(){return ta||ua()?0:O()},ya=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=ma(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(ta||ua()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=ua()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(wa);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(xa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ta=0;b=ya(b);break a}b=g}return b}var n=sa("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[za]=za);n.onerror=function(){c(1)};n.src=b.url.join(wa);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(xa)}qa(n,"id",f);pa().appendChild(n);return c},Aa=function(){return!("onLine"in
navigator)?1:navigator.onLine},ua=function(){if(!Ba||!Ba.get)return 0;var b={id:ua.id++,send:y(),abort:function(){b.id={}},open:function(c,a){ua[b.id]=b;Ba.get(b.id,a)}};return b},za="async",wa="/",xa="&",ta=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Ca,Da=window.localStorage;Ca={get:function(b){try{return Da?Da.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Da)return Da.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Ea={list:{},unbind:function(b){Ea.list[b]=[]},bind:function(b,c){(Ea.list[b]=Ea.list[b]||[]).push(c)},fire:function(b,c){T(Ea.list[b]||[],function(a){a(c)})}},Fa=ma("pubnub")||0,Ga=function(b){b.jsonp&&(ta=0);var c=b.subscribe_key||"";b.uuid||Ca.get(c+"uuid");b.xdr=ya;b.db=Ca;b._is_online=Aa;b.jsonp_cb=
va;var a=$(b);a.css=ra;a.$=ma;a.create=sa;a.bind=oa;a.head=pa;a.search=na;a.attr=qa;a.events=Ea;a.init=Ga;if(b.notest)return a;oa("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});oa("offline",window,a._reset_offline);oa("offline",document,a._reset_offline);return a};oa("load",window,function(){U(Z,0)});var Ia=Fa||{};PUBNUB=Ga({notest:1,publish_key:qa(Ia,"pub-key"),subscribe_key:qa(Ia,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==qa(Ia,"ssl"),
origin:qa(Ia,"origin"),uuid:qa(Ia,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Ba=ma("pubnubs")||0;if(Fa){ra(Fa,{position:"absolute",top:-M});if("opera"in window||qa(Fa,"flash"))Fa.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return ua[b].onerror();
ua[b].responseText=unescape(c);ua[b].onload()};ua.id=M}}
var Ja=PUBNUB.ws=function(b,c){if(!(this instanceof Ja))return new Ja(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ja.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Ka=PUBNUB.ws=function(b,c){if(!(this instanceof Ka))return new Ka(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ka.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var La=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++La?La:La=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,k={},q=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");k.stringtoken="true";k.count=c;k.reverse=d;q&&(k.callback=
q);h&&(k.start=h);i&&(k.end=i);z({b:q,data:k,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,k=C(),q={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=k&&(q.callback=k);e&&(q.stop="all");i&&(q.reverse="true");f&&(q.start=
f);h&&(q.end=h);a&&(q.count=a);z({b:k,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:q})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function q(a){a?U(l,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(q)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function l(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:W,b:a,c:function(){s.time(q)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(l,N);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(l,N)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,gc=a.connect||y(),w=
a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.timeout||k,N=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:gc,l:ia,m:w};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(l,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,
map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ma=function(b){return document.getElementById(b)},Na=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Oa=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Pa=
function(){return Na("head")[0]},Qa=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Ra=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Sa=function(b){return document.createElement(b)},Va=function(){return Ta||Ua()?0:O()},Ya=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Ma(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Ta||Ua()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=Ua()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Wa);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Xa)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Ta=0;b=Ya(b);break a}b=g}return b}var n=Sa("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Za]=Za);n.onerror=function(){c(1)};n.src=b.url.join(Wa);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Xa)}Qa(n,"id",f);Pa().appendChild(n);return c},$a=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ua=function(){if(!ab||!ab.get)return 0;var b={id:Ua.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Ua[b.id]=b;ab.get(b.id,a)}};return b},Za="async",Wa="/",Xa="&",Ta=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var bb,cb=window.localStorage;bb={get:function(b){try{return cb?cb.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(cb)return cb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var db={list:{},unbind:function(b){db.list[b]=[]},bind:function(b,c){(db.list[b]=db.list[b]||[]).push(c)},fire:function(b,c){T(db.list[b]||[],function(a){a(c)})}},eb=Ma("pubnub")||0,fb=function(b){b.jsonp&&(Ta=0);var c=b.subscribe_key||"";b.uuid||bb.get(c+"uuid");b.xdr=Ya;b.db=bb;b._is_online=$a;b.jsonp_cb=
Va;var a=$(b);a.css=Ra;a.$=Ma;a.create=Sa;a.bind=Oa;a.head=Pa;a.search=Na;a.attr=Qa;a.events=db;a.init=fb;if(b.notest)return a;Oa("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Oa("offline",window,a._reset_offline);Oa("offline",document,a._reset_offline);return a};Oa("load",window,function(){U(Z,0)});var gb=eb||{};PUBNUB=fb({notest:1,publish_key:Qa(gb,"pub-key"),subscribe_key:Qa(gb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Qa(gb,"ssl"),
origin:Qa(gb,"origin"),uuid:Qa(gb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var ab=Ma("pubnubs")||0;if(eb){Ra(eb,{position:"absolute",top:-M});if("opera"in window||Qa(eb,"flash"))eb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ua[b].onerror();
Ua[b].responseText=unescape(c);Ua[b].onload()};Ua.id=M}}
var hb=PUBNUB.ws=function(b,c){if(!(this instanceof hb))return new hb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
hb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ib=PUBNUB.ws=function(b,c){if(!(this instanceof ib))return new ib(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ib.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var jb=function(b){return document.getElementById(b)},kb=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},lb=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},mb=
function(){return kb("head")[0]},nb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},ob=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},pb=function(b){return document.createElement(b)},sb=function(){return qb||rb()?0:O()},vb=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=jb(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(qb||rb()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=rb()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(tb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(ub)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);qb=0;b=vb(b);break a}b=g}return b}var n=pb("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[wb]=wb);n.onerror=function(){c(1)};n.src=b.url.join(tb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(ub)}nb(n,"id",f);mb().appendChild(n);return c},xb=function(){return!("onLine"in
navigator)?1:navigator.onLine},rb=function(){if(!yb||!yb.get)return 0;var b={id:rb.id++,send:y(),abort:function(){b.id={}},open:function(c,a){rb[b.id]=b;yb.get(b.id,a)}};return b},wb="async",tb="/",ub="&",qb=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var zb,Ab=window.localStorage;zb={get:function(b){try{return Ab?Ab.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Ab)return Ab.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Bb={list:{},unbind:function(b){Bb.list[b]=[]},bind:function(b,c){(Bb.list[b]=Bb.list[b]||[]).push(c)},fire:function(b,c){T(Bb.list[b]||[],function(a){a(c)})}},Cb=jb("pubnub")||0,Db=function(b){b.jsonp&&(qb=0);var c=b.subscribe_key||"";b.uuid||zb.get(c+"uuid");b.xdr=vb;b.db=zb;b._is_online=xb;b.jsonp_cb=
sb;var a=$(b);a.css=ob;a.$=jb;a.create=pb;a.bind=lb;a.head=mb;a.search=kb;a.attr=nb;a.events=Bb;a.init=Db;if(b.notest)return a;lb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});lb("offline",window,a._reset_offline);lb("offline",document,a._reset_offline);return a};lb("load",window,function(){U(Z,0)});var Eb=Cb||{};PUBNUB=Db({notest:1,publish_key:nb(Eb,"pub-key"),subscribe_key:nb(Eb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==nb(Eb,"ssl"),
origin:nb(Eb,"origin"),uuid:nb(Eb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var yb=jb("pubnubs")||0;if(Cb){ob(Cb,{position:"absolute",top:-M});if("opera"in window||nb(Cb,"flash"))Cb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return rb[b].onerror();
rb[b].responseText=unescape(c);rb[b].onload()};rb.id=M}}
var Fb=PUBNUB.ws=function(b,c){if(!(this instanceof Fb))return new Fb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Fb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Gb=PUBNUB.ws=function(b,c){if(!(this instanceof Gb))return new Gb(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Gb.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var Hb=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Hb?Hb:Hb=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,k={},j=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");k.stringtoken="true";k.count=c;k.reverse=d;j&&(k.callback=
j);h&&(k.start=h);i&&(k.end=i);z({b:j,data:k,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,k=C(),j={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=k&&(j.callback=k);e&&(j.stop="all");i&&(j.reverse="true");f&&(j.start=
f);h&&(j.end=h);a&&(j.count=a);z({b:k,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:j})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(q,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function q(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:W,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(q,N);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(q,N)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),Ha=
a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.timeout||k,N=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:Ha};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(q,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,
map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ib=function(b){return document.getElementById(b)},Jb=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Kb=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Lb=
function(){return Jb("head")[0]},Mb=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Nb=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Ob=function(b){return document.createElement(b)},Rb=function(){return Pb||Qb()?0:O()},Ub=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Ib(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Pb||Qb()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=Qb()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Sb);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Tb)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Pb=0;b=Ub(b);break a}b=g}return b}var n=Ob("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Vb]=Vb);n.onerror=function(){c(1)};n.src=b.url.join(Sb);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Tb)}Mb(n,"id",f);Lb().appendChild(n);return c},Wb=function(){return!("onLine"in
navigator)?1:navigator.onLine},Qb=function(){if(!Xb||!Xb.get)return 0;var b={id:Qb.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Qb[b.id]=b;Xb.get(b.id,a)}};return b},Vb="async",Sb="/",Tb="&",Pb=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Yb,Zb=window.localStorage;Yb={get:function(b){try{return Zb?Zb.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Zb)return Zb.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var $b={list:{},unbind:function(b){$b.list[b]=[]},bind:function(b,c){($b.list[b]=$b.list[b]||[]).push(c)},fire:function(b,c){T($b.list[b]||[],function(a){a(c)})}},ac=Ib("pubnub")||0,bc=function(b){b.jsonp&&(Pb=0);var c=b.subscribe_key||"";b.uuid||Yb.get(c+"uuid");b.xdr=Ub;b.db=Yb;b._is_online=Wb;b.jsonp_cb=
Rb;var a=$(b);a.css=Nb;a.$=Ib;a.create=Ob;a.bind=Kb;a.head=Lb;a.search=Jb;a.attr=Mb;a.events=$b;a.init=bc;if(b.notest)return a;Kb("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Kb("offline",window,a._reset_offline);Kb("offline",document,a._reset_offline);return a};Kb("load",window,function(){U(Z,0)});var cc=ac||{};PUBNUB=bc({notest:1,publish_key:Mb(cc,"pub-key"),subscribe_key:Mb(cc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Mb(cc,"ssl"),
origin:Mb(cc,"origin"),uuid:Mb(cc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Xb=Ib("pubnubs")||0;if(ac){Nb(ac,{position:"absolute",top:-M});if("opera"in window||Mb(ac,"flash"))ac.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Qb[b].onerror();
Qb[b].responseText=unescape(c);Qb[b].onload()};Qb.id=M}}
var dc=PUBNUB.ws=function(b,c){if(!(this instanceof dc))return new dc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
dc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ec=PUBNUB.ws=function(b,c){if(!(this instanceof ec))return new ec(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ec.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var fc=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++fc?fc:fc=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(q,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function q(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:W,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(q,N);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(q,N)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),Ha=
a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.timeout||k,N=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:Ha};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(q,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,
map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var hc=function(b){return document.getElementById(b)},ic=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},jc=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},kc=
function(){return ic("head")[0]},lc=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},mc=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},nc=function(b){return document.createElement(b)},qc=function(){return oc||pc()?0:O()},tc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=hc(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(oc||pc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=pc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(rc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(sc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);oc=0;b=tc(b);break a}b=g}return b}var n=nc("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[uc]=uc);n.onerror=function(){c(1)};n.src=b.url.join(rc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(sc)}lc(n,"id",f);kc().appendChild(n);return c},vc=function(){return!("onLine"in
navigator)?1:navigator.onLine},pc=function(){if(!wc||!wc.get)return 0;var b={id:pc.id++,send:y(),abort:function(){b.id={}},open:function(c,a){pc[b.id]=b;wc.get(b.id,a)}};return b},uc="async",rc="/",sc="&",oc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var xc,yc=window.localStorage;xc={get:function(b){try{return yc?yc.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(yc)return yc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var zc={list:{},unbind:function(b){zc.list[b]=[]},bind:function(b,c){(zc.list[b]=zc.list[b]||[]).push(c)},fire:function(b,c){T(zc.list[b]||[],function(a){a(c)})}},Ac=hc("pubnub")||0,Bc=function(b){b.jsonp&&(oc=0);var c=b.subscribe_key||"";b.uuid||xc.get(c+"uuid");b.xdr=tc;b.db=xc;b._is_online=vc;b.jsonp_cb=
qc;var a=$(b);a.css=mc;a.$=hc;a.create=nc;a.bind=jc;a.head=kc;a.search=ic;a.attr=lc;a.events=zc;a.init=Bc;if(b.notest)return a;jc("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});jc("offline",window,a._reset_offline);jc("offline",document,a._reset_offline);return a};jc("load",window,function(){U(Z,0)});var Cc=Ac||{};PUBNUB=Bc({notest:1,publish_key:lc(Cc,"pub-key"),subscribe_key:lc(Cc,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==lc(Cc,"ssl"),
origin:lc(Cc,"origin"),uuid:lc(Cc,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var wc=hc("pubnubs")||0;if(Ac){mc(Ac,{position:"absolute",top:-M});if("opera"in window||lc(Ac,"flash"))Ac.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return pc[b].onerror();
pc[b].responseText=unescape(c);pc[b].onload()};pc.id=M}}
var Dc=PUBNUB.ws=function(b,c){if(!(this instanceof Dc))return new Dc(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Dc.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Ec=PUBNUB.ws=function(b,c){if(!(this instanceof Ec))return new Ec(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ec.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var Fc=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Fc?Fc:Fc=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(q,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function q(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:W,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(q,N);d(function(a){a.g||(a.g=1,a.k(a.name))});(B=!B&&D&&F.get(p)||a[1])&&F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(q,N)}}))}var m=a.channel,b=(b=b||a.callback)||a.message,w=a.connect||y(),Ha=
a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.timeout||k,N=a.windowing||e;a.restore&&(D=1);B=0;if(!m)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((m.join?m.join(","):""+m).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:Ha};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in b?b.uuids:[],function(c){R({action:"join",
uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(q,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,
map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Gc=function(b){return document.getElementById(b)},Hc=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Ic=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Jc=
function(){return Hc("head")[0]},Kc=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Lc=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Mc=function(b){return document.createElement(b)},Pc=function(){return Nc||Oc()?0:O()},Sc=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Gc(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Nc||Oc()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=Oc()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Qc);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Rc)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Nc=0;b=Sc(b);break a}b=g}return b}var n=Mc("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Tc]=Tc);n.onerror=function(){c(1)};n.src=b.url.join(Qc);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Rc)}Kc(n,"id",f);Jc().appendChild(n);return c},Uc=function(){return!("onLine"in
navigator)?1:navigator.onLine},Oc=function(){if(!Vc||!Vc.get)return 0;var b={id:Oc.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Oc[b.id]=b;Vc.get(b.id,a)}};return b},Tc="async",Qc="/",Rc="&",Nc=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Wc,Xc=window.localStorage;Wc={get:function(b){try{return Xc?Xc.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Xc)return Xc.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Yc={list:{},unbind:function(b){Yc.list[b]=[]},bind:function(b,c){(Yc.list[b]=Yc.list[b]||[]).push(c)},fire:function(b,c){T(Yc.list[b]||[],function(a){a(c)})}},Zc=Gc("pubnub")||0,$c=function(b){b.jsonp&&(Nc=0);var c=b.subscribe_key||"";b.uuid||Wc.get(c+"uuid");b.xdr=Sc;b.db=Wc;b._is_online=Uc;b.jsonp_cb=
Pc;var a=$(b);a.css=Lc;a.$=Gc;a.create=Mc;a.bind=Ic;a.head=Jc;a.search=Hc;a.attr=Kc;a.events=Yc;a.init=$c;if(b.notest)return a;Ic("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Ic("offline",window,a._reset_offline);Ic("offline",document,a._reset_offline);return a};Ic("load",window,function(){U(Z,0)});var ad=Zc||{};PUBNUB=$c({notest:1,publish_key:Kc(ad,"pub-key"),subscribe_key:Kc(ad,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Kc(ad,"ssl"),
origin:Kc(ad,"origin"),uuid:Kc(ad,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Vc=Gc("pubnubs")||0;if(Zc){Lc(Zc,{position:"absolute",top:-M});if("opera"in window||Kc(Zc,"flash"))Zc.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Oc[b].onerror();
Oc[b].responseText=unescape(c);Oc[b].onload()};Oc.id=M}}
var bd=PUBNUB.ws=function(b,c){if(!(this instanceof bd))return new bd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
bd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var cd=PUBNUB.ws=function(b,c){if(!(this instanceof cd))return new cd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
cd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var dd=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++dd?dd:dd=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:ka,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,ja);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];W&&(Timetoken=1E4,W=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,ja)}}))}var q=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),Ha=a.reconnect||y(),N=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.backfill||0,ka=a.timeout||k,ja=a.windowing||e;a.restore&&(D=1);B=0;if(!q)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((q.join?q.join(","):""+q).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:N,m:Ha};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ed=function(b){return document.getElementById(b)},fd=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},gd=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},hd=
function(){return fd("head")[0]},id=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},jd=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},kd=function(b){return document.createElement(b)},nd=function(){return ld||md()?0:O()},qd=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=ed(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(ld||md()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=md()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(od);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(pd)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ld=0;b=qd(b);break a}b=g}return b}var n=kd("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[rd]=rd);n.onerror=function(){c(1)};n.src=b.url.join(od);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(pd)}id(n,"id",f);hd().appendChild(n);return c},sd=function(){return!("onLine"in
navigator)?1:navigator.onLine},md=function(){if(!td||!td.get)return 0;var b={id:md.id++,send:y(),abort:function(){b.id={}},open:function(c,a){md[b.id]=b;td.get(b.id,a)}};return b},rd="async",od="/",pd="&",ld=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var ud,vd=window.localStorage;ud={get:function(b){try{return vd?vd.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(vd)return vd.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var wd={list:{},unbind:function(b){wd.list[b]=[]},bind:function(b,c){(wd.list[b]=wd.list[b]||[]).push(c)},fire:function(b,c){T(wd.list[b]||[],function(a){a(c)})}},xd=ed("pubnub")||0,yd=function(b){b.jsonp&&(ld=0);var c=b.subscribe_key||"";b.uuid||ud.get(c+"uuid");b.xdr=qd;b.db=ud;b._is_online=sd;b.jsonp_cb=
nd;var a=$(b);a.css=jd;a.$=ed;a.create=kd;a.bind=gd;a.head=hd;a.search=fd;a.attr=id;a.events=wd;a.init=yd;if(b.notest)return a;gd("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});gd("offline",window,a._reset_offline);gd("offline",document,a._reset_offline);return a};gd("load",window,function(){U(Z,0)});var zd=xd||{};PUBNUB=yd({notest:1,publish_key:id(zd,"pub-key"),subscribe_key:id(zd,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==id(zd,"ssl"),
origin:id(zd,"origin"),uuid:id(zd,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var td=ed("pubnubs")||0;if(xd){jd(xd,{position:"absolute",top:-M});if("opera"in window||id(xd,"flash"))xd.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return md[b].onerror();
md[b].responseText=unescape(c);md[b].onload()};md.id=M}}
var Ad=PUBNUB.ws=function(b,c){if(!(this instanceof Ad))return new Ad(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Ad.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Bd=PUBNUB.ws=function(b,c){if(!(this instanceof Bd))return new Bd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Bd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var Cd=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Cd?Cd:Cd=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:ka,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,ja);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];W&&(Timetoken=1E4,W=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,ja)}}))}var q=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),N=a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.backfill||0,ka=a.timeout||k,ja=a.windowing||e;a.restore&&(D=1);B=0;if(!q)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((q.join?q.join(","):""+q).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:N};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Dd=function(b){return document.getElementById(b)},Ed=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Fd=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},Gd=
function(){return Ed("head")[0]},Hd=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Id=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Jd=function(b){return document.createElement(b)},Md=function(){return Kd||Ld()?0:O()},Pd=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Dd(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(Kd||Ld()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=Ld()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Nd);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Od)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);Kd=0;b=Pd(b);break a}b=g}return b}var n=Jd("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Qd]=Qd);n.onerror=function(){c(1)};n.src=b.url.join(Nd);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Od)}Hd(n,"id",f);Gd().appendChild(n);return c},Rd=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ld=function(){if(!Sd||!Sd.get)return 0;var b={id:Ld.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Ld[b.id]=b;Sd.get(b.id,a)}};return b},Qd="async",Nd="/",Od="&",Kd=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Td,Ud=window.localStorage;Td={get:function(b){try{return Ud?Ud.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Ud)return Ud.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Vd={list:{},unbind:function(b){Vd.list[b]=[]},bind:function(b,c){(Vd.list[b]=Vd.list[b]||[]).push(c)},fire:function(b,c){T(Vd.list[b]||[],function(a){a(c)})}},Wd=Dd("pubnub")||0,Xd=function(b){b.jsonp&&(Kd=0);var c=b.subscribe_key||"";b.uuid||Td.get(c+"uuid");b.xdr=Pd;b.db=Td;b._is_online=Rd;b.jsonp_cb=
Md;var a=$(b);a.css=Id;a.$=Dd;a.create=Jd;a.bind=Fd;a.head=Gd;a.search=Ed;a.attr=Hd;a.events=Vd;a.init=Xd;if(b.notest)return a;Fd("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Fd("offline",window,a._reset_offline);Fd("offline",document,a._reset_offline);return a};Fd("load",window,function(){U(Z,0)});var Yd=Wd||{};PUBNUB=Xd({notest:1,publish_key:Hd(Yd,"pub-key"),subscribe_key:Hd(Yd,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Hd(Yd,"ssl"),
origin:Hd(Yd,"origin"),uuid:Hd(Yd,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Sd=Dd("pubnubs")||0;if(Wd){Id(Wd,{position:"absolute",top:-M});if("opera"in window||Hd(Wd,"flash"))Wd.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ld[b].onerror();
Ld[b].responseText=unescape(c);Ld[b].onload()};Ld.id=M}}
var Zd=PUBNUB.ws=function(b,c){if(!(this instanceof Zd))return new Zd(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Zd.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var $d=PUBNUB.ws=function(b,c){if(!(this instanceof $d))return new $d(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
$d.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var ae=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++ae?ae:ae=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:ka,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,ja);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];W&&(Timetoken=1E4,W=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,ja)}}))}var q=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),N=a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.backfill||0,ka=a.timeout||k,ja=a.windowing||e;a.restore&&(D=1);B=0;if(!q)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((q.join?q.join(","):""+q).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:N};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var be=function(b){return document.getElementById(b)},ce=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},de=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},ee=
function(){return ce("head")[0]},fe=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},ge=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},he=function(b){return document.createElement(b)},ke=function(){return ie||je()?0:O()},ne=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=be(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(ie||je()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=je()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(le);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(me)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ie=0;b=ne(b);break a}b=g}return b}var n=he("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[oe]=oe);n.onerror=function(){c(1)};n.src=b.url.join(le);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(me)}fe(n,"id",f);ee().appendChild(n);return c},pe=function(){return!("onLine"in
navigator)?1:navigator.onLine},je=function(){if(!qe||!qe.get)return 0;var b={id:je.id++,send:y(),abort:function(){b.id={}},open:function(c,a){je[b.id]=b;qe.get(b.id,a)}};return b},oe="async",le="/",me="&",ie=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var re,se=window.localStorage;re={get:function(b){try{return se?se.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(se)return se.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var te={list:{},unbind:function(b){te.list[b]=[]},bind:function(b,c){(te.list[b]=te.list[b]||[]).push(c)},fire:function(b,c){T(te.list[b]||[],function(a){a(c)})}},ue=be("pubnub")||0,ve=function(b){b.jsonp&&(ie=0);var c=b.subscribe_key||"";b.uuid||re.get(c+"uuid");b.xdr=ne;b.db=re;b._is_online=pe;b.jsonp_cb=
ke;var a=$(b);a.css=ge;a.$=be;a.create=he;a.bind=de;a.head=ee;a.search=ce;a.attr=fe;a.events=te;a.init=ve;if(b.notest)return a;de("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});de("offline",window,a._reset_offline);de("offline",document,a._reset_offline);return a};de("load",window,function(){U(Z,0)});var we=ue||{};PUBNUB=ve({notest:1,publish_key:fe(we,"pub-key"),subscribe_key:fe(we,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==fe(we,"ssl"),
origin:fe(we,"origin"),uuid:fe(we,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var qe=be("pubnubs")||0;if(ue){ge(ue,{position:"absolute",top:-M});if("opera"in window||fe(ue,"flash"))ue.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return je[b].onerror();
je[b].responseText=unescape(c);je[b].onload()};je.id=M}}
var xe=PUBNUB.ws=function(b,c){if(!(this instanceof xe))return new xe(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
xe.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var ye=PUBNUB.ws=function(b,c){if(!(this instanceof ye))return new ye(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
ye.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var ze=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++ze?ze:ze=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:ka,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,ja);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];W&&(Timetoken=1E4,W=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,ja)}}))}var q=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),N=a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.backfill||0,ka=a.timeout||k,ja=a.windowing||e;a.restore&&(D=1);B=0;if(!q)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((q.join?q.join(","):""+q).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:N};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ae=function(b){return document.getElementById(b)},Be=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},Ce=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},De=
function(){return Be("head")[0]},Ee=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},Fe=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},Ge=function(b){return document.createElement(b)},Je=function(){return He||Ie()?0:O()},Me=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Ae(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(He||Ie()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=Ie()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(Ke);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(Le)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);He=0;b=Me(b);break a}b=g}return b}var n=Ge("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[Ne]=Ne);n.onerror=function(){c(1)};n.src=b.url.join(Ke);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(Le)}Ee(n,"id",f);De().appendChild(n);return c},Oe=function(){return!("onLine"in
navigator)?1:navigator.onLine},Ie=function(){if(!Pe||!Pe.get)return 0;var b={id:Ie.id++,send:y(),abort:function(){b.id={}},open:function(c,a){Ie[b.id]=b;Pe.get(b.id,a)}};return b},Ne="async",Ke="/",Le="&",He=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var Qe,Re=window.localStorage;Qe={get:function(b){try{return Re?Re.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(Re)return Re.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var Se={list:{},unbind:function(b){Se.list[b]=[]},bind:function(b,c){(Se.list[b]=Se.list[b]||[]).push(c)},fire:function(b,c){T(Se.list[b]||[],function(a){a(c)})}},Te=Ae("pubnub")||0,Ue=function(b){b.jsonp&&(He=0);var c=b.subscribe_key||"";b.uuid||Qe.get(c+"uuid");b.xdr=Me;b.db=Qe;b._is_online=Oe;b.jsonp_cb=
Je;var a=$(b);a.css=Fe;a.$=Ae;a.create=Ge;a.bind=Ce;a.head=De;a.search=Be;a.attr=Ee;a.events=Se;a.init=Ue;if(b.notest)return a;Ce("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});Ce("offline",window,a._reset_offline);Ce("offline",document,a._reset_offline);return a};Ce("load",window,function(){U(Z,0)});var Ve=Te||{};PUBNUB=Ue({notest:1,publish_key:Ee(Ve,"pub-key"),subscribe_key:Ee(Ve,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Ee(Ve,"ssl"),
origin:Ee(Ve,"origin"),uuid:Ee(Ve,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var Pe=Ae("pubnubs")||0;if(Te){Fe(Te,{position:"absolute",top:-M});if("opera"in window||Ee(Te,"flash"))Te.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return Ie[b].onerror();
Ie[b].responseText=unescape(c);Ie[b].onload()};Ie.id=M}}
var We=PUBNUB.ws=function(b,c){if(!(this instanceof We))return new We(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
We.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var Xe=PUBNUB.ws=function(b,c){if(!(this instanceof Xe))return new Xe(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
Xe.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();E=1;H=v;I=[];K="-pnpres";aa=10;L=1E4;ba=310;ca=60;M=1E3;da=/{([\w\-]+)}/g;function O(){return"x"+ ++E+""+ +new Date}function P(){return+new Date}var Ye=Math.floor(20*Math.random());Q=function(b,c){return 0<b.indexOf("pubsub.")&&b.replace("pubsub","ps"+(c?S().split("-")[0]:20>++Ye?Ye:Ye=1))||b};
function fa(b,c){function a(){e+c>P()?(clearTimeout(d),d=setTimeout(a,c)):(e=P(),b())}var d,e=0;return a}function ga(b,c){var a=[];T(b||[],function(b){c(b)&&a.push(b)});return a}function la(b,c){return b.replace(da,function(a,b){return c[b]||a})}function U(b,c){return setTimeout(b,c)}function S(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});b&&b(c);return c}
function T(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var a=0,d=b.length;a<d;)c.call(b[a],b[a],a++);else for(a in b)b.hasOwnProperty&&b.hasOwnProperty(a)&&c.call(b[a],a,b[a])}function V(b,c){var a=[];T(b||[],function(b,e){a.push(c(b,e))});return a}function X(b){return V(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Y(b){var c=[];T(b,function(a,b){b.h&&c.push(a)});return c.sort()}
function Z(){U(function(){H||(H=1,T(I,function(b){b()}))},M)}
function $(b){function c(){}function a(a){a&&(m.j=0);!m.j&&m.length&&(m.j=1,z(m.shift()))}function d(a){T(Y(x),function(b){(b=x[b])&&a(b)})}var e=+b.windowing||aa,k=(+b.timeout||ba)*M,w=(+b.keepalive||ca)*M,l=b.publish_key||"",p=b.subscribe_key||"",q=b.ssl?"s":"",h="http"+q+"://"+(b.origin||"pubsub.pubnub.com"),g=Q(h),i=Q(h),m=[],j=0,n=0,f=0,D=0,J=0,B=0,x={},z=b.xdr,N=b._is_online||A(1),C=b.jsonp_cb||A(0),F=b.db||{get:y(),set:y()},G=b.uuid||F&&F.get(p+"uuid")||"",s={_reset_offline:function(){f&&f(1)},
LEAVE:function(a,b){var c={uuid:G},d=Q(h),e=C();0<a.indexOf(K)||("0"!=e&&(c.callback=e),z({i:b||q,timeout:2E3,b:e,data:c,url:[d,"v2","presence","sub_key",p,"channel",X(a),"leave"]}))},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||y(),f=a.channel,h=a.start,i=a.end,j={},k=C();if(!f)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");j.stringtoken="true";j.count=c;j.reverse=d;k&&(j.callback=
k);h&&(j.start=h);i&&(j.end=i);z({b:k,data:j,d:function(a){b(a)},c:e,url:[g,"v2","history","sub-key",p,"channel",X(f)]})},replay:function(a){var b=b||a.callback||y(),c=a.source,d=a.destination,e=a.stop,f=a.start,h=a.end,i=a.reverse,a=a.limit,j=C(),k={};if(!c)return error("Missing Source Channel");if(!d)return error("Missing Destination Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");"0"!=j&&(k.callback=j);e&&(k.stop="all");i&&(k.reverse="true");f&&(k.start=
f);h&&(k.end=h);a&&(k.count=a);z({b:j,d:function(a){b(a)},c:function(){b([0,"Disconnected"])},url:[g,"v1","replay",l,p,c,d],data:k})},time:function(a){var b=C();z({b:b,timeout:5*M,url:[g,"time",b],d:function(b){a(b[0])},c:function(){a(0)}})},publish:function(b,c){var c=c||b.callback||y(),d=b.message,e=b.channel,f=C();if(!d)return error("Missing Message");if(!e)return error("Missing Channel");if(!l)return error("Missing Publish Key");if(!p)return error("Missing Subscribe Key");d=JSON.stringify(d);
e=[g,"publish",l,p,0,X(e),f,X(d)];m.push({b:f,timeout:5*M,url:e,data:{uuid:G},d:function(b){c(b);a(1)},c:function(){c([0,"Failed",d]);a(1)}});a()},unsubscribe:function(a){a=a.channel;B=0;D=1;a=V((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+K}).join(",");T(a.split(","),function(a){H&&s.LEAVE(a,0);x[a]=0});H&&c()},subscribe:function(a,b){function l(a){a?U(m,M):(g=Q(h,1),i=Q(h,1),U(function(){s.time(l)},M));d(function(b){if(a&&b.f)return b.f=0,b.m(b.name);!a&&!b.f&&(b.f=1,b.l(b.name))})}
function m(){var a=C(),b=Y(x).join(",");b&&(f=z({timeout:ka,b:a,c:function(){s.time(l)},data:{uuid:G},url:[i,"subscribe",p,X(b),a,B],d:function(a){if(!a)return U(m,ja);d(function(a){a.g||(a.g=1,a.k(a.name))});B=!B&&D&&F.get(p)||a[1];W&&(Timetoken=1E4,W=0);F.set(p,a[1]);var b,c=(2<a.length?a[2]:"").split(",");b=function(){var a=c.shift()||"";return[(x[a]||{}).b||j,(a||n).split(K)[0]]};T(a[0],function(c){var d=b();if(x[d[1]].h)d[0](c,a,d[1])});U(m,ja)}}))}var q=a.channel,b=(b=b||a.callback)||a.message,
w=a.connect||y(),N=a.reconnect||y(),ia=a.disconnect||y(),R=a.presence||0,ha=a.noheresync||0,W=a.backfill||0,ka=a.timeout||k,ja=a.windowing||e;a.restore&&(D=1);B=0;if(!q)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");T((q.join?q.join(","):""+q).split(","),function(a){var c=x[a]||{};x[n=a]={name:a,g:c.g,f:c.f,h:1,b:j=b,k:w,l:ia,m:N};R&&(s.subscribe({channel:a+K,callback:R}),!c.h&&!ha&&s.here_now({channel:a,callback:function(b){T("uuids"in
b?b.uuids:[],function(c){R({action:"join",uuid:c,timestamp:P(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){s._reset_offline();clearTimeout(J);J=U(m,100)};if(!H)return I.push(c);c()},here_now:function(a,b){var b=a.callback||b,c=a.error||y(),d=a.channel,e=C(),f=u;if(!d)return error("Missing Channel");if(!b)return error("Missing Callback");if(!p)return error("Missing Subscribe Key");"0"!=e&&(f={},f.callback=e);z({b:e,data:f,d:function(a){b(a)},c:c,url:[g,"v2","presence","sub_key",p,"channel",
X(d)]})},xdr:z,ready:Z,db:F,uuid:S,each:T,map:V,grep:ga,supplant:la,now:P,unique:O,updater:fa,poll_online:function(){N()||s._reset_offline();U(s.poll_online,M)},poll_online2:function(){s.time(function(a){a||s._reset_offline();U(s.poll_online2,w)})}};G||(G=s.uuid());F.set(p+"uuid",G);U(s.poll_online,M);U(s.poll_online2,w);return s}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return u}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=w[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,q){var h,g,i,m,j,n=e,f=q[d];f&&"object"===typeof f&&(f=b.call(f));"function"===typeof l&&(f=l.call(q,d,f));switch(typeof f){case "string":return c(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";e+=k;j=[];if("[object Array]"===Object.prototype.toString.apply(f)){m=f.length;for(h=0;h<m;h+=1)j[h]=a(h,f)||"null";i=0===j.length?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+n+"]":"["+j.join(",")+"]";e=n;return i}if(l&&"object"===typeof l){m=l.length;for(h=0;h<m;h+=1)g=l[h],"string"===typeof g&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i)}else for(g in f)Object.hasOwnProperty.call(f,g)&&(i=a(g,f))&&j.push(c(g)+(e?": ":":")+i);i=0===j.length?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+
n+"}":"{"+j.join(",")+"}";e=n;return i}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var g;k=e="";if("number"===typeof d)for(g=0;g<d;g+=1)k+=" ";else"string"===typeof d&&(k=d);(l=c)&&("function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))&&r(Error("JSON.stringify"));return a("",{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var Ze=function(b){return document.getElementById(b)},$e=function(b,c){var a=[];T(b.split(/\s+/),function(b){T((c||document).getElementsByTagName(b),function(b){a.push(b)})});return a},af=function(b,c,a){T(b.split(","),function(b){function e(b){b||(b=window.event);a(b)||(b.cancelBubble=t,b.returnValue=v,b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation())}c.addEventListener?c.addEventListener(b,e,v):c.attachEvent?c.attachEvent("on"+b,e):c["on"+b]=e})},bf=
function(){return $e("head")[0]},cf=function(b,c,a){if(a)b.setAttribute(c,a);else return b&&b.getAttribute&&b.getAttribute(c)},df=function(b,c){for(var a in c)if(c.hasOwnProperty(a))try{b.style[a]=c[a]+(0<"|width|height|top|left|".indexOf(a)&&"number"==typeof c[a]?"px":"")}catch(d){}},ef=function(b){return document.createElement(b)},hf=function(){return ff||gf()?0:O()},lf=function(b){function c(a,b){D||(D=1,a||x(b),n.onerror=u,clearTimeout(J),U(function(){a&&B();var b=Ze(f),c=b&&b.parentNode;c&&c.removeChild(b)},
M))}if(ff||gf()){a:{var a,d,e=function(){if(!w){w=1;clearTimeout(p);try{d=JSON.parse(a.responseText)}catch(b){return g(1)}h(d)}},k=0,w=0,l=b.timeout||L,p=U(function(){g(1)},l),q=b.c||y(),h=b.d||y(),g=function(b){k||(k=1,clearTimeout(p),a&&(a.onerror=a.onload=u,a.abort&&a.abort(),a=u),b&&q())};try{a=gf()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;a.onerror=a.onabort=function(){g(1)};a.onload=a.onloadend=e;a.timeout=l;var i=b.url.join(jf);if(b.data){var e=[],m;console.log(b.data);
i+="?";for(m in b.data)e.push(m+"="+b.data[m]);i+=e.join(kf)}a.open("GET",i,typeof("undefined"===b.i));a.send()}catch(j){g(0);ff=0;b=lf(b);break a}b=g}return b}var n=ef("script"),i=b.b,f=O(),D=0,J=U(function(){c(1)},b.timeout||L),B=b.c||y(),x=b.d||y();window[i]=function(a){c(0,a)};b.i||(n[mf]=mf);n.onerror=function(){c(1)};n.src=b.url.join(jf);if(b.data){i=[];n.src+="?";for(e in b.data)i.push(e+"="+b.data[e]);n.src+=i.join(kf)}cf(n,"id",f);bf().appendChild(n);return c},nf=function(){return!("onLine"in
navigator)?1:navigator.onLine},gf=function(){if(!of||!of.get)return 0;var b={id:gf.id++,send:y(),abort:function(){b.id={}},open:function(c,a){gf[b.id]=b;of.get(b.id,a)}};return b},mf="async",jf="/",kf="&",ff=-1==navigator.userAgent.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||y());var pf,qf=window.localStorage;pf={get:function(b){try{return qf?qf.getItem(b):-1==document.cookie.indexOf(b)?u:((document.cookie||
"").match(RegExp(b+"=([^;]+)"))||[])[1]||u}catch(c){}},set:function(b,c){try{if(qf)return qf.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(a){}}};var rf={list:{},unbind:function(b){rf.list[b]=[]},bind:function(b,c){(rf.list[b]=rf.list[b]||[]).push(c)},fire:function(b,c){T(rf.list[b]||[],function(a){a(c)})}},sf=Ze("pubnub")||0,tf=function(b){b.jsonp&&(ff=0);var c=b.subscribe_key||"";b.uuid||pf.get(c+"uuid");b.xdr=lf;b.db=pf;b._is_online=nf;b.jsonp_cb=
hf;var a=$(b);a.css=df;a.$=Ze;a.create=ef;a.bind=af;a.head=bf;a.search=$e;a.attr=cf;a.events=rf;a.init=tf;if(b.notest)return a;af("beforeunload",window,function(){each_channel(function(b){a.LEAVE(b.name,1)});return t});af("offline",window,a._reset_offline);af("offline",document,a._reset_offline);return a};af("load",window,function(){U(Z,0)});var uf=sf||{};PUBNUB=tf({notest:1,publish_key:cf(uf,"pub-key"),subscribe_key:cf(uf,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==cf(uf,"ssl"),
origin:cf(uf,"origin"),uuid:cf(uf,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Z();var of=Ze("pubnubs")||0;if(sf){df(sf,{position:"absolute",top:-M});if("opera"in window||cf(sf,"flash"))sf.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(b,c){if(!c)return gf[b].onerror();
gf[b].responseText=unescape(c);gf[b].onload()};gf.id=M}}
var vf=PUBNUB.ws=function(b,c){if(!(this instanceof vf))return new vf(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
vf.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
var wf=PUBNUB.ws=function(b,c){if(!(this instanceof wf))return new wf(b,c);var a=this,b=a.url=b||"";a.protocol=c||"Sec-WebSocket-Protocol";var d=b.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=a.onsend=
y();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=v;a.buffer=[];a.readyState=a.CONNECTING;if(!b)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:t}),a;a.a=PUBNUB.init(d);a.a.e=d;a.e=d;a.a.subscribe({restore:v,channel:d.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:v})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=a.OPEN;a.onopen()}})};
wf.prototype.send=function(b){var c=this;c.a.publish({channel:c.a.e.channel,message:b,callback:function(a){c.onsend({data:a})}})};
})();
