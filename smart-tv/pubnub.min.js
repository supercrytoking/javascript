// Version: 3.5.3.1
(function(){
function t(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function b(){try{return this.valueOf()}catch(a){return null}}function c(b){a.lastIndex=0;return a.test(b)?'"'+b.replace(a,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(a,n){var q,f,m,u,l,r=e,g=n[a];g&&"object"===typeof g&&(g=b.call(g));"function"===typeof x&&(g=x.call(n,a,g));switch(typeof g){case "string":return c(g);case "number":return isFinite(g)?String(g):"null";
case "boolean":case "null":return String(g);case "object":if(!g)return"null";e+=w;l=[];if("[object Array]"===Object.prototype.toString.apply(g)){u=g.length;for(q=0;q<u;q+=1)l[q]=d(q,g)||"null";m=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+r+"]":"["+l.join(",")+"]";e=r;return m}if(x&&"object"===typeof x)for(u=x.length,q=0;q<u;q+=1)f=x[q],"string"===typeof f&&(m=d(f,g))&&l.push(c(f)+(e?": ":":")+m);else for(f in g)Object.hasOwnProperty.call(g,f)&&(m=d(f,g))&&l.push(c(f)+(e?": ":":")+m);m=0===l.length?
"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+r+"}":"{"+l.join(",")+"}";e=r;return m}}window.JSON||(window.JSON={});var a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,w,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var f;w=e="";if("number"===typeof c)for(f=0;f<c;f+=1)w+=" ";else"string"===typeof c&&(w=c);if((x=b)&&"function"!==
typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();var v=1,y=!1,E=[],J="-pnpres",K=10,aa=1E4,ba=310,ca=60,M=1E3,da="/",ea="&",fa=/{([\w\-]+)}/g;function N(){return"x"+ ++v+""+ +new Date}function O(){return+new Date}
var T=function(){var b=Math.floor(20*Math.random());return function(c,d){return 0<c.indexOf("pubsub.")&&c.replace("pubsub","ps"+(d?P().split("-")[0]:20>++b?b:b=1))||c}}();function ga(b,c){var d=b.join(da),a=[];if(!c)return d;U(c,function(b,c){a.push(b+"="+V(c))});return d+="?"+a.join(ea)}function ha(b,c){function d(){e+c>O()?(clearTimeout(a),a=setTimeout(d,c)):(e=O(),b())}var a,e=0;return d}function ia(b,c){var d=[];U(b||[],function(a){c(a)&&d.push(a)});return d}
function ja(b,c){return b.replace(fa,function(b,a){return c[a]||b})}function P(b){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"==b?a:a&3|8).toString(16)});b&&b(c);return c}function U(b,c){if(b&&c)if("undefined"!=typeof b[0])for(var d=0,a=b.length;d<a;)c.call(b[d],b[d],d++);else for(d in b)b.hasOwnProperty&&b.hasOwnProperty(d)&&c.call(b[d],d,b[d])}function W(b,c){var d=[];U(b||[],function(a,b){d.push(c(a,b))});return d}
function V(b){return W(encodeURIComponent(b).split(""),function(b){return 0>"-_.!~*'()".indexOf(b)?b:"%"+b.charCodeAt(0).toString(16).toUpperCase()}).join("")}function Z(b){var c=[];U(b,function(b,a){a.h&&c.push(b)});return c.sort()}function $(){setTimeout(function(){y||(y=1,U(E,function(b){b()}))},M)}
function ka(b){function c(){}function d(a){a&&(p.g=0);!p.g&&p.length&&(p.g=1,B(p.shift()))}function a(a){var b=0;U(Z(C),function(c){if(c=C[c])b++,(a||t())(c)});return b}function e(){Q()||n(1);setTimeout(e,M)}function w(){z.time(function(a){a||n(1);setTimeout(w,A)})}function n(a){G&&G(a);G=null}var x=+b.windowing||K,L=(+b.timeout||ba)*M,A=(+b.keepalive||ca)*M,q=b.noleave||0,f=b.publish_key||"",m=b.subscribe_key||"",u=b.auth_key||"",l=b.ssl?"s":"",r="http"+l+"://"+(b.origin||"pubsub.pubnub.com"),g=
T(r),h=T(r),p=[],k=0,X=0,G=0,R=0,H=0,C={},B=b.xdr,s=b.error||t(),Q=b._is_online||function(){return 1},F=b.jsonp_cb||function(){return 0},I=b.db||{get:t(),set:t()},D=b.uuid||I&&I.get(m+"uuid")||"",z={LEAVE:function(a,b){var c={uuid:D,auth:u},h=T(r),k=F();0<a.indexOf(J)||q||("0"!=k&&(c.callback=k),B({i:b||l,timeout:2E3,a:k,data:c,url:[h,"v2","presence","sub_key",m,"channel",V(a),"leave"]}))},history:function(a,b){b=a.callback||b;var c=a.count||a.limit||100,h=a.reverse||"false",k=a.error||t(),p=a.channel,
d=a.start,e=a.end,f={},n=F();if(!p)return s("Missing Channel");if(!b)return s("Missing Callback");if(!m)return s("Missing Subscribe Key");f.stringtoken="true";f.count=c;f.reverse=h;f.auth=u;n&&(f.callback=n);d&&(f.start=d);e&&(f.end=e);B({a:n,data:f,c:function(a){b(a)},b:k,url:[g,"v2","history","sub-key",m,"channel",V(p)]})},replay:function(a){var b=b||a.callback||t(),c=a.source,h=a.destination,k=a.stop,p=a.start,d=a.end,e=a.reverse;a=a.limit;var n=F(),l={};if(!c)return s("Missing Source Channel");
if(!h)return s("Missing Destination Channel");if(!f)return s("Missing Publish Key");if(!m)return s("Missing Subscribe Key");"0"!=n&&(l.callback=n);k&&(l.stop="all");e&&(l.reverse="true");p&&(l.start=p);d&&(l.end=d);a&&(l.count=a);l.auth=u;B({a:n,c:function(a){b(a)},b:function(){b([0,"Disconnected"])},url:[g,"v1","replay",f,m,c,h],data:l})},auth:function(a){u=a;c()},time:function(a){var b=F();B({a:b,data:{uuid:D,auth:u},timeout:5*M,url:[g,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},publish:function(a,
b){b=b||a.callback||t();var c=a.message,h=a.channel,k=F();if(!c)return s("Missing Message");if(!h)return s("Missing Channel");if(!f)return s("Missing Publish Key");if(!m)return s("Missing Subscribe Key");c=JSON.stringify(c);h=[g,"publish",f,m,0,V(h),k,V(c)];p.push({a:k,timeout:5*M,url:h,data:{uuid:D,auth:u},c:function(a){b(a);d(1)},b:function(){b([0,"Failed",c]);d(1)}});d()},unsubscribe:function(a){a=a.channel;H=0;R=1;a=W((a.join?a.join(","):""+a).split(","),function(a){return a+","+a+J}).join(",");
U(a.split(","),function(a){y&&z.LEAVE(a,0);C[a]=0});c()},subscribe:function(b,p){function d(b){b?setTimeout(c,M):(g=T(r,1),h=T(r,1),setTimeout(function(){z.time(d)},M));a(function(a){if(b&&a.d)return a.d=0,a.k(a.name);b||a.d||(a.d=1,a.disconnect(a.name))})}function e(){var b=F(),p=Z(C).join(",");p&&(n(),G=B({timeout:ma,a:b,b:function(){G=null;z.time(d)},data:{uuid:D,auth:u},url:[h,"subscribe",m,V(p),b,H],c:function(b){G=null;if(!b||"object"==typeof b&&"error"in b&&!b.error)return Q(b),setTimeout(c,
S);H=!H&&R&&I.get(m)||b[1];a(function(a){a.e||(a.e=1,a.j(a.name))});Y&&(H=1E4,Y=0);I.set(m,b[1]);var h=function(){var a=(2<b.length?b[2]:W(C,function(a){return W(Array(b[0].length).join(",").split(","),function(){return a})}).join(",")).split(",");return function(){var b=a.shift()||X;return[(C[b]||{}).a||k,b.split(J)[0]]}}();U(b[0],function(a){var c=h();c[0](a,b,c[1])});setTimeout(e,S)}}))}var f=b.channel;p=(p=p||b.callback)||b.message;var l=b.connect||t(),q=b.reconnect||t(),w=b.disconnect||t(),Q=
b.error||t(),A=b.presence||0,la=b.noheresync||0,Y=b.backfill||0,na=b.timetoken||0,ma=b.timeout||L,S=b.windowing||x;R=b.restore;H=na;if(!f)return s("Missing Channel");if(!p)return s("Missing Callback");if(!m)return s("Missing Subscribe Key");U((f.join?f.join(","):""+f).split(","),function(a){var b=C[a]||{};C[X=a]={name:a,e:b.e,d:b.d,h:1,a:k=p,j:l,disconnect:w,k:q};A&&(z.subscribe({channel:a+J,callback:A}),b.h||la||z.here_now({channel:a,callback:function(b){U("uuids"in b?b.uuids:[],function(c){A({action:"join",
uuid:c,timestamp:O(),occupancy:b.occupancy||1},b,a)})}}))});c=function(){n();setTimeout(e,S)};if(!y)return E.push(c);c()},here_now:function(a,b){b=a.callback||b;var c=a.error||t(),h=a.channel,k=F(),p={uuid:D,auth:u};if(!h)return s("Missing Channel");if(!b)return s("Missing Callback");if(!m)return s("Missing Subscribe Key");"0"!=k&&(p.callback=k);B({a:k,data:p,c:function(a){b(a,h)},b:c,url:[g,"v2","presence","sub_key",m,"channel",V(h)]})},xdr:B,ready:$,db:I,uuid:P,map:W,each:U,"each-channel":a,grep:ia,
offline:function(){n(1)},supplant:ja,now:O,unique:N,updater:ha};D||(D=z.uuid());I.set(m+"uuid",D);setTimeout(e,M);setTimeout(w,A);z.time(t());return z}
window.PUBNUB||function(){function b(h){XORIGN=0;var p=h.subscribe_key||"";h.uuid||l.get(p+"uuid");h.xdr=q;h.db=l;h.error=d;h._is_online=f;h.jsonp_cb=A;var k=ka(h);k.css=x;k.$=c;k.create=L;k.bind=e;k.head=w;k.search=a;k.attr=n;k.events=r;k.init=b;e("beforeunload",window,function(){k["each-channel"](function(a){k.LEAVE(a.name,1)});return!0});if(h.notest)return k;e("offline",window,k.offline);e("offline",document,k.offline);return k}function c(a){return document.getElementById(a)}function d(a){console.error(a)}
function a(a,b){var c=[];U(a.split(/\s+/),function(a){U((b||document).getElementsByTagName(a),function(a){c.push(a)})});return c}function e(a,b,c){U(a.split(","),function(a){function h(a){a||(a=window.event);c(a)||(a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}b.addEventListener?b.addEventListener(a,h,!1):b.attachEvent?b.attachEvent("on"+a,h):b["on"+a]=h})}function w(){return a("head")[0]}function n(a,b,c){if(c)a.setAttribute(b,c);
else return a&&a.getAttribute&&a.getAttribute(b)}function x(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+(0<"|width|height|top|left|".indexOf(c)&&"number"==typeof b[c]?"px":"")}catch(d){}}function L(a){return document.createElement(a)}function A(){return N()}function q(a){function b(a,e){g||(g=1,d.onerror=null,clearTimeout(l),a||!e||s(e),setTimeout(function(){a&&q();var b=c(f),d=b&&b.parentNode;d&&d.removeChild(b)},M))}var d=L("script"),e=a.a,f=N(),g=0,l=setTimeout(function(){b(1)},
a.timeout||aa),q=a.b||t(),r=a.data||{},s=a.c||t();window[e]=function(a){b(0,a)};a.i||(d[m]=m);d.onerror=function(){b(1)};r.pnsdk=u;d.src=ga(a.url,r);n(d,"id",f);w().appendChild(d);return b}function f(){return"onLine"in navigator?navigator.onLine:1}var m="async",u="PubNub-JS-SmartTV/3.5.3.1";window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||t());var l=function(){var a=window.localStorage;return{get:function(b){try{return a?a.getItem(b):
-1==document.cookie.indexOf(b)?null:((document.cookie||"").match(RegExp(b+"=([^;]+)"))||[])[1]||null}catch(c){}},set:function(b,c){try{if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(d){}}}}(),r={list:{},unbind:function(a){r.list[a]=[]},bind:function(a,b){(r.list[a]=r.list[a]||[]).push(b)},fire:function(a,b){U(r.list[a]||[],function(a){a(b)})}},g=c("pubnub")||0;e("load",window,function(){setTimeout($,0)});g=g||{};PUBNUB=b({notest:1,publish_key:n(g,
"pub-key"),subscribe_key:n(g,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==n(g,"ssl"),origin:n(g,"origin"),uuid:n(g,"uuid")})}();
(function(){var b=PUBNUB.ws=function(c,d){if(!(this instanceof b))return new b(c,d);var a=this;c=a.url=c||"";a.protocol=d||"Sec-WebSocket-Protocol";var e=c.split("/"),e={ssl:"wss:"===e[0],origin:e[2],publish_key:e[3],subscribe_key:e[4],channel:e[5]};a.CONNECTING=0;a.OPEN=1;a.CLOSING=2;a.CLOSED=3;a.CLOSE_NORMAL=1E3;a.CLOSE_GOING_AWAY=1001;a.CLOSE_PROTOCOL_ERROR=1002;a.CLOSE_UNSUPPORTED=1003;a.CLOSE_TOO_LARGE=1004;a.CLOSE_NO_STATUS=1005;a.CLOSE_ABNORMAL=1006;a.onclose=a.onerror=a.onmessage=a.onopen=
a.onsend=t();a.binaryType="";a.extensions="";a.bufferedAmount=0;a.trasnmitting=!1;a.buffer=[];a.readyState=a.CONNECTING;if(!c)return a.readyState=a.CLOSED,a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),a;a.f=PUBNUB.init(e);a.f.l=e;a.l=e;a.f.subscribe({restore:!1,channel:e.channel,disconnect:a.onerror,reconnect:a.onopen,error:function(){a.onclose({code:a.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(b){a.onmessage({data:b})},connect:function(){a.readyState=
a.OPEN;a.onopen()}})}})();
})();
