exports.PubNub=function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())})}function r(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}e.exports={signPamFromParams:function(t){return r(t).map(function(e){return"".concat(e,"=").concat(i(t[e]))}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var n,i;return{promise:new Promise(function(e,t){n=e,i=t}),reject:i,fulfill:n}},encodeString:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(5))&&i.__esModule?i:{default:i};n(0);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,u,c,l=(a=f,(u=[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set("".concat(this.subscribeKey,"uuid"),e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return 20<=e?this._presenceTimeout=e:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.25.2"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get("".concat(this.subscribeKey,"uuid"))?this._db.get("".concat(this.subscribeKey,"uuid")):"pn-".concat(r.default.createUUID()))}}])&&s(a.prototype,u),void(c&&s(a,c)),f);function f(e){var t=e.setup,n=e.db;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o(this,"_db",void 0),o(this,"subscribeKey",void 0),o(this,"publishKey",void 0),o(this,"secretKey",void 0),o(this,"cipherKey",void 0),o(this,"authKey",void 0),o(this,"UUID",void 0),o(this,"proxy",void 0),o(this,"instanceId",void 0),o(this,"sdkName",void 0),o(this,"sdkFamily",void 0),o(this,"partnerId",void 0),o(this,"filterExpression",void 0),o(this,"suppressLeaveEvents",void 0),o(this,"secure",void 0),o(this,"origin",void 0),o(this,"logVerbosity",void 0),o(this,"useInstanceId",void 0),o(this,"useRequestId",void 0),o(this,"keepAlive",void 0),o(this,"keepAliveSettings",void 0),o(this,"autoNetworkDetection",void 0),o(this,"announceSuccessfulHeartbeats",void 0),o(this,"announceFailedHeartbeats",void 0),o(this,"_presenceTimeout",void 0),o(this,"_heartbeatInterval",void 0),o(this,"_subscribeRequestTimeout",void 0),o(this,"_transactionalRequestTimeout",void 0),o(this,"_useSendBeacon",void 0),o(this,"requestMessageCountThreshold",void 0),o(this,"restore",void 0),o(this,"dedupeOnSubscribe",void 0),o(this,"maximumCacheSize",void 0),o(this,"customEncrypt",void 0),o(this,"customDecrypt",void 0),this._db=n,this.instanceId="pn-".concat(r.default.createUUID()),this.secretKey=t.secretKey||t.secret_key,this.subscribeKey=t.subscribeKey||t.subscribe_key,this.publishKey=t.publishKey||t.publish_key,this.sdkName=t.sdkName,this.sdkFamily=t.sdkFamily,this.partnerId=t.partnerId,this.setAuthKey(t.authKey),this.setCipherKey(t.cipherKey),this.setFilterExpression(t.filterExpression),this.origin=t.origin||"ps.pndsn.com",this.secure=t.ssl||!1,this.restore=t.restore||!1,this.proxy=t.proxy,this.keepAlive=t.keepAlive,this.keepAliveSettings=t.keepAliveSettings,this.autoNetworkDetection=t.autoNetworkDetection||!1,this.dedupeOnSubscribe=t.dedupeOnSubscribe||!1,this.maximumCacheSize=t.maximumCacheSize||100,this.customEncrypt=t.customEncrypt,this.customDecrypt=t.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=t.logVerbosity||!1,this.suppressLeaveEvents=t.suppressLeaveEvents||!1,this.announceFailedHeartbeats=t.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=t.announceSuccessfulHeartbeats||!1,this.useInstanceId=t.useInstanceId||!1,this.useRequestId=t.useRequestId||!1,this.requestMessageCountThreshold=t.requestMessageCountThreshold,this.setTransactionTimeout(t.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(t.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(t.useSendBeacon||!0),this.setPresenceTimeout(t.presenceTimeout||300),null!=t.heartbeatInterval&&this.setHeartbeatInterval(t.heartbeatInterval),this.setUUID(this._decideUUID(t.uuid))}t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(11))&&i.__esModule?i:{default:i};var s={createUUID:function(){return r.default.uuid?r.default.uuid():(0,r.default)()}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(3));var u=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,a,c,l=(o=f,(a=[{key:"HMACSHA256",value:function(e){return u.default.HmacSHA256(e,this._config.secretKey).toString(u.default.enc.Base64)}},{key:"SHA256",value:function(e){return u.default.SHA256(e).toString(u.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?u.default.enc.Base64.parse(e):"hex"===t.keyEncoding?u.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?u.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?u.default.mode.ECB:u.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?u.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var i=this._getIV(n),r=this._getMode(n),s=this._getPaddedKey(t||this._config.cipherKey,n);return u.default.AES.encrypt(e,s,{iv:i,mode:r}).ciphertext.toString(u.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var i=this._getIV(n),r=this._getMode(n),s=this._getPaddedKey(t||this._config.cipherKey,n);try{var o=u.default.enc.Base64.parse(e),a=u.default.AES.decrypt({ciphertext:o},s,{iv:i,mode:r}).toString(u.default.enc.Utf8);return JSON.parse(a)}catch(e){return null}}}])&&r(o.prototype,a),void(c&&r(o,c)),f);function f(e){var t=e.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s(this,"_config",void 0),s(this,"_iv",void 0),s(this,"_allowedKeyEncodings",void 0),s(this,"_allowedKeyLengths",void 0),s(this,"_allowedModes",void 0),s(this,"_defaultOptions",void 0),this._config=t,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(0);var i,r=(i=n(4))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,a,u,c=(o=l,(a=[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(t){var n=[];this._listeners.forEach(function(e){e!==t&&n.push(e)}),this._listeners=n}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(t){this._listeners.forEach(function(e){e.presence&&e.presence(t)})}},{key:"announceStatus",value:function(t){this._listeners.forEach(function(e){e.status&&e.status(t)})}},{key:"announceMessage",value:function(t){this._listeners.forEach(function(e){e.message&&e.message(t)})}},{key:"announceSignal",value:function(t){this._listeners.forEach(function(e){e.signal&&e.signal(t)})}},{key:"announceUser",value:function(t){this._listeners.forEach(function(e){e.user&&e.user(t)})}},{key:"announceSpace",value:function(t){this._listeners.forEach(function(e){e.space&&e.space(t)})}},{key:"announceMembership",value:function(t){this._listeners.forEach(function(e){e.membership&&e.membership(t)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=r.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=r.default.PNNetworkDownCategory,this.announceStatus(e)}}])&&s(o.prototype,a),void(u&&s(o,u)),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_listeners",void 0),this._listeners=[]}t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(10)),r=a(n(59)),s=a(n(60)),o=n(61);n(0);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,i.default),h);function h(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),e.db=new s.default,e.sdkFamily="TitaniumSDK",e.networking=new r.default({del:o.del,get:o.get,post:o.post,patch:o.patch}),c(this,l(h).call(this,e))}t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=a(n(3)),g=a(n(6)),v=a(n(13)),b=a(n(7)),y=a(n(16)),m=o(n(17)),_=o(n(18)),P=o(n(19)),O=o(n(20)),S=o(n(21)),M=o(n(22)),k=o(n(23)),T=o(n(24)),C=o(n(25)),N=o(n(26)),w=o(n(27)),R=o(n(28)),j=o(n(29)),E=o(n(30)),K=o(n(31)),U=o(n(32)),A=o(n(33)),x=o(n(34)),I=o(n(35)),G=o(n(36)),D=o(n(37)),F=o(n(38)),L=o(n(39)),B=o(n(40)),H=o(n(41)),q=o(n(42)),z=o(n(43)),J=o(n(44)),W=o(n(45)),V=o(n(46)),X=o(n(47)),$=o(n(48)),Q=o(n(49)),Y=o(n(50)),Z=o(n(51)),ee=o(n(52)),te=o(n(53)),ne=o(n(54)),ie=o(n(55)),re=o(n(56)),se=o(n(57)),oe=o(n(8)),ae=o(n(58)),i=a(n(1)),r=a(n(4)),s=(n(0),a(n(5)));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c,l,f,d=(c=ce,f=[{key:"generateUUID",value:function(){return s.default.createUUID()}}],(l=[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}])&&u(c.prototype,l),void(f&&u(c,f)),ce);function ce(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ce),ue(this,"_config",void 0),ue(this,"_listenerManager",void 0),ue(this,"time",void 0),ue(this,"publish",void 0),ue(this,"fire",void 0),ue(this,"history",void 0),ue(this,"deleteMessages",void 0),ue(this,"messageCounts",void 0),ue(this,"fetchMessages",void 0),ue(this,"channelGroups",void 0),ue(this,"push",void 0),ue(this,"hereNow",void 0),ue(this,"whereNow",void 0),ue(this,"getState",void 0),ue(this,"setState",void 0),ue(this,"grant",void 0),ue(this,"audit",void 0),ue(this,"subscribe",void 0),ue(this,"signal",void 0),ue(this,"presence",void 0),ue(this,"unsubscribe",void 0),ue(this,"unsubscribeAll",void 0),ue(this,"createUser",void 0),ue(this,"updateUser",void 0),ue(this,"deleteUser",void 0),ue(this,"getUser",void 0),ue(this,"getUsers",void 0),ue(this,"createSpace",void 0),ue(this,"updateSpace",void 0),ue(this,"deleteSpace",void 0),ue(this,"getSpaces",void 0),ue(this,"getSpace",void 0),ue(this,"getMembers",void 0),ue(this,"addMembers",void 0),ue(this,"updateMembers",void 0),ue(this,"removeMembers",void 0),ue(this,"getMemberships",void 0),ue(this,"joinSpaces",void 0),ue(this,"updateMemberships",void 0),ue(this,"leaveSpaces",void 0),ue(this,"disconnect",void 0),ue(this,"reconnect",void 0),ue(this,"destroy",void 0),ue(this,"stop",void 0),ue(this,"getSubscribedChannels",void 0),ue(this,"getSubscribedChannelGroups",void 0),ue(this,"addListener",void 0),ue(this,"removeListener",void 0),ue(this,"removeAllListeners",void 0),ue(this,"getAuthKey",void 0),ue(this,"setAuthKey",void 0),ue(this,"setCipherKey",void 0),ue(this,"setUUID",void 0),ue(this,"getUUID",void 0),ue(this,"getFilterExpression",void 0),ue(this,"setFilterExpression",void 0),ue(this,"setHeartbeatInterval",void 0),ue(this,"setProxy",void 0),ue(this,"encrypt",void 0),ue(this,"decrypt",void 0);var t=e.db,i=e.networking,r=this._config=new p.default({setup:e,db:t}),s=new g.default({config:r});i.init(r);var o={config:r,networking:i,crypto:s},a=y.default.bind(this,o,oe),u=y.default.bind(this,o,N),c=y.default.bind(this,o,R),l=y.default.bind(this,o,E),f=y.default.bind(this,o,ae),d=this._listenerManager=new b.default,h=new v.default({timeEndpoint:a,leaveEndpoint:u,heartbeatEndpoint:c,setStateEndpoint:l,subscribeEndpoint:f,crypto:o.crypto,config:o.config,listenerManager:d});this.addListener=d.addListener.bind(d),this.removeListener=d.removeListener.bind(d),this.removeAllListeners=d.removeAllListeners.bind(d),this.channelGroups={listGroups:y.default.bind(this,o,O),listChannels:y.default.bind(this,o,S),addChannels:y.default.bind(this,o,m),removeChannels:y.default.bind(this,o,_),deleteGroup:y.default.bind(this,o,P)},this.push={addChannels:y.default.bind(this,o,M),removeChannels:y.default.bind(this,o,k),deleteDevice:y.default.bind(this,o,C),listChannels:y.default.bind(this,o,T)},this.hereNow=y.default.bind(this,o,K),this.whereNow=y.default.bind(this,o,w),this.getState=y.default.bind(this,o,j),this.setState=h.adaptStateChange.bind(h),this.grant=y.default.bind(this,o,Z),this.audit=y.default.bind(this,o,Y),this.publish=y.default.bind(this,o,ee),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.signal=y.default.bind(this,o,te),this.history=y.default.bind(this,o,ne),this.deleteMessages=y.default.bind(this,o,ie),this.messageCounts=y.default.bind(this,o,re),this.fetchMessages=y.default.bind(this,o,se),this.createUser=y.default.bind(this,o,U),this.updateUser=y.default.bind(this,o,A),this.deleteUser=y.default.bind(this,o,x),this.getUser=y.default.bind(this,o,I),this.getUsers=y.default.bind(this,o,G),this.createSpace=y.default.bind(this,o,D),this.updateSpace=y.default.bind(this,o,F),this.deleteSpace=y.default.bind(this,o,L),this.getSpaces=y.default.bind(this,o,B),this.getSpace=y.default.bind(this,o,H),this.addMembers=y.default.bind(this,o,z),this.updateMembers=y.default.bind(this,o,J),this.removeMembers=y.default.bind(this,o,W),this.getMembers=y.default.bind(this,o,q),this.getMemberships=y.default.bind(this,o,V),this.joinSpaces=y.default.bind(this,o,$),this.updateMemberships=y.default.bind(this,o,X),this.leaveSpaces=y.default.bind(this,o,Q),this.time=a,this.subscribe=h.adaptSubscribeChange.bind(h),this.presence=h.adaptPresenceChange.bind(h),this.unsubscribe=h.adaptUnsubscribeChange.bind(h),this.disconnect=h.disconnect.bind(h),this.reconnect=h.reconnect.bind(h),this.destroy=function(e){h.unsubscribeAll(e),h.disconnect()},this.stop=this.destroy,this.unsubscribeAll=h.unsubscribeAll.bind(h),this.getSubscribedChannels=h.getSubscribedChannels.bind(h),this.getSubscribedChannelGroups=h.getSubscribedChannelGroups.bind(h),this.encrypt=s.encrypt.bind(s),this.decrypt=s.decrypt.bind(s),this.getAuthKey=o.config.getAuthKey.bind(o.config),this.setAuthKey=o.config.setAuthKey.bind(o.config),this.setCipherKey=o.config.setCipherKey.bind(o.config),this.getUUID=o.config.getUUID.bind(o.config),this.setUUID=o.config.setUUID.bind(o.config),this.getFilterExpression=o.config.getFilterExpression.bind(o.config),this.setFilterExpression=o.config.setFilterExpression.bind(o.config),this.setHeartbeatInterval=o.config.setHeartbeatInterval.bind(o.config),i.hasModule("proxy")&&(this.setProxy=function(e){o.config.setProxy(e),n.reconnect()})}ue(t.default=d,"OPERATIONS",i.default),ue(d,"CATEGORIES",r.default),e.exports=t.default},function(e,t,n){var i,r,s;r=[t],void 0===(s="function"==typeof(i=function(e){var i={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function t(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function n(e,t){var n=i[t||"all"];return n&&n.test(e)||!1}t.isUUID=n,t.VERSION="0.1.0",e.uuid=t,e.isUUID=n})?i.apply(t,r):i)||(e.exports=s)},function(e,t,n){"use strict";var i,c,r,u,s,o,a,l,f,d,N=N||function(a){function n(){}var e={},t=e.lib={},i=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=a.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*a.random()|0);return new u.init(t,e)}}),r=e.enc={},s=r.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(n,t/2)}},o=r.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(n,t)}},c=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,r=this.blockSize,s=i/(4*r);if(e=(s=e?a.ceil(s):a.max((0|s)-this._minBufferSize,0))*r,i=a.min(4*e,i),e){for(var o=0;o<e;o+=r)this._doProcessBlock(n,o);o=n.splice(0,e),t.sigBytes-=i}return new u.init(o,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new f.HMAC.init(n,t).finalize(e)}}});var f=e.algo={};return e}(Math);!function(r){for(var e=N,t=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,s=[],p=[],o=function(e){return 4294967296*(e-(0|e))|0},a=2,u=0;u<64;){var c;e:{c=a;for(var l=r.sqrt(c),f=2;f<=l;f++)if(!(c%f)){c=!1;break e}c=!0}c&&(u<8&&(s[u]=o(r.pow(a,.5))),p[u]=o(r.pow(a,1/3)),u++),a++}var g=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new t.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],u=n[5],c=n[6],l=n[7],f=0;f<64;f++){if(f<16)g[f]=0|e[t+f];else{var d=g[f-15],h=g[f-2];g[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+g[f-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+g[f-16]}d=l+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+p[f]+g[f],h=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&s^r&s),l=c,c=u,u=a,a=o+d|0,o=s,s=r,r=i,i=d+h|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=r.floor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=n._createHelper(i),e.HmacSHA256=n._createHmacHelper(i)}(Math),c=(i=N).enc.Utf8,i.algo.HMAC=i.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=c.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),s=this._iKey=t.clone(),o=r.words,a=s.words,u=0;u<n;u++)o[u]^=1549556828,a[u]^=909522486;r.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),u=(r=N).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var s=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<n;o++)e.push(i.charAt(s>>>6*(3-o)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;!(i=n.charAt(64))||-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],r=0,s=0;s<t;s++)if(s%4){var o=n.indexOf(e.charAt(s-1))<<s%4*2,a=n.indexOf(e.charAt(s))>>>6-s%4*2;i[r>>>2]|=(o|a)<<24-r%4*8,r++}return u.create(i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(s){function S(e,t,n,i,r,s,o){return((e=e+(t&n|~t&i)+r+o)<<s|e>>>32-s)+t}function M(e,t,n,i,r,s,o){return((e=e+(t&i|n&~i)+r+o)<<s|e>>>32-s)+t}function k(e,t,n,i,r,s,o){return((e=e+(t^n^i)+r+o)<<s|e>>>32-s)+t}function T(e,t,n,i,r,s,o){return((e=e+(n^(t|~i))+r+o)<<s|e>>>32-s)+t}for(var e=N,t=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,C=[],r=0;r<64;r++)C[r]=4294967296*s.abs(s.sin(r+1))|0;i=i.MD5=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=e[o=t+n];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}n=this._hash.words;var r,s,o=e[t+0],a=(i=e[t+1],e[t+2]),u=e[t+3],c=e[t+4],l=e[t+5],f=e[t+6],d=e[t+7],h=e[t+8],p=e[t+9],g=e[t+10],v=e[t+11],b=e[t+12],y=e[t+13],m=e[t+14],_=e[t+15],P=n[0],O=T(O=T(O=T(O=T(O=k(O=k(O=k(O=k(O=M(O=M(O=M(O=M(O=S(O=S(O=S(O=S(O=n[1],s=S(s=n[2],r=S(r=n[3],P=S(P,O,s,r,o,7,C[0]),O,s,i,12,C[1]),P,O,a,17,C[2]),r,P,u,22,C[3]),s=S(s,r=S(r,P=S(P,O,s,r,c,7,C[4]),O,s,l,12,C[5]),P,O,f,17,C[6]),r,P,d,22,C[7]),s=S(s,r=S(r,P=S(P,O,s,r,h,7,C[8]),O,s,p,12,C[9]),P,O,g,17,C[10]),r,P,v,22,C[11]),s=S(s,r=S(r,P=S(P,O,s,r,b,7,C[12]),O,s,y,12,C[13]),P,O,m,17,C[14]),r,P,_,22,C[15]),s=M(s,r=M(r,P=M(P,O,s,r,i,5,C[16]),O,s,f,9,C[17]),P,O,v,14,C[18]),r,P,o,20,C[19]),s=M(s,r=M(r,P=M(P,O,s,r,l,5,C[20]),O,s,g,9,C[21]),P,O,_,14,C[22]),r,P,c,20,C[23]),s=M(s,r=M(r,P=M(P,O,s,r,p,5,C[24]),O,s,m,9,C[25]),P,O,u,14,C[26]),r,P,h,20,C[27]),s=M(s,r=M(r,P=M(P,O,s,r,y,5,C[28]),O,s,a,9,C[29]),P,O,d,14,C[30]),r,P,b,20,C[31]),s=k(s,r=k(r,P=k(P,O,s,r,l,4,C[32]),O,s,h,11,C[33]),P,O,v,16,C[34]),r,P,m,23,C[35]),s=k(s,r=k(r,P=k(P,O,s,r,i,4,C[36]),O,s,c,11,C[37]),P,O,d,16,C[38]),r,P,g,23,C[39]),s=k(s,r=k(r,P=k(P,O,s,r,y,4,C[40]),O,s,o,11,C[41]),P,O,u,16,C[42]),r,P,f,23,C[43]),s=k(s,r=k(r,P=k(P,O,s,r,p,4,C[44]),O,s,b,11,C[45]),P,O,_,16,C[46]),r,P,a,23,C[47]),s=T(s,r=T(r,P=T(P,O,s,r,o,6,C[48]),O,s,d,10,C[49]),P,O,m,15,C[50]),r,P,l,21,C[51]),s=T(s,r=T(r,P=T(P,O,s,r,b,6,C[52]),O,s,u,10,C[53]),P,O,g,15,C[54]),r,P,i,21,C[55]),s=T(s,r=T(r,P=T(P,O,s,r,h,6,C[56]),O,s,_,10,C[57]),P,O,f,15,C[58]),r,P,y,21,C[59]),s=T(s,r=T(r,P=T(P,O,s,r,c,6,C[60]),O,s,v,10,C[61]),P,O,a,15,C[62]),r,P,p,21,C[63]);n[0]=n[0]+P|0,n[1]=n[1]+O|0,n[2]=n[2]+s|0,n[3]=n[3]+r|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32;var r=s.floor(n/4294967296);for(t[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;n<4;n++)i=t[n],t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=n._createHelper(i),e.HmacMD5=n._createHmacHelper(i)}(Math),a=(s=(o=N).lib).Base,l=s.WordArray,f=(s=o.algo).EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:s.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),i=l.create(),r=i.words,s=o.keySize,o=o.iterations;r.length<s;){a&&n.update(a);var a=n.update(e).finalize(t);n.reset();for(var u=1;u<o;u++)a=n.finalize(a),n.reset();i.concat(a)}return i.sigBytes=4*s,i}}),o.EvpKDF=function(e,t,n){return f.create(n).compute(e,t)},N.lib.Cipher||function(){var e=(d=N).lib,t=e.Base,o=e.WordArray,n=e.BufferedBlockAlgorithm,i=d.enc.Base64,r=d.algo.EvpKDF,s=e.Cipher=n.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(i){return{encrypt:function(e,t,n){return("string"==typeof t?h:f).encrypt(i,e,t,n)},decrypt:function(e,t,n){return("string"==typeof t?h:f).decrypt(i,e,t,n)}}}});e.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function a(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=i[r]}var u=d.mode={},c=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;a.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=e.slice(t,t+i);n.decryptBlock(e,t),a.call(this,e,t,i),this._prevBlock=r}}),u=u.CBC=c,c=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,r=[],s=0;s<n;s+=4)r.push(i);n=o.create(r,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=s.extend({cfg:s.cfg.extend({mode:u,padding:c}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var l=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return l.create({ciphertext:e,salt:n})}},e.SerializableCipher=t.extend({cfg:t.extend({format:u}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i);return t=r.finalize(t),r=r.cfg,l.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i=i||o.random(8),e=r.create({keySize:t+n}).compute(e,i),n=o.create(e.words.slice(t),4*n),e.sigBytes=4*t,l.create({key:e,iv:n,salt:i})}},h=e.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,(e=f.encrypt.call(this,e,t,n.key,i)).mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,f.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=N,t=e.lib.BlockCipher,n=e.algo,o=[],i=[],r=[],s=[],a=[],u=[],c=[],l=[],f=[],d=[],h=[],p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;var g=0,v=0;for(p=0;p<256;p++){var b=(b=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&b^99;o[g]=b;var y=h[i[b]=g],m=h[y],_=h[m],P=257*h[b]^16843008*b;r[g]=P<<24|P>>>8,s[g]=P<<16|P>>>16,a[g]=P<<8|P>>>24,u[g]=P,P=16843009*_^65537*m^257*y^16843008*g,c[b]=P<<24|P>>>8,l[b]=P<<16|P>>>16,f[b]=P<<8|P>>>24,d[b]=P,g?(g=y^h[h[h[_^y]]],v^=h[h[v]]):g=v=1}var O=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],r=0;r<n;r++)if(r<t)i[r]=e[r];else{var s=i[r-1];r%t?6<t&&4==r%t&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=O[r/t|0]<<24),i[r]=i[r-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)r=n-t,s=t%4?i[r]:i[r-4],e[t]=t<4||r<=4?s:c[o[s>>>24]]^l[o[s>>>16&255]]^f[o[s>>>8&255]]^d[o[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,a,u,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,f,d,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,s,o,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],h=4,p=1;p<u;p++){var g=i[c>>>24]^r[l>>>16&255]^s[f>>>8&255]^o[255&d]^n[h++],v=i[l>>>24]^r[f>>>16&255]^s[d>>>8&255]^o[255&c]^n[h++],b=i[f>>>24]^r[d>>>16&255]^s[c>>>8&255]^o[255&l]^n[h++];d=i[d>>>24]^r[c>>>16&255]^s[l>>>8&255]^o[255&f]^n[h++],c=g,l=v,f=b}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&d])^n[h++],v=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[h++],b=(a[f>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[h++],d=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[h++],e[t]=g,e[t+1]=v,e[t+2]=b,e[t+3]=d},keySize:8});e.AES=t._createHelper(n)}(),N.mode.ECB=((d=N.lib.BlockCipherMode.extend()).Encryptor=d.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),d.Decryptor=d.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),d),e.exports=N},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n(6)),i(n(3)),i(n(7));var c=i(n(14)),l=i(n(15)),f=i(n(2)),a=(n(0),i(n(4)));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,o,u,h=(s=p,(o=[{key:"adaptStateChange",value:function(e,t){var n=this,i=e.state,r=e.channels,s=void 0===r?[]:r,o=e.channelGroups,a=void 0===o?[]:o;return s.forEach(function(e){e in n._channels&&(n._channels[e].state=i)}),a.forEach(function(e){e in n._channelGroups&&(n._channelGroups[e].state=i)}),this._setStateEndpoint({state:i,channels:s,channelGroups:a},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.connected,i=e.channels,r=void 0===i?[]:i,s=e.channelGroups,o=void 0===s?[]:s;n?(r.forEach(function(e){t._heartbeatChannels[e]={state:{}}}),o.forEach(function(e){t._heartbeatChannelGroups[e]={state:{}}})):(r.forEach(function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]}),o.forEach(function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:r,channelGroups:o},function(e){t._listenerManager.announceStatus(e)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,i=e.channels,r=void 0===i?[]:i,s=e.channelGroups,o=void 0===s?[]:s,a=e.withPresence,u=void 0!==a&&a,c=e.withHeartbeats,l=void 0!==c&&c;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),r.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),o.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,i=e.channels,r=void 0===i?[]:i,s=e.channelGroups,o=void 0===s?[]:s,a=[],u=[];r.forEach(function(e){e in n._channels&&(delete n._channels[e],a.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],a.push(e))}),o.forEach(function(e){e in n._channelGroups&&(delete n._channelGroups[e],u.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],u.push(e))}),0===a.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:a,channelGroups:u},function(e){e.affectedChannels=a,e.affectedChannelGroups=u,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var n=this,e=this.getHeartbeatChannels(),t=this.getHeartbeatChannelGroups(),i={};0===e.length&&0===t.length||(this.getSubscribedChannels().forEach(function(e){var t=n._channels[e].state;Object.keys(t).length&&(i[e]=t)}),this.getSubscribedChannelGroups().forEach(function(e){var t=n._channelGroups[e].state;Object.keys(t).length&&(i[e]=t)}),this._heartbeatEndpoint({channels:e,channelGroups:t,state:i},function(e){e.error&&n._config.announceFailedHeartbeats&&n._listenerManager.announceStatus(e),e.error&&n._config.autoNetworkDetection&&n._isOnline&&(n._isOnline=!1,n.disconnect(),n._listenerManager.announceNetworkDown(),n.reconnect()),!e.error&&n._config.announceSuccessfulHeartbeats&&n._listenerManager.announceStatus(e)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var n=this;this._stopSubscribeLoop();var i={},r=[],s=[];if(Object.keys(this._channels).forEach(function(e){var t=n._channels[e].state;Object.keys(t).length&&(i[e]=t),r.push(e)}),Object.keys(this._presenceChannels).forEach(function(e){r.push("".concat(e,"-pnpres"))}),Object.keys(this._channelGroups).forEach(function(e){var t=n._channelGroups[e].state;Object.keys(t).length&&(i[e]=t),s.push(e)}),Object.keys(this._presenceChannelGroups).forEach(function(e){s.push("".concat(e,"-pnpres"))}),0!==r.length||0!==s.length){var e={channels:r,channelGroups:s,state:i,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(e,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(t,e){var u=this;if(t.error)t.category===a.default.PNTimeoutCategory?this._startSubscribeLoop():(t.category===a.default.PNNetworkIssuesCategory?(this.disconnect(),t.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){u._config.autoNetworkDetection&&!u._isOnline&&(u._isOnline=!0,u._listenerManager.announceNetworkUp()),u.reconnect(),u._subscriptionStatusAnnounced=!0;var e={category:a.default.PNReconnectedCategory,operation:t.operation,lastTimetoken:u._lastTimetoken,currentTimetoken:u._currentTimetoken};u._listenerManager.announceStatus(e)}),this._reconnectionManager.startPolling()):t.category===a.default.PNBadRequestCategory&&this._stopHeartbeatTimer(),this._listenerManager.announceStatus(t));else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=e.metadata.timetoken),!this._subscriptionStatusAnnounced){var n={};n.category=a.default.PNConnectedCategory,n.operation=t.operation,n.affectedChannels=this._pendingChannelSubscriptions,n.subscribedChannels=this.getSubscribedChannels(),n.affectedChannelGroups=this._pendingChannelGroupSubscriptions,n.lastTimetoken=this._lastTimetoken,n.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(n),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=e.messages||[],r=this._config,s=r.requestMessageCountThreshold,c=r.dedupeOnSubscribe;if(s&&i.length>=s){var o={};o.category=a.default.PNRequestMessageCountExceededCategory,o.operation=t.operation,this._listenerManager.announceStatus(o)}i.forEach(function(e){var t=e.channel,n=e.subscriptionMatch,i=e.publishMetaData;if(t===n&&(n=null),c){if(u._dedupingManager.isDuplicate(e))return;u._dedupingManager.addEntry(e)}if(f.default.endsWith(e.channel,"-pnpres")){var r={channel:null,subscription:null};r.actualChannel=null!=n?t:null,r.subscribedChannel=null!=n?n:t,t&&(r.channel=t.substring(0,t.lastIndexOf("-pnpres"))),n&&(r.subscription=n.substring(0,n.lastIndexOf("-pnpres"))),r.action=e.payload.action,r.state=e.payload.data,r.timetoken=i.publishTimetoken,r.occupancy=e.payload.occupancy,r.uuid=e.payload.uuid,r.timestamp=e.payload.timestamp,e.payload.join&&(r.join=e.payload.join),e.payload.leave&&(r.leave=e.payload.leave),e.payload.timeout&&(r.timeout=e.payload.timeout),u._listenerManager.announcePresence(r)}else if(1===e.messageType){var s={channel:null,subscription:null};s.channel=t,s.subscription=n,s.timetoken=i.publishTimetoken,s.publisher=e.issuingClientId,e.userMetadata&&(s.userMetadata=e.userMetadata),s.message=e.payload,u._listenerManager.announceSignal(s)}else if(2===e.messageType){var o={channel:null,subscription:null};o.channel=t,o.subscription=n,o.timetoken=i.publishTimetoken,o.publisher=e.issuingClientId,e.userMetadata&&(o.userMetadata=e.userMetadata),o.message={event:e.payload.event,type:e.payload.type,data:e.payload.data},"user"===e.payload.type?u._listenerManager.announceUser(o):"space"===e.payload.type?u._listenerManager.announceSpace(o):"membership"===e.payload.type&&u._listenerManager.announceMembership(o)}else{var a={channel:null,subscription:null};a.actualChannel=null!=n?t:null,a.subscribedChannel=null!=n?n:t,a.channel=t,a.subscription=n,a.timetoken=i.publishTimetoken,a.publisher=e.issuingClientId,e.userMetadata&&(a.userMetadata=e.userMetadata),u._config.cipherKey?a.message=u._crypto.decrypt(e.payload):a.message=e.payload,u._listenerManager.announceMessage(a)}}),this._region=e.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}])&&r(s.prototype,o),void(u&&r(s,u)),p);function p(e){var t=e.subscribeEndpoint,n=e.leaveEndpoint,i=e.heartbeatEndpoint,r=e.setStateEndpoint,s=e.timeEndpoint,o=e.config,a=e.crypto,u=e.listenerManager;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),d(this,"_crypto",void 0),d(this,"_config",void 0),d(this,"_listenerManager",void 0),d(this,"_reconnectionManager",void 0),d(this,"_leaveEndpoint",void 0),d(this,"_heartbeatEndpoint",void 0),d(this,"_setStateEndpoint",void 0),d(this,"_subscribeEndpoint",void 0),d(this,"_channels",void 0),d(this,"_presenceChannels",void 0),d(this,"_heartbeatChannels",void 0),d(this,"_heartbeatChannelGroups",void 0),d(this,"_channelGroups",void 0),d(this,"_presenceChannelGroups",void 0),d(this,"_currentTimetoken",void 0),d(this,"_lastTimetoken",void 0),d(this,"_storedTimetoken",void 0),d(this,"_region",void 0),d(this,"_subscribeCall",void 0),d(this,"_heartbeatTimer",void 0),d(this,"_subscriptionStatusAnnounced",void 0),d(this,"_autoNetworkDetection",void 0),d(this,"_isOnline",void 0),d(this,"_pendingChannelSubscriptions",void 0),d(this,"_pendingChannelGroupSubscriptions",void 0),d(this,"_dedupingManager",void 0),this._listenerManager=u,this._config=o,this._leaveEndpoint=n,this._heartbeatEndpoint=i,this._setStateEndpoint=r,this._subscribeEndpoint=t,this._crypto=a,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new c.default({timeEndpoint:s}),this._dedupingManager=new l.default({config:o})}t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i;(i=n(8))&&i.__esModule,n(0);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,a,u,c=(o=l,(a=[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var t=this;this._timeEndpoint(function(e){e.error||(clearInterval(t._timeTimer),t._reconnectionCallback())})}}])&&r(o.prototype,a),void(u&&r(o,u)),l);function l(e){var t=e.timeEndpoint;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s(this,"_reconnectionCallback",void 0),s(this,"_timeEndpoint",void 0),s(this,"_timeTimer",void 0),this._timeEndpoint=t}t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i;(i=n(3))&&i.__esModule,n(0);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,a,u,c=(o=l,(a=[{key:"getKey",value:function(e){var t=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.payload)).toString(),n=e.publishMetaData.publishTimetoken;return"".concat(n,"-").concat(t)}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}])&&r(o.prototype,a),void(u&&r(o,u)),l);function l(e){var t=e.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s(this,"_config",void 0),s(this,"hashHistory",void 0),this.hashHistory=[],this._config=t}t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(i,r){var e=i.networking,t=i.config,s=null,o=null,a={};s=r.getOperation()===b.default.PNTimeOperation||r.getOperation()===b.default.PNChannelGroupsOperation?arguments.length<=2?void 0:arguments[2]:(a=arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]);"undefined"==typeof Promise||s||(o=v.default.createPromise());var n=r.validateParams(i,a);if(n)return s?s(m(n)):o?(o.reject(new y("Validation failed, check status for details",m(n))),o.promise):void 0;var u,c=r.prepareParams(i,a),l=function(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.usePatch&&e.usePatch(t,n)?e.patchURL(t,n):e.getURL(t,n)}(r,i,a),f={url:l,operation:r.getOperation(),timeout:r.getRequestTimeout(i)};c.uuid=t.UUID,c.pnsdk=function(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-".concat(e.sdkFamily);e.partnerId&&(t+="-".concat(e.partnerId));return t+="/".concat(e.getVersion())}(t),t.useInstanceId&&(c.instanceid=t.instanceId);t.useRequestId&&(c.requestid=g.default.createUUID());r.isAuthSupported()&&t.getAuthKey()&&(c.auth=t.getAuthKey());t.secretKey&&function(e,t,n){var i=e.config,r=e.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var s="".concat(i.subscribeKey,"\n").concat(i.publishKey,"\n").concat(t,"\n");s+=v.default.signPamFromParams(n);var o=r.HMACSHA256(s);o=(o=o.replace(/\+/g,"-")).replace(/\//g,"_"),n.signature=o}(i,l,c);function d(e,t){if(e.error)s?s(e):o&&o.reject(new y("PubNub call failed, check status for details",e));else{var n=r.handleResponse(i,t,a);s?s(e,n):o&&o.fulfill(n)}}if(r.usePost&&r.usePost(i,a)){var h=r.postPayload(i,a);u=e.POST(c,h,f,d)}else if(r.usePatch&&r.usePatch(i,a)){var p=r.patchPayload(i,a);u=e.PATCH(c,p,f,d)}else u=r.useDelete&&r.useDelete()?e.DELETE(c,f,d):e.GET(c,f,d);if(r.getOperation()===b.default.PNSubscribeOperation)return u;if(o)return o.promise};var g=i(n(5)),v=(n(0),i(n(2))),b=(i(n(3)),i(n(1)));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function o(e){var n="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),u(t,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,o(Error)),l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s(this,c(l).call(this,e))).name=n.constructor.name,n.status=t,n.message=e,n}function m(e){return function(e,t){return e.type=t,e.error=!0,e}({message:e},"validationError")}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,i=t.channelGroup,r=e.config;if(!i)return"Missing Channel Group";if(!n||0===n.length)return"Missing Channels";if(!r.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channelGroup,i=e.config;return"/v1/channel-registration/sub-key/".concat(i.subscribeKey,"/channel-group/").concat(r.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,i=t.channelGroup,r=e.config;if(!i)return"Missing Channel Group";if(!n||0===n.length)return"Missing Channels";if(!r.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channelGroup,i=e.config;return"/v1/channel-registration/sub-key/".concat(i.subscribeKey,"/channel-group/").concat(r.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,i=e.config;if(!n)return"Missing Channel Group";if(!i.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channelGroup,i=e.config;return"/v1/channel-registration/sub-key/".concat(i.subscribeKey,"/channel-group/").concat(r.default.encodeString(n),"/remove")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v1/channel-registration/sub-key/".concat(t.subscribeKey,"/channel-group")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,i=e.config;if(!n)return"Missing Channel Group";if(!i.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channelGroup,i=e.config;return"/v1/channel-registration/sub-key/".concat(i.subscribeKey,"/channel-group/").concat(r.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,i=t.pushGateway,r=t.channels,s=e.config;if(!n)return"Missing Device ID (device)";if(!i)return"Missing GW Type (pushGateway: gcm or apns)";if(!r||0===r.length)return"Missing Channels";if(!s.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.device,i=e.config;return"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,i=t.channels;return{type:n,add:(void 0===i?[]:i).join(",")}},t.handleResponse=function(){return{}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,i=t.pushGateway,r=t.channels,s=e.config;if(!n)return"Missing Device ID (device)";if(!i)return"Missing GW Type (pushGateway: gcm or apns)";if(!r||0===r.length)return"Missing Channels";if(!s.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.device,i=e.config;return"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,i=t.channels;return{type:n,remove:(void 0===i?[]:i).join(",")}},t.handleResponse=function(){return{}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,i=t.pushGateway,r=e.config;if(!n)return"Missing Device ID (device)";if(!i)return"Missing GW Type (pushGateway: gcm or apns)";if(!r.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.device,i=e.config;return"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,i=t.pushGateway,r=e.config;if(!n)return"Missing Device ID (device)";if(!i)return"Missing GW Type (pushGateway: gcm or apns)";if(!r.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.device,i=e.config;return"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n,"/remove")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.channels,r=void 0===i?[]:i,s=0<r.length?r.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(o.default.encodeString(s),"/leave")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,i=void 0===n?[]:n,r={};0<i.length&&(r["channel-group"]=i.join(","));return r},t.handleResponse=function(){return{}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.uuid,r=void 0===i?n.UUID:i;return"/v2/presence/sub-key/".concat(n.subscribeKey,"/uuid/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.channels,r=void 0===i?[]:i,s=0<r.length?r.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(o.default.encodeString(s),"/heartbeat")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,i=void 0===n?[]:n,r=t.state,s=void 0===r?{}:r,o=e.config,a={};0<i.length&&(a["channel-group"]=i.join(","));return a.state=JSON.stringify(s),a.heartbeat=o.getPresenceTimeout(),a},t.handleResponse=function(){return{}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.uuid,r=void 0===i?n.UUID:i,s=t.channels,o=void 0===s?[]:s,a=0<o.length?o.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(u.default.encodeString(a),"/uuid/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,i=void 0===n?[]:n,r={};0<i.length&&(r["channel-group"]=i.join(","));return r},t.handleResponse=function(e,t,n){var i=n.channels,r=void 0===i?[]:i,s=n.channelGroups,o=void 0===s?[]:s,a={};1===r.length&&0===o.length?a[r[0]]=t.payload:a=t.payload;return{channels:a}};n(0);var i=r(n(1)),u=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,i=t.state,r=t.channels,s=void 0===r?[]:r,o=t.channelGroups,a=void 0===o?[]:o;if(!i)return"Missing State";if(!n.subscribeKey)return"Missing Subscribe Key";if(0===s.length&&0===a.length)return"Please provide a list of channels and/or channel-groups"},t.getURL=function(e,t){var n=e.config,i=t.channels,r=void 0===i?[]:i,s=0<r.length?r.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(o.default.encodeString(s),"/uuid/").concat(n.UUID,"/data")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,i=t.channelGroups,r=void 0===i?[]:i,s={};s.state=JSON.stringify(n),0<r.length&&(s["channel-group"]=r.join(","));return s},t.handleResponse=function(e,t){return{state:t.payload}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.channels,r=void 0===i?[]:i,s=t.channelGroups,o=void 0===s?[]:s,a="/v2/presence/sub-key/".concat(n.subscribeKey);if(0<r.length||0<o.length){var u=0<r.length?r.join(","):",";a+="/channel/".concat(c.default.encodeString(u))}return a},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,i=void 0===n?[]:n,r=t.includeUUIDs,s=void 0===r||r,o=t.includeState,a=void 0!==o&&o,u={};s||(u.disable_uuids=1);a&&(u.state=1);0<i.length&&(u["channel-group"]=i.join(","));return u},t.handleResponse=function(e,r,t){var n,i=t.channels,s=void 0===i?[]:i,o=t.channelGroups,a=void 0===o?[]:o,u=t.includeUUIDs,c=void 0===u||u,l=t.includeState,f=void 0!==l&&l;n=1<s.length||0<a.length||0===a.length&&0===s.length?function(){var i={};return i.totalChannels=r.payload.total_channels,i.totalOccupancy=r.payload.total_occupancy,i.channels={},Object.keys(r.payload.channels).forEach(function(e){var t=r.payload.channels[e],n=[];return i.channels[e]={occupants:n,name:e,occupancy:t.occupancy},c&&t.uuids.forEach(function(e){f?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})}),i}),i}():function(){var e={},t=[];return e.totalChannels=1,e.totalOccupancy=r.occupancy,e.channels={},e.channels[s[0]]={occupants:t,name:s[0],occupancy:r.occupancy},c&&r.uuids&&r.uuids.forEach(function(e){f?t.push({state:e.state,uuid:e.uuid}):t.push({state:null,uuid:e})}),e}();return n};n(0);var i=r(n(1)),c=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNCreateUserOperation},t.validateParams=function(e,t){var n=e.config,i=t.id,r=t.name,s=t.custom;if(!i)return"Missing User.id";if(!r)return"Missing User.name";if(!n.subscribeKey)return"Missing Subscribe Key";if(s&&!Object.values(s).every(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))return"Invalid custom type, only string, number and boolean values are allowed."},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.postPayload=function(e,t){return function(e,t){return JSON.stringify(t)}(0,t)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateUserOperation},t.validateParams=function(e,t){var n=e.config,i=t.id,r=t.name,s=t.custom;if(!i)return"Missing User.id";if(!r)return"Missing User.name";if(!n.subscribeKey)return"Missing Subscribe Key";if(s&&!Object.values(s).every(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))return"Invalid custom type, only string, number and boolean values are allowed."},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,i=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(i)},t.patchURL=function(e,t){var n=e.config,i=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.patchPayload=function(e,t){return function(e,t){return JSON.stringify(t)}(0,t)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNDeleteUserOperation},t.validateParams=function(e,t){var n=e.config;if(!t)return"Missing UserId";if(!n.subscribeKey)return"Missing Subscribe Key"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetUserOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetUsersOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNCreateSpaceOperation},t.validateParams=function(e,t){var n=e.config,i=t.id,r=t.name,s=t.custom;if(!i)return"Missing Space.id";if(!r)return"Missing Space.name";if(!n.subscribeKey)return"Missing Subscribe Key";if(s&&!Object.values(s).every(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))return"Invalid custom type, only string, number and boolean values are allowed."},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.postPayload=function(e,t){return function(e,t){return JSON.stringify(t)}(0,t)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateSpaceOperation},t.validateParams=function(e,t){var n=e.config,i=t.id,r=t.name,s=t.custom;if(!i)return"Missing Space.id";if(!r)return"Missing Space.name";if(!n.subscribeKey)return"Missing Subscribe Key";if(s&&!Object.values(s).every(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))return"Invalid custom type, only string, number and boolean values are allowed."},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,i=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(i)},t.patchURL=function(e,t){var n=e.config,i=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.patchPayload=function(e,t){return function(e,t){return JSON.stringify(t)}(0,t)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNDeleteSpaceOperation},t.validateParams=function(e,t){var n=e.config;if(!t)return"Missing SpaceId";if(!n.subscribeKey)return"Missing Subscribe Key"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetSpacesOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetSpaceOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i={};n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0};if(n){var r=[];n.customFields&&r.push("custom");var s=r.join(",");0<s.length&&(i.include=s)}return i},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetMembersOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.userFields&&o.push("user"),n.customUserFields&&o.push("user.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,i=t.users;if(!n)return"Missing spaceId";if(!i)return"Missing users"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.users,i={};n&&0<n.length&&(i.add=[],n.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),i.add.push(t)}));return function(e,t){return JSON.stringify(t)}(0,i)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,i=t.users;if(!n)return"Missing spaceId";if(!i)return"Missing users"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.addMembers,i=t.updateMembers,r=t.removeMembers,s=t.users,o={};n&&0<n.length&&(o.add=[],n.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}));i&&0<i.length&&(o.update=[],i.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}));s&&0<s.length&&(o.update=o.update||[],s.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}));r&&0<r.length&&(o.remove=[],r.forEach(function(e){o.remove.push({id:e})}));return function(e,t){return JSON.stringify(t)}(0,o)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,i=t.users;if(!n)return"Missing spaceId";if(!i)return"Missing users"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.users,i={};n&&0<n.length&&(i.remove=[],n.forEach(function(e){i.remove.push({id:e})}));return function(e,t){return JSON.stringify(t)}(0,i)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNGetMembershipsOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,i=t.spaces;if(!n)return"Missing userId";if(!i)return"Missing spaces"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.addMemberships,i=t.updateMemberships,r=t.removeMemberships,s=t.spaces,o={};n&&0<n.length&&(o.add=[],n.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}));i&&0<i.length&&(o.update=[],i.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}));s&&0<s.length&&(o.update=o.update||[],s.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}));r&&0<r.length&&(o.remove=[],r.forEach(function(e){o.remove.push({id:e})}));return function(e,t){return JSON.stringify(t)}(0,o)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,i=t.spaces;if(!n)return"Missing userId";if(!i)return"Missing spaces"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.spaces,i={};n&&0<n.length&&(i.add=[],n.forEach(function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),i.add.push(t)}));return function(e,t){return JSON.stringify(t)}(0,i)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,i=t.spaces;if(!n)return"Missing userId";if(!i)return"Missing spaces"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.include,i=t.limit,r=t.page,s={};i&&(s.limit=i);if(n){var o=[];n.totalCount&&(s.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var a=o.join(",");0<a.length&&(s.include=a)}r&&(r.next&&(s.start=r.next),r.prev&&(s.end=r.prev));return s},t.patchPayload=function(e,t){var n=t.spaces,i={};n&&0<n.length&&(i.remove=[],n.forEach(function(e){i.remove.push({id:e})}));return function(e,t){return JSON.stringify(t)}(0,i)},t.handleResponse=function(e,t){return t};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/audit/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,i=t.channelGroup,r=t.authKeys,s=void 0===r?[]:r,o={};n&&(o.channel=n);i&&(o["channel-group"]=i);0<s.length&&(o.auth=s.join(","));return o},t.handleResponse=function(e,t){return t.payload};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;if(!t.subscribeKey)return"Missing Subscribe Key";if(!t.publishKey)return"Missing Publish Key";if(!t.secretKey)return"Missing Secret Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/grant/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,i=void 0===n?[]:n,r=t.channelGroups,s=void 0===r?[]:r,o=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,l=void 0!==c&&c,f=t.manage,d=void 0!==f&&f,h=t.authKeys,p=void 0===h?[]:h,g={};g.r=u?"1":"0",g.w=l?"1":"0",g.m=d?"1":"0",0<i.length&&(g.channel=i.join(","));0<s.length&&(g["channel-group"]=s.join(","));0<p.length&&(g.auth=p.join(","));!o&&0!==o||(g.ttl=o);return g},t.handleResponse=function(){return{}};n(0);var i,r=(i=n(1))&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,i=t.message;if(!t.channel)return"Missing Channel";if(!i)return"Missing Message";if(!n.subscribeKey)return"Missing Subscribe Key"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,i=t.channel,r=t.message,s=a(e,r);return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(o.default.encodeString(i),"/0/").concat(o.default.encodeString(s))},t.postURL=function(e,t){var n=e.config,i=t.channel;return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(o.default.encodeString(i),"/0")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){var n=t.message;return a(e,n)},t.prepareParams=function(e,t){var n=t.meta,i=t.replicate,r=void 0===i||i,s=t.storeInHistory,o=t.ttl,a={};null!=s&&(a.store=s?"1":"0");o&&(a.ttl=o);!1===r&&(a.norep="true");n&&"object"===u(n)&&(a.meta=JSON.stringify(n));return a},t.handleResponse=function(e,t){return{timetoken:t[2]}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=e.crypto,i=e.config,r=JSON.stringify(t);return i.cipherKey&&(r=n.encrypt(r),r=JSON.stringify(r)),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSignalOperation},t.validateParams=function(e,t){var n=e.config,i=t.message;if(!t.channel)return"Missing Channel";if(!i)return"Missing Message";if(!n.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.channel,r=t.message,s=function(e,t){return JSON.stringify(t)}(0,r);return"/signal/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(o.default.encodeString(i),"/0/").concat(o.default.encodeString(s))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{timetoken:t[2]}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,i=e.config;if(!n)return"Missing channel";if(!i.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channel,i=e.config;return"/v2/history/sub-key/".concat(i.subscribeKey,"/channel/").concat(r.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,i=t.end,r=t.reverse,s=t.count,o=void 0===s?100:s,a=t.stringifiedTimeToken,u=void 0!==a&&a,c={include_token:"true"};c.count=o,n&&(c.start=n);i&&(c.end=i);u&&(c.string_message_token="true");null!=r&&(c.reverse=r.toString());return c},t.handleResponse=function(n,e){var i={messages:[],startTimeToken:e[1],endTimeToken:e[2]};return e[0].forEach(function(e){var t={timetoken:e.timetoken,entry:function(e,t){var n=e.config,i=e.crypto;if(!n.cipherKey)return t;try{return i.decrypt(t)}catch(e){return t}}(n,e.message)};i.messages.push(t)}),i};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var n=t.channel,i=e.config;if(!n)return"Missing channel";if(!i.subscribeKey)return"Missing Subscribe Key"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=t.channel,i=e.config;return"/v3/history/sub-key/".concat(i.subscribeKey,"/channel/").concat(r.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,i=t.end,r={};n&&(r.start=n);i&&(r.end=i);return r},t.handleResponse=function(e,t){return t.payload};n(0);var i=s(n(1)),r=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNMessageCounts},t.validateParams=function(e,t){var n=t.channels,i=t.timetoken,r=t.channelTimetokens,s=e.config;if(!n)return"Missing channel";if(i&&r)return"timetoken and channelTimetokens are incompatible together";if(i&&r&&1<r.length&&n.length!==r.length)return"Length of channelTimetokens and channels do not match";if(!s.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channels,i=e.config,r=n.join(",");return"/v3/history/sub-key/".concat(i.subscribeKey,"/message-counts/").concat(s.default.encodeString(r))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.timetoken,i=t.channelTimetokens,r={};if(i&&1===i.length){var s=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(i,1)[0];r.timetoken=s}else i?r.channelsTimetoken=i.join(","):n&&(r.timetoken=n);return r},t.handleResponse=function(e,t){return{channels:t.channels}};var i=r(n(1)),s=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,i=e.config;if(!n||0===n.length)return"Missing channels";if(!i.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channels,i=void 0===n?[]:n,r=e.config,s=0<i.length?i.join(","):",";return"/v3/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(o.default.encodeString(s))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,i=t.end,r=t.count,s=t.stringifiedTimeToken,o=void 0!==s&&s,a={};r&&(a.max=r);n&&(a.start=n);i&&(a.end=i);o&&(a.string_message_token="true");return a},t.handleResponse=function(i,e){var r={channels:{}};return Object.keys(e.channels||{}).forEach(function(n){r.channels[n]=[],(e.channels[n]||[]).forEach(function(e){var t={};t.channel=n,t.subscription=null,t.timetoken=e.timetoken,t.message=function(e,t){var n=e.config,i=e.crypto;if(!n.cipherKey)return t;try{return i.decrypt(t)}catch(e){return t}}(i,e.message),r.channels[n].push(t)})}),r};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,i=t.channels,r=void 0===i?[]:i,s=0<r.length?r.join(","):",";return"/v2/subscribe/".concat(n.subscribeKey,"/").concat(o.default.encodeString(s),"/0")},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,i=t.state,r=t.channelGroups,s=void 0===r?[]:r,o=t.timetoken,a=t.filterExpression,u=t.region,c={heartbeat:n.getPresenceTimeout()};0<s.length&&(c["channel-group"]=s.join(","));a&&0<a.length&&(c["filter-expr"]=a);Object.keys(i).length&&(c.state=JSON.stringify(i));o&&(c.tt=o);u&&(c.tr=u);return c},t.handleResponse=function(e,t){var i=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},n={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,messageType:e.e,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};i.push(n)});var n={timetoken:t.t.t,region:t.t.r};return{messages:i,metadata:n}};n(0);var i=r(n(1)),o=r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n(3));var i=r(n(4));n(0);function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,u,c,l=(a=f,(u=[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return this._providedFQDN.match(/ps\.pndsn\.com$/i)?(this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.pndsn.com","ps".concat(e,".pndsn.com"))):this._providedFQDN;var e}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,i){return this._modules.post(e,t,n,i)}},{key:"PATCH",value:function(e,t,n,i){return this._modules.patch(e,t,n,i)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return i.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return i.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return i.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return i.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return i.default.PNNetworkIssuesCategory;if(e.timeout)return i.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return i.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return i.default.PNBadRequestCategory;if(e.response.forbidden)return i.default.PNAccessDeniedCategory}return i.default.PNUnknownCategory}}])&&s(a.prototype,u),void(c&&s(a,c)),f);function f(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o(this,"_modules",void 0),o(this,"_config",void 0),o(this,"_maxSubDomain",void 0),o(this,"_currentSubDomain",void 0),o(this,"_standardOrigin",void 0),o(this,"_subscribeOrigin",void 0),o(this,"_providedFQDN",void 0),o(this,"_requestTimeout",void 0),o(this,"_coreParams",void 0),this._modules={},Object.keys(t).forEach(function(e){n._modules[e]=t[e].bind(n)})}t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s,o,a=(r=u,(s=[{key:"get",value:function(e){return this.storage[e]}},{key:"set",value:function(e,t){this.storage[e]=t}}])&&i(r.prototype,s),void(o&&i(r,o)),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"storage",void 0),this.storage={}}t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var i=o(),r=this.getStandardOrigin()+t.url;return a.call(this,i,"GET",r,e,{},t,n)},t.post=function(e,t,n,i){var r=o(),s=this.getStandardOrigin()+n.url;return a.call(this,r,"POST",s,e,JSON.parse(t),n,i)},t.patch=function(e,t,n,i){var r=o(),s=this.getStandardOrigin()+n.url;return a.call(this,r,"PATCH",s,e,JSON.parse(t),n,i)},t.del=function(e,t,n){var i=o(),r=this.getStandardOrigin()+t.url;return a.call(this,i,"DELETE",r,e,{},t,n)};n(0);var c=n(62);function o(){return"mobileweb"===Ti.Platform.osname?new XMLHttpRequest:Ti.Network.createHTTPClient()}function a(t,e,n,i,r,s,o){var a=this,u={};u.operation=s.operation,t.open(e,(0,c.buildUrl)(n,i),!0),function(e){"mobileweb"!==Ti.Platform.osname&&this._config.keepAlive&&(e.enableKeepAlive=!0)}.call(this,t),t.onload=function(){u.error=!1,t.status&&(u.statusCode=t.status);var e=JSON.parse(t.responseText);return a._config.logVerbosity&&function(e,t,n){var i=(new Date).getTime(),r=(new Date).toISOString(),s=Ti&&Ti.API&&Ti.API.log?Ti.API:console;s.log("<<<<<"),s.log("[".concat(r,"]"),"\n",e,"\n",t),s.log("-----");var o=(new Date).getTime()-i,a=(new Date).toISOString();s.log(">>>>>>"),s.log("[".concat(a," / ").concat(o,"]"),"\n",e,"\n",t,"\n",n),s.log("-----")}(n,i,t.responseText),o(u,e)},t.onerror=function(e){return u.error=!0,u.errorData=e.error,u.category=a._detectErrorCategory(e.error),o(u,null)},t.timeout="android"===Ti.Platform.osname?2147483647:1/0,t.send(r)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t,n,i){null!=i?Array.isArray(i)?i.forEach(function(e){s(t,n,e)}):"object"===r(i)?Object.keys(i).forEach(function(e){s(t,"".concat(n,"[").concat(e,"]"),i[e])}):t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(i))):null===i&&t.push(encodeURIComponent("".concat(encodeURIComponent(n))))}Object.defineProperty(t,"__esModule",{value:!0}),t.encodedKeyValuePair=s,t.buildUrl=function(e,t){var n=[];return Object.keys(t).forEach(function(e){s(n,e,t[e])}),"".concat(e,"?").concat(n.join("&"))}}]),module.exports=exports.PubNub;